<div class='toc'>
	<ol class='level-1'>
		<li><a href='#&%231052;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231099;'>&#1052;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231059;&%231089;&%231083;&%231086;&%231074;&%231080;&%231103;'>&#1059;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;</a></li>
			<li><a href='#&%231042;&%231086;&%231079;&%231074;&%231088;&%231072;&%231097;&%231072;&%231077;&%231084;&%231099;&%231077;%20&%231079;&%231085;&%231072;&%231095;&%231077;&%231085;&%231080;&%231103;'>&#1042;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1099;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;</a></li>
			<li><a href='#&%231057;&%231086;&%231073;&%231089;&%231090;&%231074;&%231077;&%231085;&%231085;&%231099;&%231077;%20&%231076;&%231077;&%231090;&%231077;&%231082;&%231090;&%231086;&%231088;&%231099;%20&%231089;&%231086;&%231074;&%231087;&%231072;&%231076;&%231077;&%231085;&%231080;&%231081;%20&%231076;&%231083;&%231103;%20&%231084;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231086;&%231074;'>&#1057;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1076;&#1077;&#1090;&#1077;&#1082;&#1090;&#1086;&#1088;&#1099; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1077;&#1085;&#1080;&#1081; &#1076;&#1083;&#1103; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;</a></li>
		</ol>
		<li><a href='#&%231057;&%231090;&%231072;&%231090;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231077;%20&%231092;&%231072;&%231081;&%231083;&%231099;'>&#1057;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099;</a></li>
		<li><a href='#&%231055;&%231088;&%231077;&%231076;&%231089;&%231090;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231103;%20/%20&%231064;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>&#1055;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; / &#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
		<ol class='level-3'>
				<li><a href='#&%231041;&%231091;&%231082;&%231074;&%231072;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>&#1041;&#1091;&#1082;&#1074;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			</ol>
			<li><a href='#&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231080;&%231079;&%231072;&%231090;&%231086;&%231088;&%231099;'>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1099;</a></li>
			<li><a href='#Haml%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Haml &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Erb%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Erb &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Builder%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Builder &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Nokogiri%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Nokogiri &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Sass%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Sass &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#SCSS%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>SCSS &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Less%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Less &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Liquid%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Liquid &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Markdown%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Markdown &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Textile%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Textile &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#RDoc%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>RDoc &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Radius%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Radius &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Markaby%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Markaby &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#RABL%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>RABL &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Slim%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Slim &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Creole%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Creole &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#CoffeeScript%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>CoffeeScript &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#Yajl%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>Yajl &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#WLang%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>WLang &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;%20&%231082;%20&%231087;&%231077;&%231088;&%231077;&%231084;&%231077;&%231085;&%231085;&%231099;&%231084;%20&%231074;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231072;&%231093;'>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1084; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;</a></li>
			<li><a href='#&%231064;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;%20&%231089;%20%3Ccode%3Eyield%3C/code%3E%20&%231080;%20&%231074;&%231083;&%231086;&%231078;&%231077;&%231085;&%231085;&%231099;&%231077;%20&%231088;&%231072;&%231089;&%231082;&%231083;&%231072;&%231076;&%231082;&%231080;%20(layout)'>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1089; <code>yield</code> &#1080; &#1074;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1099;&#1077; &#1088;&#1072;&#1089;&#1082;&#1083;&#1072;&#1076;&#1082;&#1080; (layout)</a></li>
			<li><a href='#&%231042;&%231082;&%231083;&%231102;&%231095;&%231105;&%231085;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>&#1042;&#1082;&#1083;&#1102;&#1095;&#1105;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#&%231048;&%231084;&%231077;&%231085;&%231086;&%231074;&%231072;&%231085;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'>&#1048;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</a></li>
			<li><a href='#&%231055;&%231088;&%231080;&%231074;&%231103;&%231079;&%231082;&%231072;%20&%231092;&%231072;&%231081;&%231083;&%231086;&%231074;&%231099;&%231093;%20&%231088;&%231072;&%231089;&%231096;&%231080;&%231088;&%231077;&%231085;&%231080;&%231081;'>&#1055;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1072; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;&#1099;&#1093; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1081;</a></li>
			<li><a href='#&%231044;&%231086;&%231073;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20&%231089;&%231086;&%231073;&%231089;&%231090;&%231074;&%231077;&%231085;&%231085;&%231086;&%231075;&%231086;%20&%231076;&%231074;&%231080;&%231078;&%231082;&%231072;%20&%231088;&%231077;&%231085;&%231076;&%231077;&%231088;&%231080;&%231085;&%231075;&%231072;'>&#1044;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1076;&#1074;&#1080;&#1078;&#1082;&#1072; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072;</a></li>
		</ol>
		<li><a href='#&%231060;&%231080;&%231083;&%231100;&%231090;&%231088;&%231099;'>&#1060;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099;</a></li>
		<li><a href='#&%231052;&%231077;&%231090;&%231086;&%231076;&%231099;-&%231087;&%231086;&%231084;&%231086;&%231097;&%231085;&%231080;&%231082;&%231080;'>&#1052;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231048;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20&%231089;&%231077;&%231089;&%231089;&%231080;&%231081;'>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;</a></li>
			<li><a href='#&%231055;&%231088;&%231077;&%231088;&%231099;&%231074;&%231072;&%231085;&%231080;&%231077;'>&#1055;&#1088;&#1077;&#1088;&#1099;&#1074;&#1072;&#1085;&#1080;&#1077;</a></li>
			<li><a href='#&%231055;&%231077;&%231088;&%231077;&%231076;&%231072;&%231095;&%231072;'>&#1055;&#1077;&#1088;&#1077;&#1076;&#1072;&#1095;&#1072;</a></li>
			<li><a href='#&%231042;&%231099;&%231079;&%231086;&%231074;%20&%231076;&%231088;&%231091;&%231075;&%231086;&%231075;&%231086;%20&%231084;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231072;'>&#1042;&#1099;&#1079;&#1086;&#1074; &#1076;&#1088;&#1091;&#1075;&#1086;&#1075;&#1086; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;</a></li>
			<li><a href='#&%231047;&%231072;&%231076;&%231072;&%231085;&%231080;&%231077;%20&%231090;&%231077;&%231083;&%231072;,%20&%231082;&%231086;&%231076;&%231072;%20&%231080;%20&%231079;&%231072;&%231075;&%231086;&%231083;&%231086;&%231074;&%231082;&%231086;&%231074;%20&%231086;&%231090;&%231074;&%231077;&%231090;&%231072;'>&#1047;&#1072;&#1076;&#1072;&#1085;&#1080;&#1077; &#1090;&#1077;&#1083;&#1072;, &#1082;&#1086;&#1076;&#1072; &#1080; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1086;&#1074; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;</a></li>
			<li><a href='#&%231057;&%231090;&%231088;&%231080;&%231084;&%231080;&%231085;&%231075;%20&%231086;&%231090;&%231074;&%231077;&%231090;&%231086;&%231074;'>&#1057;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075; &#1086;&#1090;&#1074;&#1077;&#1090;&#1086;&#1074;</a></li>
			<li><a href='#&%231051;&%231086;&%231075;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;'>&#1051;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;</a></li>
			<li><a href='#Mime-&%231090;&%231080;&%231087;&%231099;'>Mime-&#1090;&#1080;&#1087;&#1099;</a></li>
			<li><a href='#&%231043;&%231077;&%231085;&%231077;&%231088;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20URL'>&#1043;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; URL</a></li>
			<li><a href='#&%231055;&%231077;&%231088;&%231077;&%231085;&%231072;&%231087;&%231088;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20(&%231088;&%231077;&%231076;&%231080;&%231088;&%231077;&%231082;&%231090;)'>&#1055;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; (&#1088;&#1077;&#1076;&#1080;&#1088;&#1077;&#1082;&#1090;)</a></li>
			<li><a href='#&%231059;&%231087;&%231088;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20&%231082;&%231101;&%231096;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;&%231084;'>&#1059;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;</a></li>
			<li><a href='#&%231054;&%231090;&%231087;&%231088;&%231072;&%231074;&%231082;&%231072;%20&%231092;&%231072;&%231081;&%231083;&%231086;&%231074;'>&#1054;&#1090;&#1087;&#1088;&#1072;&#1074;&#1082;&#1072; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</a></li>
			<li><a href='#&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;%20&%231082;%20&%231086;&%231073;&%231098;&%231077;&%231082;&%231090;&%231091;%20&%231079;&%231072;&%231087;&%231088;&%231086;&%231089;&%231072;'>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;</a></li>
			<li><a href='#&%231042;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;'>&#1042;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;</a></li>
			<li><a href='#&%231056;&%231072;&%231073;&%231086;&%231090;&%231072;%20&%231089;&%231086;%20&%231074;&%231088;&%231077;&%231084;&%231077;&%231085;&%231077;&%231084;%20&%231080;%20&%231076;&%231072;&%231090;&%231072;&%231084;&%231080;'>&#1056;&#1072;&#1073;&#1086;&#1090;&#1072; &#1089;&#1086; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1077;&#1084; &#1080; &#1076;&#1072;&#1090;&#1072;&#1084;&#1080;</a></li>
			<li><a href='#&%231055;&%231086;&%231080;&%231089;&%231082;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231086;&%231074;'>&#1055;&#1086;&#1080;&#1089;&#1082; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;</a></li>
		</ol>
		<li><a href='#&%231050;&%231086;&%231085;&%231092;&%231080;&%231075;&%231091;&%231088;&%231072;&%231094;&%231080;&%231103;'>&#1050;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1103;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231053;&%231072;&%231089;&%231090;&%231088;&%231086;&%231081;&%231082;&%231072;%20&%231079;&%231072;&%231097;&%231080;&%231090;&%231099;%20&%231086;&%231090;%20&%231072;&%231090;&%231072;&%231082;'>&#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072; &#1079;&#1072;&#1097;&#1080;&#1090;&#1099; &#1086;&#1090; &#1072;&#1090;&#1072;&#1082;</a></li>
			<li><a href='#&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;&%231085;&%231099;&%231077;%20&%231085;&%231072;&%231089;&%231090;&%231088;&%231086;&%231081;&%231082;&%231080;'>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080;</a></li>
		</ol>
		<li><a href='#&%231056;&%231077;&%231078;&%231080;&%231084;,%20&%231086;&%231082;&%231088;&%231091;&%231078;&%231077;&%231085;&%231080;&%231077;'>&#1056;&#1077;&#1078;&#1080;&#1084;, &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077;</a></li>
		<li><a href='#&%231054;&%231073;&%231088;&%231072;&%231073;&%231086;&%231090;&%231082;&%231072;%20&%231086;&%231096;&%231080;&%231073;&%231086;&%231082;'>&#1054;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1072; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082;</a></li>
		<ol class='level-2'>
			<li><a href='#Not%20Found'>Not Found</a></li>
			<li><a href='#&%231054;&%231096;&%231080;&%231073;&%231082;&%231080;'>&#1054;&#1096;&#1080;&#1073;&#1082;&#1080;</a></li>
		</ol>
		<li><a href='#Rack%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22'>Rack "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;"</a></li>
		<li><a href='#&%231058;&%231077;&%231089;&%231090;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;'>&#1058;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;</a></li>
		<li><a href='#Sinatra::Base%20&mdash;%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22,%20&%231073;&%231080;&%231073;&%231083;&%231080;&%231086;&%231090;&%231077;&%231082;&%231080;%20&%231080;%20&%231084;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;'>Sinatra::Base &mdash; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;", &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;&#1080; &#1080; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231052;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;%20&%231087;&%231088;&%231086;&%231090;&%231080;&%231074;%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231093;'>&#1052;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1090;&#1080;&#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;</a></li>
			<li><a href='#&%231047;&%231072;&%231087;&%231091;&%231089;&%231082;%20&%231084;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231093;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;'>&#1047;&#1072;&#1087;&#1091;&#1089;&#1082; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081;</a></li>
			<li><a href='#&%231047;&%231072;&%231087;&%231091;&%231089;&%231082;%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231093;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;%20&%231089;%20config.ru'>&#1047;&#1072;&#1087;&#1091;&#1089;&#1082; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1089; config.ru</a></li>
			<li><a href='#&%231050;&%231086;&%231075;&%231076;&%231072;%20&%231080;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231090;&%231100;%20config.ru?'>&#1050;&#1086;&#1075;&#1076;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; config.ru?</a></li>
			<li><a href='#&%231048;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20Sinatra%20&%231074;%20&%231082;&%231072;&%231095;&%231077;&%231089;&%231090;&%231074;&%231077;%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22'>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; Sinatra &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;"</a></li>
			<li><a href='#&%231057;&%231086;&%231079;&%231076;&%231072;&%231085;&%231080;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;%20%22&%231085;&%231072;%20&%231083;&%231077;&%231090;&%231091;%22'>&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; "&#1085;&#1072; &#1083;&#1077;&#1090;&#1091;"</a></li>
		</ol>
		<li><a href='#&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231080;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231080;%20&%231087;&%231088;&%231080;&%231074;&%231103;&%231079;&%231082;&%231072;'>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1080; &#1087;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1072;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;%20/%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231072;'>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; / &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;</a></li>
			<li><a href='#&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231079;&%231072;&%231087;&%231088;&%231086;&%231089;&%231072;/&%231101;&%231082;&%231079;&%231077;&%231084;&%231087;&%231083;&%231103;&%231088;&%231072;'>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;/&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;</a></li>
			<li><a href='#&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231076;&%231077;&%231083;&%231077;&%231075;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231103;'>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;</a></li>
		</ol>
		<li><a href='#&%231050;&%231086;&%231084;&%231072;&%231085;&%231076;&%231085;&%231072;&%231103;%20&%231089;&%231090;&%231088;&%231086;&%231082;&%231072;'>&#1050;&#1086;&#1084;&#1072;&#1085;&#1076;&#1085;&#1072;&#1103; &#1089;&#1090;&#1088;&#1086;&#1082;&#1072;</a></li>
		<li><a href='#&%231057;&%231080;&%231089;&%231090;&%231077;&%231084;&%231085;&%231099;&%231077;%20&%231090;&%231088;&%231077;&%231073;&%231086;&%231074;&%231072;&%231085;&%231080;&%231103;'>&#1057;&#1080;&#1089;&#1090;&#1077;&#1084;&#1085;&#1099;&#1077; &#1090;&#1088;&#1077;&#1073;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;</a></li>
		<li><a href='#&%231053;&%231072;%20&%231086;&%231089;&%231090;&%231088;&%231080;&%231077;'>&#1053;&#1072; &#1086;&#1089;&#1090;&#1088;&#1080;&#1077;</a></li>
		<ol class='level-2'>
			<li><a href='#&%231057;%20&%231087;&%231086;&%231084;&%231086;&%231097;&%231100;&%231102;%20Bundler'>&#1057; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; Bundler</a></li>
			<li><a href='#&%231042;&%231088;&%231091;&%231095;&%231085;&%231091;&%231102;'>&#1042;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;</a></li>
			<li><a href='#&%231059;&%231089;&%231090;&%231072;&%231085;&%231086;&%231074;&%231082;&%231072;%20&%231075;&%231083;&%231086;&%231073;&%231072;&%231083;&%231100;&%231085;&%231086;'>&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1100;&#1085;&#1086;</a></li>
		</ol>
		<li><a href='#&%231042;&%231077;&%231088;&%231089;&%231080;&%231080;'>&#1042;&#1077;&#1088;&#1089;&#1080;&#1080;</a></li>
		<li><a href='#&%231044;&%231072;&%231083;&%231100;&%231085;&%231077;&%231081;&%231096;&%231077;&%231077;%20&%231095;&%231090;&%231077;&%231085;&%231080;&%231077;'>&#1044;&#1072;&#1083;&#1100;&#1085;&#1077;&#1081;&#1096;&#1077;&#1077; &#1095;&#1090;&#1077;&#1085;&#1080;&#1077;</a></li>
	</ol>
</div>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>

<p><em>&#1042;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077;: &#1069;&#1090;&#1086;&#1090; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090; &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1087;&#1077;&#1088;&#1077;&#1074;&#1086;&#1076;&#1086;&#1084; &#1072;&#1085;&#1075;&#1083;&#1080;&#1081;&#1089;&#1082;&#1086;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; &#1080; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100;
&#1091;&#1089;&#1090;&#1072;&#1088;&#1077;&#1074;&#1096;&#1080;&#1084;</em></p>

<p>Sinatra &mdash; &#1101;&#1090;&#1086; &#1087;&#1088;&#1077;&#1076;&#1084;&#1077;&#1090;&#1085;&#1086;-&#1086;&#1088;&#1080;&#1077;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1081; &#1082;&#1072;&#1088;&#1082;&#1072;&#1089;
(<a href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B5%D0%B4%D0%BC%D0%B5%D1%82%D0%BD%D0%BE-%D0%BE%D1%80%D0%B8%D0%B5%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9_%D1%8F%D0%B7%D1%8B%D0%BA_%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F">DSL</a>)
&#1076;&#1083;&#1103; &#1073;&#1099;&#1089;&#1090;&#1088;&#1086;&#1075;&#1086; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1103; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1093; &#1074;&#1077;&#1073;-&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1085;&#1072; Ruby &#1089; &#1084;&#1080;&#1085;&#1080;&#1084;&#1091;&#1084;&#1086;&#1084; &#1091;&#1089;&#1080;&#1083;&#1080;&#1081;:</p>

<pre><code class="ruby"># myapp.rb
require 'sinatra'

get '/' do
  'Hello world!'
end
</code></pre>

<p>&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1077; gem:</p>

<pre><code>gem install sinatra
</code></pre>

<p>&#1080; &#1079;&#1072;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;:</p>

<pre><code>ruby myapp.rb
</code></pre>

<p>&#1054;&#1094;&#1077;&#1085;&#1080;&#1090;&#1077; &#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090;: http://localhost:4567</p>

<p>&#1056;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1091;&#1077;&#1090;&#1089;&#1103; &#1090;&#1072;&#1082;&#1078;&#1077; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; Thin, &#1089;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1086;&#1081;: <code>gem install
thin</code>. Thin &mdash; &#1101;&#1090;&#1086; &#1073;&#1086;&#1083;&#1077;&#1077; &#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1081; &#1080; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1099;&#1081; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1076;&#1083;&#1103;
&#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1085;&#1072; Sinatra.</p>

<a name='&%231052;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231099;'></a>
<h2>&#1052;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;</h2>

<p>&#1042; Sinatra &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090; &mdash; &#1101;&#1090;&#1086; &#1087;&#1072;&#1088;&#1072;: &lt;HTTP &#1084;&#1077;&#1090;&#1086;&#1076;&gt; &#1080; &lt;&#1096;&#1072;&#1073;&#1083;&#1086;&#1085; URL&gt;. &#1050;&#1072;&#1078;&#1076;&#1099;&#1081; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;
&#1089;&#1074;&#1103;&#1079;&#1072;&#1085; &#1089; &#1073;&#1083;&#1086;&#1082;&#1086;&#1084; &#1082;&#1086;&#1076;&#1072;:</p>

<pre><code class="ruby">get '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1087;&#1086;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; ..
end

post '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1089;&#1086;&#1079;&#1076;&#1072;&#1090;&#1100; ..
end

put '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1079;&#1072;&#1084;&#1077;&#1085;&#1080;&#1090;&#1100; ..
end

patch '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1080;&#1079;&#1084;&#1077;&#1085;&#1080;&#1090;&#1100; ..
end

delete '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1091;&#1076;&#1072;&#1083;&#1080;&#1090;&#1100; ..
end

options '/' do
  # .. &#1095;&#1090;&#1086;-&#1090;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;&#1080;&#1090;&#1100; ..
end
</code></pre>

<p>&#1052;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099; &#1089;&#1074;&#1077;&#1088;&#1103;&#1102;&#1090;&#1089;&#1103; &#1089; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1084; &#1074; &#1087;&#1086;&#1088;&#1103;&#1076;&#1082;&#1077; &#1086;&#1095;&#1077;&#1088;&#1077;&#1076;&#1085;&#1086;&#1089;&#1090;&#1080; &#1080;&#1093; &#1079;&#1072;&#1087;&#1080;&#1089;&#1080; &#1074; &#1092;&#1072;&#1081;&#1083;&#1077;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;. &#1055;&#1077;&#1088;&#1074;&#1099;&#1081; &#1078;&#1077; &#1089;&#1086;&#1074;&#1087;&#1072;&#1074;&#1096;&#1080;&#1081; &#1089; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1084; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090; &#1080; &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1079;&#1074;&#1072;&#1085;.</p>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074; &#1084;&#1086;&#1075;&#1091;&#1090; &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; &#1074; &#1089;&#1077;&#1073;&#1103; &#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099;, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1074; x&#1101;&#1096;&#1077;
<code>params</code>:</p>

<pre><code class="ruby">get '/hello/:name' do
  # &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; "GET /hello/foo" &#1080; "GET /hello/bar",
  # &#1075;&#1076;&#1077; params[:name] 'foo' &#1080;&#1083;&#1080; 'bar'
  "Hello #{params[:name]}!"
end
</code></pre>

<p>&#1058;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1085;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1080;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093; &#1073;&#1083;&#1086;&#1082;&#1072;:</p>

<pre><code class="ruby">get '/hello/:name' do |n|
  "Hello #{n}!"
end
</code></pre>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1075;&#1091;&#1090; &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; &#1074; &#1089;&#1077;&#1073;&#1103; splat (&#1080;&#1083;&#1080; '*' &#1084;&#1072;&#1089;&#1082;&#1091;,
&#1086;&#1073;&#1086;&#1079;&#1085;&#1072;&#1095;&#1072;&#1102;&#1097;&#1091;&#1102; &#1083;&#1102;&#1073;&#1086;&#1081; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;) &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099;, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1074; &#1084;&#1072;&#1089;&#1089;&#1080;&#1074;&#1077; <code>params[:splat]</code>:</p>

<pre><code class="ruby">get '/say/*/to/*' do
  # &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; /say/hello/to/world
  params[:splat] # =&gt; ["hello", "world"]
end

get '/download/*.*' do
  # &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; /download/path/to/file.xml
  params[:splat] # =&gt; ["path/to/file", "xml"]
end
</code></pre>

<p>&#1048;&#1083;&#1080; &#1089; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072;&#1084;&#1080; &#1073;&#1083;&#1086;&#1082;&#1072;:</p>

<pre><code class="ruby">get '/download/*.*' do |path, ext|
  [path, ext] # =&gt; ["path/to/file", "xml"]
end
</code></pre>

<p>&#1056;&#1077;&#1075;&#1091;&#1083;&#1103;&#1088;&#1085;&#1099;&#1077; &#1074;&#1099;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;:</p>

<pre><code class="ruby">get %r{/hello/([\w]+)} do
  "Hello, #{params[:captures].first}!"
end
</code></pre>

<p>&#1048;&#1083;&#1080; &#1089; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1086;&#1084; &#1073;&#1083;&#1086;&#1082;&#1072;:</p>

<pre><code class="ruby">get %r{/hello/([\w]+)} do |c|
  "Hello, #{c}!"
end
</code></pre>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074; &#1084;&#1086;&#1075;&#1091;&#1090; &#1080;&#1084;&#1077;&#1090;&#1100; &#1085;&#1077;&#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099;:</p>

<pre><code class="ruby">get '/posts.?:format?' do
  # &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; "GET /posts", "GET /posts.json", "GET /posts.xml" &#1080; &#1090;.&#1076;.
end
</code></pre>

<p>&#1050;&#1089;&#1090;&#1072;&#1090;&#1080;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1085;&#1077; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1077; &#1079;&#1072;&#1097;&#1080;&#1090;&#1091; &#1086;&#1090; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1086;&#1075;&#1086; &#1087;&#1091;&#1090;&#1080; &#1074; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1103;&#1093; (path
traversal, &#1089;&#1084;. &#1085;&#1080;&#1078;&#1077;), &#1087;&#1091;&#1090;&#1100; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085; &#1076;&#1086; &#1085;&#1072;&#1095;&#1072;&#1083;&#1072; &#1087;&#1086;&#1080;&#1089;&#1082;&#1072;
&#1087;&#1086;&#1076;&#1093;&#1086;&#1076;&#1103;&#1097;&#1077;&#1075;&#1086; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;.</p>

<a name='&%231059;&%231089;&%231083;&%231086;&%231074;&%231080;&%231103;'></a>
<h3>&#1059;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;</h3>

<p>&#1052;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099; &#1084;&#1086;&#1075;&#1091;&#1090; &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; &#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1099;&#1077; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1077;&#1085;&#1080;&#1081;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1089;&#1082;&#1086;&#1077;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; (user agent):</p>

<pre><code class="ruby">get '/foo', :agent =&gt; /Songbird (\d\.\d)[\d\/]*?/ do
  "You're using Songbird version #{params[:agent][0]}"
end

get '/foo' do
  # &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; &#1085;&#1077;-songbird &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1072;&#1084;
end
</code></pre>

<p>&#1044;&#1088;&#1091;&#1075;&#1080;&#1084;&#1080; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1084;&#1080; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;&#1084;&#1080; &#1103;&#1074;&#1083;&#1103;&#1102;&#1090;&#1089;&#1103; <code>host_name</code> &#1080; <code>provides</code>:</p>

<pre><code class="ruby">get '/', :host_name =&gt; /^admin\./ do
  "Admin Area, Access denied!"
end

get '/', :provides =&gt; 'html' do
  haml :index
end

get '/', :provides =&gt; ['rss', 'atom', 'xml'] do
  builder :feed
end
</code></pre>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1079;&#1072;&#1076;&#1072;&#1090;&#1100; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;:</p>

<pre><code class="ruby">set(:probability) { |value| condition { rand &lt;= value } }

get '/win_a_car', :probability =&gt; 0.1 do
  "You won!"
end

get '/win_a_car' do
  "Sorry, you lost."
end
</code></pre>

<p>&#1044;&#1083;&#1103; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1077; &#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1086;&#1074;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1079;&#1074;&#1077;&#1079;&#1076;&#1086;&#1095;&#1082;&#1091;:</p>

<pre><code class="ruby">set(:auth) do |*roles|   # &lt;- &#1086;&#1073;&#1088;&#1072;&#1090;&#1080;&#1090;&#1077; &#1074;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077; &#1085;&#1072; &#1079;&#1074;&#1077;&#1079;&#1076;&#1086;&#1095;&#1082;&#1091;
  condition do
    unless logged_in? &amp;&amp; roles.any? {|role| current_user.in_role? role }
      redirect "/login/", 303
    end
  end
end

get "/my/account/", :auth =&gt; [:user, :admin] do
  "Your Account Details"
end

get "/only/admin/", :auth =&gt; :admin do
  "Only admins are allowed here!"
end
</code></pre>

<a name='&%231042;&%231086;&%231079;&%231074;&%231088;&%231072;&%231097;&%231072;&%231077;&%231084;&%231099;&%231077;%20&%231079;&%231085;&%231072;&%231095;&%231077;&%231085;&%231080;&%231103;'></a>
<h3>&#1042;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1099;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;</h3>

<p>&#1042;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1086;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1073;&#1083;&#1086;&#1082;&#1072; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072; &#1086;&#1075;&#1088;&#1072;&#1085;&#1080;&#1095;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1090;&#1077;&#1083;&#1086;&#1084; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1077;
&#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1086; HTTP &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1091;, &#1080;&#1083;&#1080; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1081; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1086;&#1081;" (middleware) &#1074; Rack
&#1089;&#1090;&#1077;&#1082;&#1077;. &#1063;&#1072;&#1097;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086; &#1101;&#1090;&#1086; &#1089;&#1090;&#1088;&#1086;&#1082;&#1072;, &#1082;&#1072;&#1082; &#1074; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1072;&#1093; &#1074;&#1099;&#1096;&#1077;. &#1053;&#1086; &#1090;&#1072;&#1082;&#1078;&#1077; &#1087;&#1088;&#1080;&#1077;&#1084;&#1083;&#1077;&#1084;&#1099; &#1080;
&#1076;&#1088;&#1091;&#1075;&#1080;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;.</p>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1077;&#1088;&#1085;&#1091;&#1090;&#1100; &#1083;&#1102;&#1073;&#1086;&#1081; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1073;&#1091;&#1076;&#1077;&#1090; &#1083;&#1080;&#1073;&#1086; &#1082;&#1086;&#1088;&#1088;&#1077;&#1082;&#1090;&#1085;&#1099;&#1084; Rack &#1086;&#1090;&#1074;&#1077;&#1090;&#1086;&#1084;,
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1084; Rack body, &#1083;&#1080;&#1073;&#1086; &#1082;&#1086;&#1076;&#1086;&#1084; &#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1103; HTTP:</p>

<p>&#1058;&#1072;&#1082;&#1080;&#1084; &#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;, &#1083;&#1077;&#1075;&#1082;&#1086; &#1084;&#1086;&#1078;&#1085;&#1086; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1087;&#1086;&#1090;&#1086;&#1095;&#1085;&#1099;&#1081; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;:</p>

<pre><code class="ruby">class Stream
  def each
    100.times { |i| yield "#{i}\n" }
  end
end

get('/') { Stream.new }
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>stream</code> (&#1086;&#1087;&#1080;&#1089;&#1099;&#1074;&#1072;&#1077;&#1084;&#1099;&#1081; &#1085;&#1080;&#1078;&#1077;), &#1095;&#1090;&#1086;&#1073;&#1099;
&#1091;&#1084;&#1077;&#1085;&#1100;&#1096;&#1080;&#1090;&#1100; &#1082;&#1086;&#1083;&#1080;&#1095;&#1077;&#1089;&#1090;&#1074;&#1086; &#1076;&#1091;&#1073;&#1083;&#1080;&#1088;&#1091;&#1077;&#1084;&#1086;&#1075;&#1086; &#1082;&#1086;&#1076;&#1072; &#1080; &#1076;&#1077;&#1088;&#1078;&#1072;&#1090;&#1100; &#1083;&#1086;&#1075;&#1080;&#1082;&#1091; &#1089;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;&#1072; &#1087;&#1088;&#1103;&#1084;&#1086; &#1074;
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1077;.</p>

<a name='&%231057;&%231086;&%231073;&%231089;&%231090;&%231074;&%231077;&%231085;&%231085;&%231099;&%231077;%20&%231076;&%231077;&%231090;&%231077;&%231082;&%231090;&%231086;&%231088;&%231099;%20&%231089;&%231086;&%231074;&%231087;&%231072;&%231076;&%231077;&%231085;&%231080;&%231081;%20&%231076;&%231083;&%231103;%20&%231084;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231086;&%231074;'></a>
<h3>&#1057;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1076;&#1077;&#1090;&#1077;&#1082;&#1090;&#1086;&#1088;&#1099; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1077;&#1085;&#1080;&#1081; &#1076;&#1083;&#1103; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;</h3>

<p>&#1050;&#1072;&#1082; &#1087;&#1086;&#1082;&#1072;&#1079;&#1072;&#1085;&#1086; &#1074;&#1099;&#1096;&#1077;, Sinatra &#1087;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1089;&#1086; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1086;&#1081; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1086;&#1081; &#1089;&#1090;&#1088;&#1086;&#1082; &#1080;
&#1088;&#1077;&#1075;&#1091;&#1083;&#1103;&#1088;&#1085;&#1099;&#1093; &#1074;&#1099;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1081; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; URL. &#1053;&#1086; &#1080; &#1101;&#1090;&#1086; &#1077;&#1097;&#1077; &#1085;&#1077; &#1074;&#1089;&#1077;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1083;&#1077;&#1075;&#1082;&#1086; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100; &#1089;&#1074;&#1086;&#1080; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1076;&#1077;&#1090;&#1077;&#1082;&#1090;&#1086;&#1088;&#1099; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1077;&#1085;&#1080;&#1081; (matchers) &#1076;&#1083;&#1103;
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;:</p>

<pre><code class="ruby">class AllButPattern
  Match = Struct.new(:captures)

  def initialize(except)
    @except   = except
    @captures = Match.new([])
  end

  def match(str)
    @captures unless @except === str
  end
end

def all_but(pattern)
  AllButPattern.new(pattern)
end

get all_but("/index") do
  # ...
end
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1087;&#1088;&#1077;&#1076;&#1099;&#1076;&#1091;&#1097;&#1080;&#1081; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1095;&#1077;&#1088;&#1077;&#1089;&#1095;&#1091;&#1088; &#1091;&#1089;&#1083;&#1086;&#1078;&#1085;&#1077;&#1085;, &#1087;&#1086;&#1090;&#1086;&#1084;&#1091; &#1095;&#1090;&#1086; &#1086;&#1085;
&#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1086;&#1074;&#1072;&#1085; &#1090;&#1072;&#1082;:</p>

<pre><code class="ruby">get // do
  pass if request.path_info == "/index"
  # ...
end
</code></pre>

<p>&#1048;&#1083;&#1080; &#1089; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; &#1085;&#1077;&#1075;&#1072;&#1090;&#1080;&#1074;&#1085;&#1086;&#1075;&#1086; &#1087;&#1088;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1072; &#1074;&#1087;&#1077;&#1088;&#1077;&#1076;:</p>

<pre><code class="ruby">get %r{^(?!/index$)} do
  # ...
end
</code></pre>

<a name='&%231057;&%231090;&%231072;&%231090;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231077;%20&%231092;&%231072;&%231081;&%231083;&%231099;'></a>
<h2>&#1057;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099;</h2>

<p>&#1057;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099; &#1086;&#1090;&#1076;&#1072;&#1102;&#1090;&#1089;&#1103; &#1080;&#1079; <code>./public</code> &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;
&#1084;&#1077;&#1089;&#1090;&#1086;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1103; &#1086;&#1087;&#1094;&#1080;&#1102; <code>:public_folder</code>:</p>

<pre><code class="ruby">set :public_folder, File.dirname(__FILE__) + '/static'
</code></pre>

<p>&#1059;&#1095;&#1090;&#1080;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1080;&#1084;&#1103; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1089;&#1086; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1084;&#1080; &#1092;&#1072;&#1081;&#1083;&#1072;&#1084;&#1080; &#1085;&#1077; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1074; URL.
&#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1092;&#1072;&#1081;&#1083; <code>./public/css/style.css</code> &#1073;&#1091;&#1076;&#1077;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1077;&#1085; &#1082;&#1072;&#1082;
<code>http://example.com/css/style.css</code>.</p>

<p>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1086;&#1087;&#1094;&#1080;&#1102; <code>:static_cache_control</code> (&#1089;&#1084;. &#1085;&#1080;&#1078;&#1077;), &#1095;&#1090;&#1086;&#1073;&#1099; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1086;&#1082;
<code>Cache-Control</code>.</p>

<a name='&%231055;&%231088;&%231077;&%231076;&%231089;&%231090;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231103;%20/%20&%231064;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h2>&#1055;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; / &#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h2>

<p>&#1050;&#1072;&#1078;&#1076;&#1099;&#1081; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088; &#1087;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085; &#1089;&#1074;&#1086;&#1080;&#1084; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1084; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1084;. &#1069;&#1090;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1087;&#1086;&#1087;&#1088;&#1086;&#1089;&#1090;&#1091;
&#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1102;&#1090; &#1089;&#1090;&#1088;&#1086;&#1082;&#1091;:</p>

<pre><code class="ruby">get '/' do
  erb :index
end
</code></pre>

<p>&#1054;&#1090;&#1086;&#1073;&#1088;&#1072;&#1079;&#1080;&#1090; <code>views/index.erb</code>.</p>

<p>&#1042;&#1084;&#1077;&#1089;&#1090;&#1086; &#1080;&#1084;&#1077;&#1085;&#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072; &#1074;&#1099; &#1090;&#1072;&#1082; &#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086; &#1089;&#1072;&#1084;&#1086;
&#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1084;&#1086;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;:</p>

<pre><code class="ruby">get '/' do
  code = "&lt;%= Time.now %&gt;"
  erb code
end
</code></pre>

<p>&#1069;&#1090;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1102;&#1090; &#1074;&#1090;&#1086;&#1088;&#1086;&#1081; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;, &#1093;&#1077;&#1096; &#1089; &#1086;&#1087;&#1094;&#1080;&#1103;&#1084;&#1080;:</p>

<pre><code class="ruby">get '/' do
  erb :index, :layout =&gt; :post
end
</code></pre>

<p>&#1054;&#1090;&#1086;&#1073;&#1088;&#1072;&#1079;&#1080;&#1090; <code>views/index.erb</code>, &#1074;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1099;&#1084; &#1074; <code>views/post.erb</code> (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;:
<code>views/layout.erb</code>, &#1077;&#1089;&#1083;&#1080; &#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;).</p>

<p>&#1051;&#1102;&#1073;&#1099;&#1077; &#1086;&#1087;&#1094;&#1080;&#1080;, &#1085;&#1077; &#1087;&#1086;&#1085;&#1080;&#1084;&#1072;&#1077;&#1084;&#1099;&#1077; Sinatra, &#1073;&#1091;&#1076;&#1091;&#1090; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1099; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;:</p>

<pre><code class="ruby">get '/' do
  haml :index, :format =&gt; :html5
end
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1079;&#1072;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1086;&#1087;&#1094;&#1080;&#1080; &#1076;&#1083;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1074; &#1074; &#1086;&#1073;&#1097;&#1077;&#1084;:</p>

<pre><code class="ruby">set :haml, :format =&gt; :html5

get '/' do
  haml :index
end
</code></pre>

<p>&#1054;&#1087;&#1094;&#1080;&#1080;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1074; &#1084;&#1077;&#1090;&#1086;&#1076;, &#1087;&#1077;&#1088;&#1077;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1103;&#1102;&#1090; &#1086;&#1087;&#1094;&#1080;&#1080;, &#1079;&#1072;&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>set</code>.</p>

<p>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1086;&#1087;&#1094;&#1080;&#1080;:</p>

<dl>
<dt>locals</dt>
  <dd>
    &#1057;&#1087;&#1080;&#1089;&#1086;&#1082; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1093; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1077;&#1084;&#1099;&#1093; &#1074; &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;.
    &#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;: <tt>erb "", :locals =&gt; {:foo =&gt; "bar"}</tt>
  </dd>

  <dt>default_encoding</dt>
  <dd>
    &#1050;&#1086;&#1076;&#1080;&#1088;&#1086;&#1074;&#1082;&#1072;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1091;&#1102; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;, &#1077;&#1089;&#1083;&#1080; &#1085;&#1077; &#1091;&#1076;&#1072;&#1083;&#1086;&#1089;&#1100; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100;
    &#1086;&#1088;&#1080;&#1075;&#1080;&#1085;&#1072;&#1083;&#1100;&#1085;&#1091;&#1102;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: <tt>settings.default_encoding</tt>.
  </dd>

  <dt>views</dt>
  <dd>
    &#1044;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1103; &#1089; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1084;&#1080;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: <tt>settings.views</tt>.
  </dd>

  <dt>layout</dt>
  <dd>
    &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1080;&#1083;&#1080; &#1085;&#1077;&#1090; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090; (<tt>true</tt> &#1080;&#1083;&#1080; <tt>false</tt>). &#1045;&#1089;&#1083;&#1080; &#1078;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; Symbol,
    &#1090;&#1086; &#1091;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1077;&#1090;, &#1082;&#1072;&#1082;&#1086;&#1081; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072;. &#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;:
    <tt>erb :index, :layout =&gt; !request.xhr?</tt>
  </dd>

  <dt>content_type</dt>
  <dd>
    Content-Type &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1079;&#1072;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1084;.
  </dd>

  <dt>scope</dt>
  <dd>
    &#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;, &#1074; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1081; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1103;&#1090;&#1089;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;
    &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;. &#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1080;&#1079;&#1084;&#1077;&#1085;&#1080;&#1090;&#1077; &#1101;&#1090;&#1091; &#1086;&#1087;&#1094;&#1080;&#1102;, &#1090;&#1086; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072; &#1080;
    &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080; &#1089;&#1090;&#1072;&#1085;&#1091;&#1090; &#1085;&#1077;&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1084;&#1080; &#1074; &#1074;&#1072;&#1096;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;.
  </dd>

  <dt>layout_engine</dt>
  <dd>
    &#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1076;&#1083;&#1103; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072;.
    &#1055;&#1086;&#1083;&#1077;&#1079;&#1085;&#1072;&#1103; &#1086;&#1087;&#1094;&#1080;&#1103; &#1076;&#1083;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1074;, &#1074; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1093; &#1085;&#1077;&#1090; &#1085;&#1080;&#1082;&#1072;&#1082;&#1086;&#1081; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1080;
    &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1086;&#1074;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1090;&#1086;&#1090; &#1078;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;, &#1095;&#1090;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1080; &#1076;&#1083;&#1103; &#1089;&#1072;&#1084;&#1086;&#1075;&#1086;
    &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;. &#1055;&#1088;&#1080;&#1084;&#1077;&#1088;: <tt>set :rdoc, :layout_engine =&gt; :erb</tt>
  </dd>
</dl>
<p>&#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1089;&#1095;&#1080;&#1090;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1095;&#1090;&#1086; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1085;&#1072;&#1093;&#1086;&#1076;&#1103;&#1090;&#1089;&#1103; &#1074; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; <code>./views</code>. &#1063;&#1090;&#1086;&#1073;&#1099;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1076;&#1088;&#1091;&#1075;&#1091;&#1102; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1102; &#1089; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1084;&#1080;:</p>

<pre><code class="ruby">set :views, settings.root + '/templates'
</code></pre>

<p>&#1042;&#1072;&#1078;&#1085;&#1086;&#1077; &#1079;&#1072;&#1084;&#1077;&#1095;&#1072;&#1085;&#1080;&#1077;: &#1074;&#1099; &#1074;&#1089;&#1077;&#1075;&#1076;&#1072; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1089;&#1089;&#1099;&#1083;&#1072;&#1090;&#1100;&#1089;&#1103; &#1085;&#1072; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1086;&#1074;
(Symbol), &#1076;&#1072;&#1078;&#1077; &#1082;&#1086;&#1075;&#1076;&#1072; &#1086;&#1085;&#1080; &#1074; &#1087;&#1086;&#1076;&#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; (&#1074; &#1101;&#1090;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077;
<code>:'subdir/template'</code>). &#1042;&#1099; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1089;&#1080;&#1084;&#1074;&#1086;&#1083;&#1099;, &#1087;&#1086;&#1090;&#1086;&#1084;&#1091; &#1095;&#1090;&#1086; &#1080;&#1085;&#1072;&#1095;&#1077;
&#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1099; &#1087;&#1086;&#1087;&#1088;&#1086;&#1089;&#1090;&#1091; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1072;&#1102;&#1090; &#1083;&#1102;&#1073;&#1099;&#1077; &#1089;&#1090;&#1088;&#1086;&#1082;&#1080;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1080;&#1084;.</p>

<a name='&%231041;&%231091;&%231082;&%231074;&%231072;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h4>&#1041;&#1091;&#1082;&#1074;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h4>

<pre><code class="ruby">get '/' do
  haml '%div.title Hello World'
end
</code></pre>

<p>&#1054;&#1090;&#1086;&#1073;&#1088;&#1072;&#1079;&#1080;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1089;&#1090;&#1088;&#1086;&#1082;&#1086;&#1081;.</p>

<a name='&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231080;&%231079;&%231072;&%231090;&%231086;&%231088;&%231099;'></a>
<h3>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1099;</h3>

<p>&#1053;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1103;&#1079;&#1099;&#1082;&#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; &#1080;&#1084;&#1077;&#1102;&#1090; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1081;. &#1063;&#1090;&#1086;&#1073;&#1099; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100;, &#1082;&#1072;&#1082;&#1091;&#1102;
&#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1102; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;, &#1074;&#1072;&#1084; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1085;&#1091;&#1078;&#1085;&#1091;&#1102; &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;&#1091;:</p>

<pre><code class="ruby">require 'rdiscount' # &#1080;&#1083;&#1080; require 'bluecloth'
get('/') { markdown :index }
</code></pre>

<a name='Haml%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Haml &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://haml.info/" title="haml">haml</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.haml</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>haml :index, :format =&gt; :html5</tt></td>
  </tr>
</table>
<a name='Erb%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Erb &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td>
      <a href="http://www.kuwata-lab.com/erubis/" title="erubis">erubis</a>
      &#1080;&#1083;&#1080; erb (&#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085; &#1074; Ruby)
    </td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td>
<tt>.erb</tt>, <tt>.rhtml</tt> or <tt>.erubis</tt> (&#1090;&#1086;&#1083;&#1100;&#1082;&#1086; Erubis)</td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>erb :index</tt></td>
  </tr>
</table>
<a name='Builder%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Builder &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td>
      <a href="http://builder.rubyforge.org/" title="builder">builder</a>
    </td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.builder</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>builder { |xml| xml.em "hi" }</tt></td>
  </tr>
</table>
<p>&#1041;&#1083;&#1086;&#1082; &#1090;&#1072;&#1082;&#1078;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1080; &#1076;&#1083;&#1103; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; (&#1089;&#1084;. &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;).</p>

<a name='Nokogiri%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Nokogiri &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://nokogiri.org/" title="nokogiri">nokogiri</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.nokogiri</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>nokogiri { |xml| xml.em "hi" }</tt></td>
  </tr>
</table>
<p>&#1041;&#1083;&#1086;&#1082; &#1090;&#1072;&#1082;&#1078;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1080; &#1076;&#1083;&#1103; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; (&#1089;&#1084;. &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;).</p>

<a name='Sass%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Sass &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://sass-lang.com/" title="sass">sass</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.sass</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>sass :stylesheet, :style =&gt; :expanded</tt></td>
  </tr>
</table>
<a name='SCSS%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>SCSS &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://sass-lang.com/" title="sass">sass</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.scss</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>scss :stylesheet, :style =&gt; :expanded</tt></td>
  </tr>
</table>
<a name='Less%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Less &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://www.lesscss.org/" title="less">less</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.less</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>less :stylesheet</tt></td>
  </tr>
</table>
<a name='Liquid%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Liquid &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://www.liquidmarkup.org/" title="liquid">liquid</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.liquid</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>liquid :index, :locals =&gt; { :key =&gt; 'value' }</tt></td>
  </tr>
</table>
<p>&#1058;&#1072;&#1082; &#1082;&#1072;&#1082; &#1074; Liquid &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093; &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1079; Ruby (&#1082;&#1088;&#1086;&#1084;&#1077; <code>yield</code>), &#1090;&#1086;
&#1074;&#1099; &#1087;&#1086;&#1095;&#1090;&#1080; &#1074;&#1089;&#1077;&#1075;&#1076;&#1072; &#1073;&#1091;&#1076;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.</p>

<a name='Markdown%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Markdown &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td>
      &#1051;&#1102;&#1073;&#1072;&#1103; &#1080;&#1079; &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;:
        <a href="https://github.com/rtomayko/rdiscount" title="RDiscount">RDiscount</a>,
        <a href="https://github.com/vmg/redcarpet" title="RedCarpet">RedCarpet</a>,
        <a href="http://deveiate.org/projects/BlueCloth" title="BlueCloth">BlueCloth</a>,
        <a href="http://kramdown.rubyforge.org/" title="kramdown">kramdown</a>,
        <a href="http://maruku.rubyforge.org/" title="maruku">maruku</a>
    </td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td>
<tt>.markdown</tt>, <tt>.mkd</tt> and <tt>.md</tt>
</td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>markdown :index, :layout_engine =&gt; :erb</tt></td>
  </tr>
</table>
<p>&#1042; Markdown &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1083;&#1080; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.
&#1057;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;, &#1074;&#1072;&#1084;, &#1089;&#1082;&#1086;&#1088;&#1077;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086;, &#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1085;&#1086;
&#1089; &#1076;&#1088;&#1091;&#1075;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1084;:</p>

<pre><code class="ruby">erb :overview, :locals =&gt; { :text =&gt; markdown(:introduction) }
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>markdown</code> &#1080;&#1079; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;:</p>

<pre><code class="ruby">%h1 Hello From Haml!
%p= markdown(:greetings)
</code></pre>

<p>&#1042;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; Ruby &#1080;&#1079; Markdown, &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;, &#1074;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1099; &#1085;&#1072; Markdown. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1090;&#1100; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1086;&#1076;&#1080;&#1085; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088; &#1076;&#1083;&#1103; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;, &#1072; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1076;&#1083;&#1103; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
&#1086;&#1087;&#1094;&#1080;&#1080; <code>:layout_engine</code>.</p>

<a name='Textile%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Textile &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://redcloth.org/" title="RedCloth">RedCloth</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.textile</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>textile :index, :layout_engine =&gt; :erb</tt></td>
  </tr>
</table>
<p>&#1042; Textile &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1083;&#1080; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.
&#1057;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;, &#1074;&#1072;&#1084;, &#1089;&#1082;&#1086;&#1088;&#1077;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086;, &#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1085;&#1086;
&#1089; &#1076;&#1088;&#1091;&#1075;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1084;:</p>

<pre><code class="ruby">erb :overview, :locals =&gt; { :text =&gt; textile(:introduction) }
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>textile</code> &#1080;&#1079; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;:</p>

<pre><code class="ruby">%h1 Hello From Haml!
%p= textile(:greetings)
</code></pre>

<p>&#1042;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; Ruby &#1080;&#1079; Textile, &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;, &#1074;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1099; &#1085;&#1072; Textile. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1090;&#1100; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1086;&#1076;&#1080;&#1085; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088; &#1076;&#1083;&#1103; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;, &#1072; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1076;&#1083;&#1103; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
&#1086;&#1087;&#1094;&#1080;&#1080; <code>:layout_engine</code>.</p>

<a name='RDoc%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>RDoc &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://rdoc.rubyforge.org/" title="RDoc">RDoc</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.rdoc</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>rdoc :README, :layout_engine =&gt; :erb</tt></td>
  </tr>
</table>
<p>&#1042; RDoc &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1083;&#1080; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.
&#1057;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;, &#1074;&#1072;&#1084;, &#1089;&#1082;&#1086;&#1088;&#1077;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086;, &#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1085;&#1086;
&#1089; &#1076;&#1088;&#1091;&#1075;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1084;:</p>

<pre><code class="ruby">erb :overview, :locals =&gt; { :text =&gt; rdoc(:introduction) }
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>rdoc</code> &#1080;&#1079; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;:</p>

<pre><code class="ruby">%h1 Hello From Haml!
%p= rdoc(:greetings)
</code></pre>

<p>&#1042;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; Ruby &#1080;&#1079; RDoc, &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;, &#1074;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1099; &#1085;&#1072; RDoc. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1090;&#1100; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1086;&#1076;&#1080;&#1085; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;
&#1076;&#1083;&#1103; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;, &#1072; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1076;&#1083;&#1103; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1086;&#1087;&#1094;&#1080;&#1080;
<code>:layout_engine</code>.</p>

<a name='Radius%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Radius &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://radius.rubyforge.org/" title="Radius">Radius</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.radius</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>radius :index, :locals =&gt; { :key =&gt; 'value' }</tt></td>
  </tr>
</table>
<p>&#1058;&#1072;&#1082; &#1082;&#1072;&#1082; &#1074; Radius &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093; &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1079; Ruby &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102;, &#1090;&#1086; &#1074;&#1099;
&#1087;&#1086;&#1095;&#1090;&#1080; &#1074;&#1089;&#1077;&#1075;&#1076;&#1072; &#1073;&#1091;&#1076;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.</p>

<a name='Markaby%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Markaby &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://markaby.github.com/" title="Markaby">Markaby</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.mab</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>markaby { h1 "Welcome!" }</tt></td>
  </tr>
</table>
<p>&#1041;&#1083;&#1086;&#1082; &#1090;&#1072;&#1082;&#1078;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1080; &#1076;&#1083;&#1103; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; (&#1089;&#1084;. &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;).</p>

<a name='RABL%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>RABL &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="https://github.com/nesquena/rabl" title="Rabl">Rabl</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.rabl</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>rabl :index</tt></td>
  </tr>
</table>
<a name='Slim%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Slim &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="http://slim-lang.com/" title="Slim Lang">Slim Lang</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.slim</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>slim :index</tt></td>
  </tr>
</table>
<a name='Creole%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Creole &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="https://github.com/minad/creole" title="Creole">Creole</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.creole</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>creole :wiki, :layout_engine =&gt; :erb</tt></td>
  </tr>
</table>
<p>&#1042; Creole &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1083;&#1080; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.
&#1057;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;, &#1074;&#1072;&#1084;, &#1089;&#1082;&#1086;&#1088;&#1077;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086;, &#1087;&#1088;&#1080;&#1076;&#1077;&#1090;&#1089;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1085;&#1086;
&#1089; &#1076;&#1088;&#1091;&#1075;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1086;&#1084;:</p>

<pre><code class="ruby">erb :overview, :locals =&gt; { :text =&gt; creole(:introduction) }
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>creole</code> &#1080;&#1079; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;:</p>

<pre><code class="ruby">%h1 Hello From Haml!
%p= creole(:greetings)
</code></pre>

<p>&#1042;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; Ruby &#1080;&#1079; Creole, &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;, &#1074;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1099; &#1085;&#1072; Creole. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1090;&#1100; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
&#1086;&#1076;&#1080;&#1085; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088; &#1076;&#1083;&#1103; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;, &#1072; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1076;&#1083;&#1103; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090;&#1072; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
&#1086;&#1087;&#1094;&#1080;&#1080; <code>:layout_engine</code>.</p>

<a name='CoffeeScript%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>CoffeeScript &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td>
      <a href="https://github.com/josh/ruby-coffee-script" title="Ruby CoffeeScript">
        CoffeeScript
      </a> &#1080; &#1089;&#1087;&#1086;&#1089;&#1086;&#1073;
      <a href="https://github.com/sstephenson/execjs/blob/master/README.md#readme" title="ExecJS">
        &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; JavaScript
      </a>
    </td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.coffee</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>coffee :index</tt></td>
  </tr>
</table>
<a name='Yajl%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>Yajl &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="https://github.com/brianmario/yajl-ruby" title="yajl-ruby">yajl-ruby</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.yajl</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td>
      <tt>
        yajl :index,
             :locals =&gt; { :key =&gt; 'qux' },
             :callback =&gt; 'present',
             :variable =&gt; 'resource'
      </tt>
    </td>
  </tr>
</table>
<p>&#1057;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1084;&#1086;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1088;&#1077;&#1090;&#1080;&#1088;&#1091;&#1077;&#1090;&#1089;&#1103; &#1082;&#1072;&#1082; &#1082;&#1086;&#1076; &#1085;&#1072; Ruby, &#1072; &#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1080;&#1088;&#1091;&#1102;&#1097;&#1072;&#1103;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103; json &#1079;&#1072;&#1090;&#1077;&#1084; &#1082;&#1086;&#1085;&#1074;&#1077;&#1088;&#1090;&#1080;&#1088;&#1091;&#1077;&#1090;&#1089;&#1103; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>#to_json</code>.</p>

<pre><code class="ruby">json = { :foo =&gt; 'bar' }
json[:baz] = key
</code></pre>

<p>&#1054;&#1087;&#1094;&#1080;&#1080; <code>:callback</code> &#1080; <code>:variable</code> &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1102;&#1090;&#1089;&#1103; &#1076;&#1083;&#1103; "&#1076;&#1077;&#1082;&#1086;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;" &#1080;&#1090;&#1086;&#1075;&#1086;&#1074;&#1086;&#1075;&#1086;
&#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1072;.</p>

<pre><code class="ruby">var resource = {"foo":"bar","baz":"qux"}; present(resource);
</code></pre>

<a name='WLang%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>WLang &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<table>
<tr>
<td>&#1047;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;</td>
    <td><a href="https://github.com/blambeau/wlang/" title="wlang">wlang</a></td>
  </tr>
<tr>
<td>&#1056;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</td>
    <td><tt>.wlang</tt></td>
  </tr>
<tr>
<td>&#1055;&#1088;&#1080;&#1084;&#1077;&#1088;</td>
    <td><tt>wlang :index, :locals =&gt; { :key =&gt; 'value' }</tt></td>
  </tr>
</table>
<p>&#1058;&#1072;&#1082; &#1082;&#1072;&#1082; &#1074; WLang &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093; &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080;&#1079; Ruby &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102; (&#1079;&#1072;
&#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077;&#1084; <code>yield</code>), &#1090;&#1086; &#1074;&#1099; &#1087;&#1086;&#1095;&#1090;&#1080; &#1074;&#1089;&#1077;&#1075;&#1076;&#1072; &#1073;&#1091;&#1076;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077;
&#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;.</p>

<a name='&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;%20&%231082;%20&%231087;&%231077;&%231088;&%231077;&%231084;&%231077;&%231085;&%231085;&%231099;&%231084;%20&%231074;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231072;&%231093;'></a>
<h3>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1084; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;</h3>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1088;&#1077;&#1090;&#1080;&#1088;&#1091;&#1102;&#1090;&#1089;&#1103; &#1074; &#1090;&#1086;&#1084; &#1078;&#1077; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1080; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;.
&#1055;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;, &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1074; &#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1077; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074;, &#1073;&#1091;&#1076;&#1091;&#1090;
&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102; &#1074; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;:</p>

<pre><code class="ruby">get '/:id' do
  @foo = Foo.find(params[:id])
  haml '%h1= @foo.name'
end
</code></pre>

<p>&#1051;&#1080;&#1073;&#1086; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1077; &#1080;&#1093; &#1095;&#1077;&#1088;&#1077;&#1079; &#1093;&#1077;&#1096; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1093; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093;:</p>

<pre><code class="ruby">get '/:id' do
  foo = Foo.find(params[:id])
  haml '%h1= bar.name', :locals =&gt; { :bar =&gt; foo }
end
</code></pre>

<p>&#1069;&#1090;&#1086; &#1086;&#1073;&#1099;&#1095;&#1085;&#1099;&#1081; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1103;&#1090;&#1089;&#1103; &#1082;&#1072;&#1082; &#1095;&#1072;&#1089;&#1090;&#1080; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;.</p>

<a name='&%231064;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;%20&%231089;%20%3Ccode%3Eyield%3C/code%3E%20&%231080;%20&%231074;&%231083;&%231086;&%231078;&%231077;&%231085;&%231085;&%231099;&%231077;%20&%231088;&%231072;&%231089;&%231082;&%231083;&%231072;&%231076;&%231082;&%231080;%20(layout)'></a>
<h3>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1089; <code>yield</code> &#1080; &#1074;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1099;&#1077; &#1088;&#1072;&#1089;&#1082;&#1083;&#1072;&#1076;&#1082;&#1080; (layout)</h3>

<p>&#1056;&#1072;&#1089;&#1082;&#1083;&#1072;&#1076;&#1082;&#1072; (layout) &#1086;&#1073;&#1099;&#1095;&#1085;&#1086; &#1087;&#1088;&#1077;&#1076;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1077;&#1090; &#1089;&#1086;&#1073;&#1086;&#1081; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1080;&#1089;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;
<code>yield</code>.
&#1058;&#1072;&#1082;&#1086;&#1081; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1083;&#1080;&#1073;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1086;&#1087;&#1094;&#1080;&#1080; <code>:template</code>,
&#1082;&#1072;&#1082; &#1086;&#1087;&#1080;&#1089;&#1072;&#1085;&#1086; &#1074;&#1099;&#1096;&#1077;, &#1083;&#1080;&#1073;&#1086; &#1086;&#1085; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085; &#1073;&#1083;&#1086;&#1082;&#1086;&#1084;:</p>

<pre><code class="ruby">    erb :post, :layout =&gt; false do
      erb :index
    end
</code></pre>

<p>&#1069;&#1090;&#1080; &#1080;&#1085;&#1089;&#1090;&#1088;&#1091;&#1082;&#1094;&#1080;&#1080; &#1074; &#1086;&#1089;&#1085;&#1086;&#1074;&#1085;&#1086;&#1084; &#1101;&#1082;&#1074;&#1080;&#1074;&#1072;&#1083;&#1077;&#1085;&#1090;&#1085;&#1099; <code>erb :index, :layout =&gt; :post</code>.</p>

<p>&#1055;&#1077;&#1088;&#1077;&#1076;&#1072;&#1095;&#1072; &#1073;&#1083;&#1086;&#1082;&#1086;&#1074; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1088;&#1077;&#1090;&#1080;&#1088;&#1091;&#1102;&#1097;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1084; &#1085;&#1072;&#1080;&#1073;&#1086;&#1083;&#1077;&#1077; &#1087;&#1086;&#1083;&#1077;&#1079;&#1085;&#1072; &#1076;&#1083;&#1103;
&#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1103; &#1074;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1099;&#1093; &#1088;&#1072;&#1089;&#1082;&#1083;&#1072;&#1076;&#1086;&#1082;:</p>

<pre><code class="ruby">    erb :main_layout, :layout =&gt; false do
      erb :admin_layout do
        erb :user
      end
    end
</code></pre>

<p>&#1069;&#1090;&#1086; &#1078;&#1077; &#1089;&#1072;&#1084;&#1086;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1089;&#1076;&#1077;&#1083;&#1072;&#1085;&#1086; &#1082;&#1086;&#1088;&#1086;&#1095;&#1077;:</p>

<pre><code class="ruby">    erb :admin_layout, :layout =&gt; :main_layout do
      erb :user
    end
</code></pre>

<p>&#1042; &#1085;&#1072;&#1089;&#1090;&#1086;&#1103;&#1097;&#1077;&#1077; &#1074;&#1088;&#1077;&#1084;&#1103;, &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1077; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1088;&#1077;&#1090;&#1080;&#1088;&#1091;&#1073;&#1097;&#1080;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;
&#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1102;&#1090; &#1073;&#1083;&#1086;&#1082;:
<code>erb</code>, <code>haml</code>, <code>liquid</code>, <code>slim</code>, <code>wlang</code>.
&#1054;&#1073;&#1097;&#1080;&#1081; &#1084;&#1077;&#1090;&#1086;&#1076; &#1079;&#1072;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1103; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; <code>render</code> &#1090;&#1072;&#1082;&#1078;&#1077; &#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; &#1073;&#1083;&#1086;&#1082;.</p>

<a name='&%231042;&%231082;&%231083;&%231102;&%231095;&%231105;&%231085;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>&#1042;&#1082;&#1083;&#1102;&#1095;&#1105;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1099; &#1074; &#1082;&#1086;&#1085;&#1094;&#1077; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1092;&#1072;&#1081;&#1083;&#1072;:</p>

<pre><code class="ruby">require 'sinatra'

get '/' do
  haml :index
end

__END__

@@ layout
%html
  = yield

@@ index
%div.title Hello world.
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;: &#1074;&#1082;&#1083;&#1102;&#1095;&#1105;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;, &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1074; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1086;&#1084; &#1092;&#1072;&#1081;&#1083;&#1077;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1080;&#1083;
Sinatra, &#1073;&#1091;&#1076;&#1091;&#1090; &#1079;&#1072;&#1075;&#1088;&#1091;&#1078;&#1077;&#1085;&#1099; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;. &#1042;&#1099;&#1079;&#1086;&#1074;&#1080;&#1090;&#1077; <code>enable :inline_templates</code>
&#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102;, &#1077;&#1089;&#1083;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; &#1074;&#1082;&#1083;&#1102;&#1095;&#1105;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1074; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1092;&#1072;&#1081;&#1083;&#1072;&#1093;.</p>

<a name='&%231048;&%231084;&%231077;&%231085;&%231086;&%231074;&%231072;&%231085;&%231085;&%231099;&%231077;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231099;'></a>
<h3>&#1048;&#1084;&#1077;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;</h3>

<p>&#1064;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1099; &#1087;&#1088;&#1080; &#1087;&#1086;&#1084;&#1086;&#1097;&#1080; <code>template</code> &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;:</p>

<pre><code class="ruby">template :layout do
  "%html\n  =yield\n"
end

template :index do
  '%div.title Hello World!'
end

get '/' do
  haml :index
end
</code></pre>

<p>&#1045;&#1089;&#1083;&#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085; &#1089; &#1080;&#1084;&#1077;&#1085;&#1077;&#1084; "layout" &#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;, &#1090;&#1086; &#1086;&#1085; &#1073;&#1091;&#1076;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103; &#1082;&#1072;&#1078;&#1076;&#1099;&#1081;
&#1088;&#1072;&#1079; &#1087;&#1088;&#1080; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1077;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; &#1083;&#1101;&#1081;&#1072;&#1091;&#1090; &#1074; &#1082;&#1072;&#1078;&#1076;&#1086;&#1084; &#1082;&#1086;&#1085;&#1082;&#1088;&#1077;&#1090;&#1085;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1089;
&#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>:layout =&gt; false</code> &#1080;&#1083;&#1080; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1077;&#1075;&#1086; &#1076;&#1083;&#1103; &#1074;&#1089;&#1077;&#1075;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;: <code>set :haml,
:layout =&gt; false</code>:</p>

<pre><code class="ruby">get '/' do
  haml :index, :layout =&gt; !request.xhr?
end
</code></pre>

<a name='&%231055;&%231088;&%231080;&%231074;&%231103;&%231079;&%231082;&%231072;%20&%231092;&%231072;&%231081;&%231083;&%231086;&%231074;&%231099;&%231093;%20&%231088;&%231072;&%231089;&%231096;&%231080;&%231088;&%231077;&%231085;&%231080;&%231081;'></a>
<h3>&#1055;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1072; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;&#1099;&#1093; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1081;</h3>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1089;&#1074;&#1103;&#1079;&#1072;&#1090;&#1100; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1072; &#1089; &#1076;&#1074;&#1080;&#1078;&#1082;&#1086;&#1084; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077;
<code>Tilt.register</code>. &#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1077; <code>tt</code> &#1076;&#1083;&#1103;
&#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; Textile:</p>

<pre><code class="ruby">Tilt.register :tt, Tilt[:textile]
</code></pre>

<a name='&%231044;&%231086;&%231073;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20&%231089;&%231086;&%231073;&%231089;&%231090;&%231074;&%231077;&%231085;&%231085;&%231086;&%231075;&%231086;%20&%231076;&%231074;&%231080;&%231078;&%231082;&%231072;%20&%231088;&%231077;&%231085;&%231076;&%231077;&%231088;&%231080;&%231085;&%231075;&%231072;'></a>
<h3>&#1044;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1076;&#1074;&#1080;&#1078;&#1082;&#1072; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072;</h3>

<p>&#1057;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072; &#1079;&#1072;&#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1080;&#1088;&#1091;&#1081;&#1090;&#1077; &#1089;&#1074;&#1086;&#1081; &#1076;&#1074;&#1080;&#1078;&#1086;&#1082; &#1074; Tilt, &#1072; &#1079;&#1072;&#1090;&#1077;&#1084; &#1089;&#1086;&#1079;&#1076;&#1072;&#1081;&#1090;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076;, &#1086;&#1090;&#1074;&#1077;&#1095;&#1072;&#1102;&#1097;&#1080;&#1081;
&#1079;&#1072; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;:</p>

<pre><code class="ruby">Tilt.register :myat, MyAwesomeTemplateEngine

helpers do
  def myat(*args) render(:myat, *args) end
end

get '/' do
  myat :index
end
</code></pre>

<p>&#1054;&#1090;&#1086;&#1073;&#1088;&#1072;&#1079;&#1080;&#1090; <code>./views/index.myat</code>. &#1063;&#1090;&#1086;&#1073;&#1099; &#1091;&#1079;&#1085;&#1072;&#1090;&#1100; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; &#1086; Tilt, &#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077;
https://github.com/rtomayko/tilt</p>

<a name='&%231060;&%231080;&%231083;&%231100;&%231090;&%231088;&%231099;'></a>
<h2>&#1060;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099;</h2>

<p><code>before</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099; &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103; &#1087;&#1077;&#1088;&#1077;&#1076; &#1082;&#1072;&#1078;&#1076;&#1099;&#1084; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1084; &#1074; &#1090;&#1086;&#1084; &#1078;&#1077; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1080;
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;, &#1080; &#1084;&#1086;&#1075;&#1091;&#1090; &#1080;&#1079;&#1084;&#1077;&#1085;&#1103;&#1090;&#1100; &#1082;&#1072;&#1082; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;, &#1090;&#1072;&#1082; &#1080; &#1086;&#1090;&#1074;&#1077;&#1090; &#1085;&#1072; &#1085;&#1077;&#1075;&#1086;. &#1055;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;
&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;, &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1074; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1074; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;&#1093; &#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;:</p>

<pre><code class="ruby">before do
  @note = 'Hi!'
  request.path_info = '/foo/bar/baz'
end

get '/foo/*' do
  @note #=&gt; 'Hi!'
  params[:splat] #=&gt; 'bar/baz'
end
</code></pre>

<p><code>after</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099; &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103; &#1087;&#1086;&#1089;&#1083;&#1077; &#1082;&#1072;&#1078;&#1076;&#1086;&#1075;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1074; &#1090;&#1086;&#1084; &#1078;&#1077; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1077;
&#1080; &#1084;&#1086;&#1075;&#1091;&#1090; &#1080;&#1079;&#1084;&#1077;&#1085;&#1103;&#1090;&#1100; &#1082;&#1072;&#1082; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;, &#1090;&#1072;&#1082; &#1080; &#1086;&#1090;&#1074;&#1077;&#1090; &#1085;&#1072; &#1085;&#1077;&#1075;&#1086;. &#1055;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;
&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;, &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1074; <code>before</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093; &#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;&#1093;, &#1073;&#1091;&#1076;&#1091;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1074;
<code>after</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;:</p>

<pre><code class="ruby">after do
  puts response.status
end
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;: &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076; <code>body</code>, &#1072; &#1085;&#1077; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1090;&#1077; &#1089;&#1090;&#1088;&#1086;&#1082;&#1091; &#1080;&#1079;
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;, &#1090;&#1086; &#1090;&#1077;&#1083;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072; &#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1086; &#1074; <code>after</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082; &#1086;&#1085;&#1086;
&#1073;&#1091;&#1076;&#1077;&#1090; &#1089;&#1075;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1086; &#1087;&#1086;&#1079;&#1076;&#1085;&#1077;&#1077;.</p>

<p>&#1060;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099; &#1084;&#1086;&#1075;&#1091;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; URL &#1080; &#1073;&#1091;&#1076;&#1091;&#1090; &#1080;&#1085;&#1090;&#1077;&#1088;&#1087;&#1088;&#1077;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1099;, &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1077;&#1089;&#1083;&#1080;
&#1087;&#1091;&#1090;&#1100; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1077;&#1090; &#1089; &#1101;&#1090;&#1080;&#1084; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1084;:</p>

<pre><code class="ruby">before '/protected/*' do
  authenticate!
end

after '/create/:slug' do |slug|
  session[:last_slug] = slug
end
</code></pre>

<p>&#1050;&#1072;&#1082; &#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;, &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099; &#1084;&#1086;&#1075;&#1091;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;:</p>

<pre><code class="ruby">before :agent =&gt; /Songbird/ do
  # ...
end

after '/blog/*', :host_name =&gt; 'example.com' do
  # ...
end
</code></pre>

<a name='&%231052;&%231077;&%231090;&%231086;&%231076;&%231099;-&%231087;&%231086;&%231084;&%231086;&%231097;&%231085;&%231080;&%231082;&%231080;'></a>
<h2>&#1052;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080;</h2>

<p>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076; <code>helpers</code>, &#1095;&#1090;&#1086;&#1073;&#1099; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1074;
&#1076;&#1072;&#1083;&#1100;&#1085;&#1077;&#1081;&#1096;&#1077;&#1084; &#1084;&#1086;&#1078;&#1085;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1074; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072;&#1093; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1086;&#1074; &#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;:</p>

<pre><code class="ruby">helpers do
  def bar(name)
    "#{name}bar"
  end
end

get '/:name' do
  bar(params[:name])
end
</code></pre>

<p>&#1058;&#1072;&#1082;&#1078;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; &#1079;&#1072;&#1076;&#1072;&#1085;&#1099; &#1074; &#1086;&#1090;&#1076;&#1077;&#1083;&#1100;&#1085;&#1099;&#1093; &#1084;&#1086;&#1076;&#1091;&#1083;&#1103;&#1093;:</p>

<pre><code class="ruby">module FooUtils
  def foo(name) "#{name}foo" end
end

module BarUtils
  def bar(name) "#{name}bar" end
end

helpers FooUtils, BarUtils
</code></pre>

<p>&#1069;&#1092;&#1092;&#1077;&#1082;&#1090; &#1088;&#1072;&#1074;&#1085;&#1086;&#1089;&#1080;&#1083;&#1077;&#1085; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1102; &#1084;&#1086;&#1076;&#1091;&#1083;&#1077;&#1081; &#1074; &#1082;&#1083;&#1072;&#1089;&#1089; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;.</p>

<a name='&%231048;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20&%231089;&%231077;&%231089;&%231089;&%231080;&%231081;'></a>
<h3>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;</h3>

<p>&#1057;&#1077;&#1089;&#1089;&#1080;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1103;&#1090;&#1100; &#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1077; &#1084;&#1077;&#1078;&#1076;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;&#1084;&#1080;. &#1045;&#1089;&#1083;&#1080; &#1101;&#1090;&#1072; &#1086;&#1087;&#1094;&#1080;&#1103;
&#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1072;, &#1090;&#1086; &#1091; &#1074;&#1072;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; &#1086;&#1076;&#1080;&#1085; &#1093;&#1077;&#1096; &#1089;&#1077;&#1089;&#1089;&#1080;&#1080; &#1085;&#1072; &#1086;&#1076;&#1085;&#1091; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1100;&#1089;&#1082;&#1091;&#1102; &#1089;&#1077;&#1089;&#1089;&#1080;&#1102;:</p>

<pre><code class="ruby">enable :sessions

get '/' do
  "value = " &lt;&lt; session[:value].inspect
end

get '/:value' do
  session[:value] = params[:value]
end
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1087;&#1088;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080; <code>enable :sessions</code> &#1074;&#1089;&#1077; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103; &#1074;
&#1082;&#1091;&#1082;&#1072;&#1093; (cookies). &#1069;&#1090;&#1086; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1085;&#1077; &#1089;&#1086;&#1074;&#1089;&#1077;&#1084; &#1090;&#1086;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; (&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;,
&#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1077;&#1085;&#1080;&#1077; &#1073;&#1086;&#1083;&#1100;&#1096;&#1080;&#1093; &#1086;&#1073;&#1098;&#1077;&#1084;&#1086;&#1074; &#1076;&#1072;&#1085;&#1085;&#1099;&#1093; &#1091;&#1074;&#1077;&#1083;&#1080;&#1095;&#1080;&#1090; &#1074;&#1072;&#1096; &#1090;&#1088;&#1072;&#1092;&#1080;&#1082;). &#1042; &#1090;&#1072;&#1082;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1074;&#1099;
&#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1072;&#1083;&#1100;&#1090;&#1077;&#1088;&#1085;&#1072;&#1090;&#1080;&#1074;&#1085;&#1091;&#1102; Rack "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1091;" (middleware), &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1091;&#1102;&#1097;&#1091;&#1102;
&#1084;&#1077;&#1093;&#1072;&#1085;&#1080;&#1079;&#1084; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;. &#1044;&#1083;&#1103; &#1101;&#1090;&#1086;&#1075;&#1086; <em>&#1085;&#1077; &#1085;&#1072;&#1076;&#1086;</em> &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; <code>enable :sessions</code>, &#1074;&#1084;&#1077;&#1089;&#1090;&#1086; &#1101;&#1090;&#1086;&#1075;&#1086;
&#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1077;&#1077; &#1090;&#1072;&#1082; &#1078;&#1077;, &#1082;&#1072;&#1082; &#1080; &#1083;&#1102;&#1073;&#1091;&#1102; &#1076;&#1088;&#1091;&#1075;&#1091;&#1102; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1091;":</p>

<pre><code class="ruby">use Rack::Session::Pool, :expire_after =&gt; 2592000

get '/' do
  "value = " &lt;&lt; session[:value].inspect
end

get '/:value' do
  session[:value] = params[:value]
end
</code></pre>

<p>&#1044;&#1083;&#1103; &#1087;&#1086;&#1074;&#1099;&#1096;&#1077;&#1085;&#1080;&#1103; &#1073;&#1077;&#1079;&#1086;&#1087;&#1072;&#1089;&#1085;&#1086;&#1089;&#1090;&#1080; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1080; &#1074; &#1082;&#1091;&#1082;&#1072;&#1093; &#1087;&#1086;&#1076;&#1087;&#1080;&#1089;&#1099;&#1074;&#1072;&#1102;&#1090;&#1089;&#1103; &#1089;&#1077;&#1082;&#1088;&#1077;&#1090;&#1085;&#1099;&#1084;
&#1082;&#1083;&#1102;&#1095;&#1086;&#1084;. &#1057;&#1077;&#1082;&#1088;&#1077;&#1090;&#1085;&#1099;&#1081; &#1082;&#1083;&#1102;&#1095; &#1075;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1091;&#1077;&#1090;&#1089;&#1103; Sinatra. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082; &#1101;&#1090;&#1086;&#1090; &#1082;&#1083;&#1102;&#1095;
&#1073;&#1091;&#1076;&#1077;&#1090; &#1084;&#1077;&#1085;&#1103;&#1090;&#1100;&#1089;&#1103; &#1089; &#1082;&#1072;&#1078;&#1076;&#1099;&#1084; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1086;&#1084; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;, &#1074;&#1099;, &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1079;&#1072;&#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100;
&#1082;&#1083;&#1102;&#1095; &#1074;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1091; &#1074;&#1089;&#1077;&#1093; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1086;&#1074; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1073;&#1099;&#1083; &#1086;&#1076;&#1080;&#1085; &#1080; &#1090;&#1086;&#1090; &#1078;&#1077;
&#1082;&#1083;&#1102;&#1095;:</p>

<pre><code class="ruby">set :session_secret, 'super secret'
</code></pre>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1077;&#1082; &#1076;&#1083;&#1103; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;, &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1079;&#1072;&#1076;&#1072;&#1090;&#1100; &#1080;&#1093;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1074; &#1093;&#1077;&#1096;
&#1086;&#1087;&#1094;&#1080;&#1081; &#1074; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; <code>sessions</code>:</p>

<pre><code class="ruby">set :sessions, :domain =&gt; 'foo.com'
</code></pre>

<a name='&%231055;&%231088;&%231077;&%231088;&%231099;&%231074;&%231072;&%231085;&%231080;&%231077;'></a>
<h3>&#1055;&#1088;&#1077;&#1088;&#1099;&#1074;&#1072;&#1085;&#1080;&#1077;</h3>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1085;&#1077;&#1079;&#1072;&#1084;&#1077;&#1076;&#1083;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1087;&#1088;&#1077;&#1088;&#1074;&#1072;&#1090;&#1100; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072; &#1080;&#1083;&#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;,
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077;:</p>

<pre><code class="ruby">halt
</code></pre>

<p>&#1052;&#1086;&#1078;&#1085;&#1086; &#1090;&#1072;&#1082;&#1078;&#1077; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1089;&#1090;&#1072;&#1090;&#1091;&#1089; &#1087;&#1088;&#1080; &#1087;&#1088;&#1077;&#1088;&#1099;&#1074;&#1072;&#1085;&#1080;&#1080;:</p>

<pre><code class="ruby">halt 410
</code></pre>

<p>&#1058;&#1077;&#1083;&#1086;:</p>

<pre><code class="ruby">halt 'this will be the body'
</code></pre>

<p>&#1048; &#1090;&#1086;, &#1080; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077;:</p>

<pre><code class="ruby">halt 401, 'go away!'
</code></pre>

<p>&#1052;&#1086;&#1078;&#1085;&#1086; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1080;:</p>

<pre><code class="ruby">halt 402, {'Content-Type' =&gt; 'text/plain'}, 'revenge'
</code></pre>

<p>&#1048;, &#1082;&#1086;&#1085;&#1077;&#1095;&#1085;&#1086;, &#1084;&#1086;&#1078;&#1085;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1089; <code>halt</code>:</p>

<pre><code class="ruby">halt erb(:error)
</code></pre>

<a name='&%231055;&%231077;&%231088;&%231077;&%231076;&%231072;&%231095;&%231072;'></a>
<h3>&#1055;&#1077;&#1088;&#1077;&#1076;&#1072;&#1095;&#1072;</h3>

<p>&#1052;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090; &#1084;&#1086;&#1078;&#1077;&#1090; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1090;&#1100; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1084;&#1091; &#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1072;&#1102;&#1097;&#1077;&#1084;&#1091; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1091;,
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1103; <code>pass</code>:</p>

<pre><code class="ruby">get '/guess/:who' do
  pass unless params[:who] == 'Frank'
  'You got me!'
end

get '/guess/*' do
  'You missed!'
end
</code></pre>

<p>&#1041;&#1083;&#1086;&#1082; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072; &#1089;&#1088;&#1072;&#1079;&#1091; &#1078;&#1077; &#1087;&#1088;&#1077;&#1088;&#1099;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1080; &#1082;&#1086;&#1085;&#1090;&#1088;&#1086;&#1083;&#1100; &#1087;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076;&#1080;&#1090; &#1082; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1084;&#1091;
&#1089;&#1086;&#1074;&#1087;&#1072;&#1076;&#1072;&#1102;&#1097;&#1077;&#1084;&#1091; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1091;. &#1045;&#1089;&#1083;&#1080; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1080;&#1081; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090; &#1085;&#1077; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085;, &#1090;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;&#1086;&#1084; &#1085;&#1072;
&#1079;&#1072;&#1087;&#1088;&#1086;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; 404.</p>

<a name='&%231042;&%231099;&%231079;&%231086;&%231074;%20&%231076;&%231088;&%231091;&%231075;&%231086;&%231075;&%231086;%20&%231084;&%231072;&%231088;&%231096;&%231088;&%231091;&%231090;&%231072;'></a>
<h3>&#1042;&#1099;&#1079;&#1086;&#1074; &#1076;&#1088;&#1091;&#1075;&#1086;&#1075;&#1086; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;</h3>

<p>&#1048;&#1085;&#1086;&#1075;&#1076;&#1072; <code>pass</code> &#1085;&#1077; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076;&#1080;&#1090;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1088;&#1077;&#1079;&#1091;&#1083;&#1100;&#1090;&#1072;&#1090; &#1074;&#1099;&#1079;&#1086;&#1074;&#1072;
&#1076;&#1088;&#1091;&#1075;&#1086;&#1075;&#1086; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;. &#1042; &#1090;&#1072;&#1082;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; <code>call</code>:</p>

<pre><code class="ruby">get '/foo' do
  status, headers, body = call env.merge("PATH_INFO" =&gt; '/bar')
  [status, headers, body.map(&amp;:upcase)]
end

get '/bar' do
  "bar"
end
</code></pre>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074; &#1087;&#1088;&#1077;&#1076;&#1099;&#1076;&#1091;&#1097;&#1077;&#1084; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;&#1077; &#1084;&#1086;&#1078;&#1085;&#1086; &#1086;&#1073;&#1083;&#1077;&#1075;&#1095;&#1080;&#1090;&#1100; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1080; &#1087;&#1086;&#1074;&#1099;&#1089;&#1080;&#1090;&#1100;
&#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100;, &#1087;&#1077;&#1088;&#1077;&#1085;&#1077;&#1089;&#1103; <code>"bar"</code> &#1074; &#1084;&#1077;&#1090;&#1086;&#1076;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1084;&#1099;&#1081; &#1080; &#1074;
<code>/foo</code>, &#1080; &#1074; <code>/bar</code>.</p>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089; &#1073;&#1099;&#1083; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085; &#1074; &#1090;&#1086;&#1090; &#1078;&#1077; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;, &#1072; &#1085;&#1077;
&#1074; &#1077;&#1075;&#1086; &#1082;&#1086;&#1087;&#1080;&#1102;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; <code>call!</code> &#1074;&#1084;&#1077;&#1089;&#1090;&#1086; <code>call</code>.</p>

<p>&#1045;&#1089;&#1083;&#1080; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1091;&#1079;&#1085;&#1072;&#1090;&#1100; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; &#1086; <code>call</code>, &#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1089;&#1087;&#1077;&#1094;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1102; Rack.</p>

<a name='&%231047;&%231072;&%231076;&%231072;&%231085;&%231080;&%231077;%20&%231090;&%231077;&%231083;&%231072;,%20&%231082;&%231086;&%231076;&%231072;%20&%231080;%20&%231079;&%231072;&%231075;&%231086;&%231083;&%231086;&%231074;&%231082;&%231086;&%231074;%20&%231086;&%231090;&%231074;&%231077;&%231090;&%231072;'></a>
<h3>&#1047;&#1072;&#1076;&#1072;&#1085;&#1080;&#1077; &#1090;&#1077;&#1083;&#1072;, &#1082;&#1086;&#1076;&#1072; &#1080; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1086;&#1074; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;</h3>

<p>&#1061;&#1086;&#1088;&#1086;&#1096;&#1080;&#1084; &#1090;&#1086;&#1085;&#1086;&#1084; &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1082;&#1086;&#1076;&#1072; &#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1103; HTTP &#1080; &#1090;&#1077;&#1083;&#1072; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072; &#1074;
&#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1086;&#1084; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1080; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1074; &#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1093;
&#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1103;&#1093; &#1074;&#1072;&#1084;, &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1087;&#1086;&#1085;&#1072;&#1076;&#1086;&#1073;&#1080;&#1090;&#1089;&#1103; &#1079;&#1072;&#1076;&#1072;&#1090;&#1100; &#1090;&#1077;&#1083;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072; &#1074; &#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1083;&#1100;&#1085;&#1086;&#1081; &#1090;&#1086;&#1095;&#1082;&#1077;
&#1087;&#1086;&#1090;&#1086;&#1082;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1103;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1089;&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1072; <code>body</code>.
&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1079;&#1072;&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076; <code>body</code>, &#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1077;&#1075;&#1086; &#1080; &#1074;
&#1076;&#1072;&#1083;&#1100;&#1085;&#1077;&#1081;&#1096;&#1077;&#1084;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1090;&#1077;&#1083;&#1091; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;.</p>

<pre><code class="ruby">get '/foo' do
  body "bar"
end

after do
  puts body
end
</code></pre>

<p>&#1058;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1085;&#1086; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1090;&#1100; &#1073;&#1083;&#1086;&#1082; &#1074; &#1084;&#1077;&#1090;&#1086;&#1076; <code>body</code>, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1079;&#1072;&#1090;&#1077;&#1084; &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1079;&#1074;&#1072;&#1085;
&#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1086;&#1084; Rack (&#1090;&#1072;&#1082;&#1086;&#1081; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085; &#1076;&#1083;&#1103; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080;
&#1087;&#1086;&#1090;&#1086;&#1095;&#1085;&#1086;&#1075;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;, &#1089;&#1084;. "&#1042;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1077;&#1084;&#1099;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;").</p>

<p>&#1040;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; &#1082;&#1086;&#1076; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072; &#1080; &#1077;&#1075;&#1086; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1080;:</p>

<pre><code class="ruby">get '/foo' do
  status 418
  headers \
    "Allow"   =&gt; "BREW, POST, GET, PROPFIND, WHEN",
    "Refresh" =&gt; "Refresh: 20; http://www.ietf.org/rfc/rfc2324.txt"
  body "I'm a tea pot!"
end
</code></pre>

<p>&#1050;&#1072;&#1082; &#1080; <code>body</code>, &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; <code>headers</code> &#1080; <code>status</code>, &#1074;&#1099;&#1079;&#1074;&#1072;&#1085;&#1085;&#1099;&#1077; &#1073;&#1077;&#1079; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;&#1086;&#1074;,
&#1074;&#1086;&#1079;&#1074;&#1088;&#1072;&#1097;&#1072;&#1102;&#1090; &#1089;&#1074;&#1086;&#1080; &#1090;&#1077;&#1082;&#1091;&#1097;&#1080;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;.</p>

<a name='&%231057;&%231090;&%231088;&%231080;&%231084;&%231080;&%231085;&%231075;%20&%231086;&%231090;&%231074;&%231077;&%231090;&%231086;&%231074;'></a>
<h3>&#1057;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075; &#1086;&#1090;&#1074;&#1077;&#1090;&#1086;&#1074;</h3>

<p>&#1048;&#1085;&#1086;&#1075;&#1076;&#1072; &#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;&#1089;&#1103; &#1085;&#1072;&#1095;&#1072;&#1090;&#1100; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1083;&#1103;&#1090;&#1100; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1091; &#1087;&#1088;&#1103;&#1084;&#1086; &#1074; &#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1077;
&#1075;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1095;&#1072;&#1089;&#1090;&#1077;&#1081; &#1101;&#1090;&#1080;&#1093; &#1076;&#1072;&#1085;&#1085;&#1099;&#1093;. &#1042; &#1086;&#1089;&#1086;&#1073;&#1099;&#1093; &#1089;&#1083;&#1091;&#1095;&#1072;&#1103;&#1093; &#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;&#1089;&#1103; &#1087;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1085;&#1086;
&#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1083;&#1103;&#1090;&#1100; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1076;&#1086; &#1090;&#1077;&#1093; &#1087;&#1086;&#1088;, &#1087;&#1086;&#1082;&#1072; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090; &#1085;&#1077; &#1079;&#1072;&#1082;&#1088;&#1086;&#1077;&#1090; &#1089;&#1086;&#1077;&#1076;&#1080;&#1085;&#1077;&#1085;&#1080;&#1077;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>stream</code> &#1074;&#1084;&#1077;&#1089;&#1090;&#1086; &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1085;&#1080;&#1103; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1093; "&#1086;&#1073;&#1077;&#1088;&#1090;&#1086;&#1082;".</p>

<pre><code class="ruby">get '/' do
  stream do |out|
    out &lt;&lt; "It's gonna be legen -\n"
    sleep 0.5
    out &lt;&lt; " (wait for it) \n"
    sleep 1
    out &lt;&lt; "- dary!\n"
  end
end
</code></pre>

<p>&#1063;&#1090;&#1086; &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090; &#1074;&#1072;&#1084; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1089;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;&#1086;&#1074;&#1099;&#1077; API,
<a href="http://dev.w3.org/html5/eventsource/">Server Sent Events</a>,
&#1080; &#1084;&#1086;&#1078;&#1077;&#1090; &#1089;&#1083;&#1091;&#1078;&#1080;&#1090;&#1100; &#1086;&#1089;&#1085;&#1086;&#1074;&#1086;&#1081; &#1076;&#1083;&#1103; <a href="http://en.wikipedia.org/wiki/WebSocket">WebSockets</a>.
&#1058;&#1072;&#1082;&#1078;&#1077; &#1090;&#1072;&#1082;&#1086;&#1081; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076; &#1084;&#1086;&#1078;&#1085;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1076;&#1083;&#1103; &#1091;&#1074;&#1077;&#1083;&#1080;&#1095;&#1077;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1080; &#1074; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077;,
&#1082;&#1086;&#1075;&#1076;&#1072; &#1082;&#1072;&#1082;&#1072;&#1103;-&#1090;&#1086; &#1095;&#1072;&#1089;&#1090;&#1100; &#1082;&#1086;&#1085;&#1090;&#1077;&#1085;&#1090;&#1072; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1090; &#1086;&#1090; &#1084;&#1077;&#1076;&#1083;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1088;&#1077;&#1089;&#1091;&#1088;&#1089;&#1072;.</p>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1080; &#1089;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;&#1072;, &#1086;&#1089;&#1086;&#1073;&#1077;&#1085;&#1085;&#1086; &#1082;&#1086;&#1083;&#1080;&#1095;&#1077;&#1089;&#1090;&#1074;&#1086; &#1086;&#1076;&#1085;&#1086;&#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1086;
&#1086;&#1073;&#1089;&#1083;&#1091;&#1078;&#1080;&#1074;&#1072;&#1077;&#1084;&#1099;&#1093; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1074;, &#1086;&#1095;&#1077;&#1085;&#1100; &#1089;&#1080;&#1083;&#1100;&#1085;&#1086; &#1079;&#1072;&#1074;&#1080;&#1089;&#1103;&#1090; &#1086;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1084;&#1086;&#1075;&#1086; &#1074;&#1077;&#1073;-&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072;.
&#1053;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1099;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, WEBRick, &#1084;&#1086;&#1075;&#1091;&#1090; &#1080; &#1074;&#1086;&#1074;&#1089;&#1077; &#1085;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1090;&#1100; &#1089;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;.
&#1045;&#1089;&#1083;&#1080; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1085;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090; &#1089;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;, &#1090;&#1086; &#1074;&#1089;&#1077; &#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1073;&#1091;&#1076;&#1091;&#1090; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1099; &#1079;&#1072; &#1086;&#1076;&#1080;&#1085;
&#1088;&#1072;&#1079; &#1089;&#1088;&#1072;&#1079;&#1091; &#1087;&#1086;&#1089;&#1083;&#1077; &#1090;&#1086;&#1075;&#1086;, &#1082;&#1072;&#1082; &#1073;&#1083;&#1086;&#1082;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1074; <code>stream</code>, &#1079;&#1072;&#1074;&#1077;&#1088;&#1096;&#1080;&#1090;&#1089;&#1103;. &#1057;&#1090;&#1088;&#1080;&#1084;&#1080;&#1085;&#1075;
&#1074;&#1086;&#1086;&#1073;&#1097;&#1077; &#1085;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1087;&#1088;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080; Shotgun.</p>

<p>&#1045;&#1089;&#1083;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1089; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1086;&#1084; <code>keep_open</code>, &#1090;&#1086; &#1086;&#1085; &#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100;
<code>close</code> &#1091; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1072; &#1087;&#1086;&#1090;&#1086;&#1082;&#1072;, &#1095;&#1090;&#1086; &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1080;&#1090; &#1074;&#1072;&#1084; &#1079;&#1072;&#1082;&#1088;&#1099;&#1090;&#1100; &#1077;&#1075;&#1086; &#1087;&#1086;&#1079;&#1078;&#1077; &#1074; &#1083;&#1102;&#1073;&#1086;&#1084; &#1076;&#1088;&#1091;&#1075;&#1086;&#1084;
&#1084;&#1077;&#1089;&#1090;&#1077;. &#1069;&#1090;&#1086; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1089; &#1089;&#1086;&#1073;&#1099;&#1090;&#1080;&#1081;&#1085;&#1099;&#1084;&#1080; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072;&#1084;&#1080;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1089; Thin &#1080;
Rainbows. &#1044;&#1088;&#1091;&#1075;&#1080;&#1077; &#1078;&#1077; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1099; &#1074;&#1089;&#1077; &#1088;&#1072;&#1074;&#1085;&#1086; &#1073;&#1091;&#1076;&#1091;&#1090; &#1079;&#1072;&#1082;&#1088;&#1099;&#1074;&#1072;&#1090;&#1100; &#1087;&#1086;&#1090;&#1086;&#1082;:</p>

<pre><code class="ruby"># long polling

set :server, :thin
connections = []

get '/subscribe' do
  # &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1103; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;
  stream(:keep_open) { |out| connections &lt;&lt; out }

  # &#1091;&#1076;&#1072;&#1083;&#1077;&#1085;&#1080;&#1077; "&#1084;&#1077;&#1088;&#1090;&#1074;&#1099;&#1093; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1086;&#1074;"
  connections.reject!(&amp;:closed?)

  # &#1076;&#1086;&#1087;&#1091;&#1089;&#1082;
  "subscribed"
end

post '/message' do
  connections.each do |out|
    # &#1091;&#1074;&#1077;&#1076;&#1086;&#1084;&#1080;&#1090;&#1100; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; &#1086; &#1085;&#1086;&#1074;&#1086;&#1084; &#1089;&#1086;&#1086;&#1073;&#1097;&#1077;&#1085;&#1080;&#1080;
    out &lt;&lt; params[:message] &lt;&lt; "\n"

    #&nbsp;&#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1091; &#1085;&#1072; &#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1100; &#1089;&#1085;&#1086;&#1074;&#1072; &#1089;&#1086;&#1077;&#1076;&#1080;&#1085;&#1080;&#1090;&#1100;&#1089;&#1103;
    out.close
  end

  # &#1076;&#1086;&#1087;&#1091;&#1089;&#1082;
  "message received"
end
</code></pre>

<a name='&%231051;&%231086;&%231075;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;'></a>
<h3>&#1051;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;</h3>

<p>&#1042; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1084;&#1077;&#1090;&#1086;&#1076; <code>logger</code> &#1087;&#1088;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1077;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1091;
<code>Logger</code>:</p>

<pre><code class="ruby">get '/' do
  logger.info "loading data"
  # ...
end
</code></pre>

<p>&#1069;&#1090;&#1086;&#1090; &#1083;&#1086;&#1075;&#1077;&#1088; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080; &#1091;&#1095;&#1080;&#1090;&#1099;&#1074;&#1072;&#1077;&#1090; &#1074;&#1072;&#1096;&#1080; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080; &#1083;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1074; Rack. &#1045;&#1089;&#1083;&#1080;
&#1083;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1074;&#1099;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086;, &#1090;&#1086; &#1101;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1074;&#1077;&#1088;&#1085;&#1077;&#1090; &#1087;&#1091;&#1089;&#1090;&#1086;&#1081; (dummy) &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;, &#1087;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &#1074;&#1099;
&#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1089;&#1084;&#1077;&#1083;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1077;&#1075;&#1086; &#1074; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;&#1093; &#1080; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;.</p>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1083;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1076;&#1083;&#1103;
<code>Sinatra::Application</code>, &#1072; &#1077;&#1089;&#1083;&#1080; &#1074;&#1072;&#1096;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &mdash; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089; <code>Sinatra::Base</code>, &#1090;&#1086;
&#1074;&#1099;, &#1085;&#1072;&#1074;&#1077;&#1088;&#1085;&#1086;&#1077;, &#1079;&#1072;&#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1077;&#1075;&#1086; &#1074;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;:</p>

<pre><code class="ruby">class MyApp &lt; Sinatra::Base
  configure :production, :development do
    enable :logging
  end
end
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1080;&#1079;&#1073;&#1077;&#1078;&#1072;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1083;&#1102;&#1073;&#1086;&#1081; &#1083;&#1086;&#1075;&#1080;&#1088;&#1091;&#1102;&#1097;&#1077;&#1081; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;", &#1079;&#1072;&#1076;&#1072;&#1081;&#1090;&#1077; &#1086;&#1087;&#1094;&#1080;&#1080;
<code>logging</code> &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; <code>nil</code>. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1085;&#1077; &#1079;&#1072;&#1073;&#1099;&#1074;&#1072;&#1081;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1074; &#1090;&#1072;&#1082;&#1086;&#1081; &#1089;&#1080;&#1090;&#1091;&#1072;&#1094;&#1080;&#1080;
<code>logger</code> &#1074;&#1077;&#1088;&#1085;&#1077;&#1090; <code>nil</code>. &#1063;&#1072;&#1097;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086; &#1090;&#1072;&#1082; &#1076;&#1077;&#1083;&#1072;&#1102;&#1090;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1079;&#1072;&#1076;&#1072;&#1102;&#1090; &#1089;&#1074;&#1086;&#1081; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1081;
&#1083;&#1086;&#1075;&#1077;&#1088;. Sinatra &#1073;&#1091;&#1076;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1090;&#1086;, &#1095;&#1090;&#1086; &#1085;&#1072;&#1093;&#1086;&#1076;&#1080;&#1090;&#1089;&#1103; &#1074; <code>env['rack.logger']</code>.</p>

<a name='Mime-&%231090;&%231080;&%231087;&%231099;'></a>
<h3>Mime-&#1090;&#1080;&#1087;&#1099;</h3>

<p>&#1050;&#1086;&#1075;&#1076;&#1072; &#1074;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; <code>send_file</code> &#1080;&#1083;&#1080; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099;, &#1091; &#1074;&#1072;&#1089; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100;
mime-&#1090;&#1080;&#1087;&#1099;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; Sinatra &#1085;&#1077; &#1087;&#1086;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;. &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; <code>mime_type</code>
&#1076;&#1083;&#1103; &#1080;&#1093; &#1088;&#1077;&#1075;&#1080;&#1089;&#1090;&#1088;&#1072;&#1094;&#1080;&#1080; &#1087;&#1086; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1102; &#1092;&#1072;&#1081;&#1083;&#1072;:</p>

<pre><code class="ruby">configure do
  mime_type :foo, 'text/foo'
end
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1086; &#1074; <code>content_type</code> &#1084;&#1077;&#1090;&#1086;&#1076;&#1077;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1077;:</p>

<pre><code class="ruby">get '/' do
  content_type :foo
  "foo foo foo"
end
</code></pre>

<a name='&%231043;&%231077;&%231085;&%231077;&%231088;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20URL'></a>
<h3>&#1043;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; URL</h3>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1089;&#1092;&#1086;&#1088;&#1084;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; URL, &#1074;&#1072;&#1084; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>url</code>, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074; Haml:</p>

<pre><code class="ruby">%a{:href =&gt; url('/foo')} foo
</code></pre>

<p>&#1069;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1091;&#1095;&#1080;&#1090;&#1099;&#1074;&#1072;&#1077;&#1090; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1099;&#1077; &#1087;&#1088;&#1086;&#1082;&#1089;&#1080; &#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1080;&#1079;&#1072;&#1090;&#1086;&#1088;&#1099; Rack, &#1077;&#1089;&#1083;&#1080; &#1086;&#1085;&#1080;
&#1087;&#1088;&#1080;&#1089;&#1091;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1090;.</p>

<p>&#1053;&#1072;&#1088;&#1103;&#1076;&#1091; &#1089; <code>url</code> &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; <code>to</code> (&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088; &#1085;&#1080;&#1078;&#1077;).</p>

<a name='&%231055;&%231077;&%231088;&%231077;&%231085;&%231072;&%231087;&%231088;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20(&%231088;&%231077;&%231076;&%231080;&%231088;&%231077;&%231082;&%231090;)'></a>
<h3>&#1055;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; (&#1088;&#1077;&#1076;&#1080;&#1088;&#1077;&#1082;&#1090;)</h3>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1080;&#1090;&#1100; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072; <code>redirect</code>:</p>

<pre><code class="ruby">get '/foo' do
  redirect to('/bar')
end
</code></pre>

<p>&#1051;&#1102;&#1073;&#1099;&#1077; &#1076;&#1086;&#1087;&#1086;&#1083;&#1085;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1102;&#1090;&#1089;&#1103; &#1087;&#1086; &#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1080; &#1089; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1084;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;
<code>halt</code>:</p>

<pre><code class="ruby">redirect to('/bar'), 303
redirect 'http://google.com', 'wrong place, buddy'
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1080;&#1090;&#1100; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1086;, &#1085;&#1072; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1091;, &#1089; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1081; &#1086;&#1085;
&#1087;&#1088;&#1080;&#1096;&#1077;&#1083;, &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>redirect back</code>:</p>

<pre><code class="ruby">get '/foo' do
  "&lt;a href='/bar'&gt;do something&lt;/a&gt;"
end

get '/bar' do
  do_something
  redirect back
end
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1090;&#1100; &#1082;&#1072;&#1082;&#1080;&#1077;-&#1083;&#1080;&#1073;&#1086; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1099; &#1074;&#1084;&#1077;&#1089;&#1090;&#1077; &#1089; &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077;&#1084;, &#1083;&#1080;&#1073;&#1086; &#1076;&#1086;&#1073;&#1072;&#1074;&#1100;&#1090;&#1077;
&#1080;&#1093; &#1074; &#1089;&#1090;&#1088;&#1086;&#1082;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;:</p>

<pre><code class="ruby">redirect to('/bar?sum=42')
</code></pre>

<p>&#1083;&#1080;&#1073;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1102;:</p>

<pre><code class="ruby">enable :sessions

get '/foo' do
  session[:secret] = 'foo'
  redirect to('/bar')
end

get '/bar' do
  session[:secret]
end
</code></pre>

<a name='&%231059;&%231087;&%231088;&%231072;&%231074;&%231083;&%231077;&%231085;&%231080;&%231077;%20&%231082;&%231101;&%231096;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;&%231084;'></a>
<h3>&#1059;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1077; &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084;</h3>

<p>&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1082;&#1086;&#1088;&#1088;&#1077;&#1082;&#1090;&#1085;&#1099;&#1093; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1086;&#1074; &mdash; &#1086;&#1089;&#1085;&#1086;&#1074;&#1072; &#1087;&#1088;&#1072;&#1074;&#1080;&#1083;&#1100;&#1085;&#1086;&#1075;&#1086; HTTP &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;.</p>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1083;&#1077;&#1075;&#1082;&#1086; &#1074;&#1099;&#1089;&#1090;&#1072;&#1074;&#1080;&#1090;&#1100; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1086;&#1082; Cache-Control &#1090;&#1072;&#1082;&#1080;&#1084; &#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;:</p>

<pre><code class="ruby">get '/' do
  cache_control :public
  "cache it!"
end
</code></pre>

<p>&#1057;&#1086;&#1074;&#1077;&#1090;: &#1079;&#1072;&#1076;&#1072;&#1074;&#1072;&#1081;&#1090;&#1077; &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1074; <code>before</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1077;:</p>

<pre><code class="ruby">before do
  cache_control :public, :must_revalidate, :max_age =&gt; 60
end
</code></pre>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076; <code>expires</code> &#1076;&#1083;&#1103; &#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1103; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1077;&#1075;&#1086; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1072;, &#1090;&#1086;
<code>Cache-Control</code> &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;:</p>

<pre><code class="ruby">before do
  expires 500, :public, :must_revalidate
end
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1082;&#1072;&#1082; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;, &#1074;&#1072;&#1084; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1087;&#1086;&#1076;&#1091;&#1084;&#1072;&#1090;&#1100; &#1086;&#1073;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080; <code>etag</code> &#1080;&#1083;&#1080; <code>last_modified</code>. &#1056;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1091;&#1077;&#1090;&#1089;&#1103; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1101;&#1090;&#1080;
&#1084;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080; <em>&#1076;&#1086;</em> &#1074;&#1099;&#1087;&#1086;&#1083;&#1085;&#1077;&#1085;&#1080;&#1103; &#1088;&#1077;&#1089;&#1091;&#1088;&#1089;&#1086;&#1077;&#1084;&#1082;&#1080;&#1093; &#1074;&#1099;&#1095;&#1080;&#1089;&#1083;&#1077;&#1085;&#1080;&#1081;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082; &#1086;&#1085;&#1080;
&#1085;&#1077;&#1084;&#1077;&#1076;&#1083;&#1077;&#1085;&#1085;&#1086; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1103;&#1090; &#1086;&#1090;&#1074;&#1077;&#1090; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1091;, &#1077;&#1089;&#1083;&#1080; &#1090;&#1077;&#1082;&#1091;&#1097;&#1072;&#1103; &#1074;&#1077;&#1088;&#1089;&#1080;&#1103; &#1091;&#1078;&#1077; &#1077;&#1089;&#1090;&#1100; &#1074; &#1080;&#1093; &#1082;&#1101;&#1096;&#1077;:</p>

<pre><code class="ruby">get '/article/:id' do
  @article = Article.find params[:id]
  last_modified @article.updated_at
  etag @article.sha1
  erb :article
end
</code></pre>

<p>&#1058;&#1072;&#1082;&#1078;&#1077; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
<a href="http://en.wikipedia.org/wiki/HTTP_ETag#Strong_and_weak_validation">weak ETag</a>:</p>

<pre><code class="ruby">etag @article.sha1, :weak
</code></pre>

<p>&#1069;&#1090;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1080; &#1085;&#1077; &#1089;&#1090;&#1072;&#1085;&#1091;&#1090; &#1085;&#1080;&#1095;&#1077;&#1075;&#1086; &#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; &#1076;&#1083;&#1103; &#1074;&#1072;&#1089;, &#1085;&#1086; &#1086;&#1085;&#1080; &#1076;&#1072;&#1076;&#1091;&#1090;
&#1085;&#1077;&#1086;&#1073;&#1093;&#1086;&#1076;&#1080;&#1084;&#1091;&#1102; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1102; &#1076;&#1083;&#1103; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1082;&#1101;&#1096;&#1072;. &#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1080;&#1097;&#1077;&#1090;&#1077; &#1083;&#1077;&#1075;&#1082;&#1086;&#1077; &#1088;&#1077;&#1096;&#1077;&#1085;&#1080;&#1077; &#1076;&#1083;&#1103;
&#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;, &#1087;&#1086;&#1087;&#1088;&#1086;&#1073;&#1091;&#1081;&#1090;&#1077; <a href="https://github.com/rtomayko/rack-cache">rack-cache</a>:</p>

<pre><code class="ruby">require 'rack/cache'
require 'sinatra'

use Rack::Cache

get '/' do
  cache_control :public, :max_age =&gt; 36000
  sleep 5
  "hello"
end
</code></pre>

<p>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1086;&#1087;&#1094;&#1080;&#1102; <code>:static_cache_control</code> (&#1089;&#1084;. &#1085;&#1080;&#1078;&#1077;), &#1095;&#1090;&#1086;&#1073;&#1099; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1086;&#1082;
<code>Cache-Control</code> &#1082; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1084; &#1092;&#1072;&#1081;&#1083;&#1072;&#1084;.</p>

<p>&#1042; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1080;&#1080; &#1089; RFC 2616 &#1074;&#1072;&#1096;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1076;&#1086;&#1083;&#1078;&#1085;&#1086; &#1074;&#1077;&#1089;&#1090;&#1080; &#1089;&#1077;&#1073;&#1103; &#1087;&#1086;-&#1088;&#1072;&#1079;&#1085;&#1086;&#1084;&#1091;, &#1082;&#1086;&#1075;&#1076;&#1072;
&#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1080; If-Match &#1080;&#1083;&#1080; If-None-Match &#1080;&#1084;&#1077;&#1102;&#1090; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; <code>*</code>, &#1074; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1086;&#1090;
&#1090;&#1086;&#1075;&#1086;, &#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; &#1080;&#1083;&#1080; &#1085;&#1077;&#1090; &#1079;&#1072;&#1087;&#1088;&#1072;&#1096;&#1080;&#1074;&#1072;&#1077;&#1084;&#1099;&#1081; &#1088;&#1077;&#1089;&#1091;&#1088;&#1089;. Sinatra &#1087;&#1088;&#1077;&#1076;&#1087;&#1086;&#1083;&#1072;&#1075;&#1072;&#1077;&#1090;, &#1095;&#1090;&#1086;
&#1088;&#1077;&#1089;&#1091;&#1088;&#1089;&#1099;, &#1082; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1086;&#1073;&#1088;&#1072;&#1097;&#1072;&#1102;&#1090;&#1089;&#1103; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1073;&#1077;&#1079;&#1086;&#1087;&#1072;&#1089;&#1085;&#1099;&#1093; (GET) &#1080; &#1080;&#1076;&#1077;&#1084;&#1087;&#1086;&#1090;&#1077;&#1085;&#1090;&#1085;&#1099;&#1093; (PUT)
&#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;, &#1091;&#1078;&#1077; &#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1102;&#1090;, &#1072; &#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1088;&#1077;&#1089;&#1091;&#1088;&#1089;&#1099; (&#1082; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1086;&#1073;&#1088;&#1072;&#1097;&#1072;&#1102;&#1090;&#1089;&#1103;, &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;,
&#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; POST) &#1089;&#1095;&#1080;&#1090;&#1072;&#1077;&#1090; &#1085;&#1086;&#1074;&#1099;&#1084;&#1080;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1079;&#1084;&#1077;&#1085;&#1080;&#1090;&#1100; &#1076;&#1072;&#1085;&#1085;&#1086;&#1077; &#1087;&#1086;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
&#1086;&#1087;&#1094;&#1080;&#1080; <code>:new_resource</code>:</p>

<pre><code class="ruby">get '/create' do
  etag '', :new_resource =&gt; true
  Article.create
  erb :new_article
end
</code></pre>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; weak ETag, &#1079;&#1072;&#1076;&#1072;&#1081;&#1090;&#1077; &#1086;&#1087;&#1094;&#1080;&#1102; <code>:kind</code>:</p>

<pre><code class="ruby">etag '', :new_resource =&gt; true, :kind =&gt; :weak
</code></pre>

<a name='&%231054;&%231090;&%231087;&%231088;&%231072;&%231074;&%231082;&%231072;%20&%231092;&%231072;&%231081;&%231083;&%231086;&%231074;'></a>
<h3>&#1054;&#1090;&#1087;&#1088;&#1072;&#1074;&#1082;&#1072; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;</h3>

<p>&#1044;&#1083;&#1103; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1082;&#1080; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1102; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>send_file</code>:</p>

<pre><code class="ruby">get '/' do
  send_file 'foo.png'
end
</code></pre>

<p>&#1069;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1080;&#1084;&#1077;&#1077;&#1090; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1087;&#1094;&#1080;&#1081;:</p>

<pre><code class="ruby">send_file 'foo.png', :type =&gt; :jpg
</code></pre>

<p>&#1042;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1099;&#1077; &#1086;&#1087;&#1094;&#1080;&#1080;:</p>

<dl>
<dt>filename</dt>
  <dd>&#1080;&#1084;&#1103; &#1092;&#1072;&#1081;&#1083;&#1072;, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1088;&#1077;&#1072;&#1083;&#1100;&#1085;&#1086;&#1077; &#1080;&#1084;&#1103; &#1092;&#1072;&#1081;&#1083;&#1072;.</dd>

  <dt>last_modified</dt>
  <dd>&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1076;&#1083;&#1103; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1072; Last-Modified, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: mtime (&#1074;&#1088;&#1077;&#1084;&#1103;
      &#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1103;) &#1092;&#1072;&#1081;&#1083;&#1072;.</dd>

  <dt>type</dt>
  <dd>&#1090;&#1080;&#1087; &#1092;&#1072;&#1081;&#1083;&#1072;, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1087;&#1086; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1102; &#1092;&#1072;&#1081;&#1083;&#1072;.</dd>

  <dt>disposition</dt>
  <dd>&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1076;&#1083;&#1103; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1072; Content-Disposition, &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1099;&#1077; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;: <tt>nil</tt>
      (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;), <tt>:attachment</tt> &#1080; <tt>:inline</tt>.</dd>

  <dt>length</dt>
  <dd>&#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1076;&#1083;&#1103; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1082;&#1072; Content-Length, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: &#1088;&#1072;&#1079;&#1084;&#1077;&#1088; &#1092;&#1072;&#1081;&#1083;&#1072;.</dd>

  <dt>status</dt>
  <dd>&#1050;&#1086;&#1076; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072;. &#1055;&#1086;&#1083;&#1077;&#1079;&#1085;&#1086;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1086;&#1090;&#1076;&#1072;&#1077;&#1090;&#1089;&#1103; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081; &#1092;&#1072;&#1081;&#1083; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; &#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1099; &#1089;
      &#1089;&#1086;&#1086;&#1073;&#1097;&#1077;&#1085;&#1080;&#1077;&#1084; &#1086;&#1073; &#1086;&#1096;&#1080;&#1073;&#1082;&#1077;.</dd>
</dl>
<p>&#1069;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1073;&#1091;&#1076;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1080; Rack &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072; &#1076;&#1083;&#1103; &#1086;&#1090;&#1087;&#1088;&#1072;&#1074;&#1082;&#1080; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;,
&#1077;&#1089;&#1083;&#1080; &#1086;&#1085;&#1080; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;, &#1074; &#1087;&#1088;&#1086;&#1090;&#1080;&#1074;&#1085;&#1086;&#1084; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102; &#1086;&#1090;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; &#1092;&#1072;&#1081;&#1083; &#1080;&#1079; Ruby
&#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1072;. &#1052;&#1077;&#1090;&#1086;&#1076; <code>send_file</code> &#1090;&#1072;&#1082;&#1078;&#1077; &#1086;&#1073;&#1077;&#1089;&#1087;&#1077;&#1095;&#1080;&#1074;&#1072;&#1077;&#1090; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1091;&#1102; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1091;
&#1095;&#1072;&#1089;&#1090;&#1080;&#1095;&#1085;&#1099;&#1093; (range) &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1074; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; Sinatra.</p>

<a name='&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;%20&%231082;%20&%231086;&%231073;&%231098;&%231077;&%231082;&%231090;&%231091;%20&%231079;&%231072;&%231087;&%231088;&%231086;&%231089;&%231072;'></a>
<h3>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;</h3>

<p>&#1054;&#1073;&#1098;&#1077;&#1082;&#1090; &#1074;&#1093;&#1086;&#1076;&#1103;&#1097;&#1077;&#1075;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1077;&#1085; &#1085;&#1072; &#1091;&#1088;&#1086;&#1074;&#1085;&#1077; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; (&#1074; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;,
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;&#1093;, &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072;&#1093; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082;) &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>request</code> &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;:</p>

<pre><code class="ruby"># &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1086; &#1085;&#1072; http://example.com/example
get '/foo' do
  t = %w[text/css text/html application/javascript]
  request.accept              # ['text/html', '*/*']
  request.accept? 'text/xml'  # true
  request.preferred_type(t)   # 'text/html'
  request.body                # &#1090;&#1077;&#1083;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;, &#1087;&#1086;&#1089;&#1083;&#1072;&#1085;&#1085;&#1086;&#1077; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1086;&#1084; (&#1089;&#1084;. &#1085;&#1080;&#1078;&#1077;)
  request.scheme              # "http"
  request.script_name         # "/example"
  request.path_info           # "/foo"
  request.port                # 80
  request.request_method      # "GET"
  request.query_string        # ""
  request.content_length      # &#1076;&#1083;&#1080;&#1085;&#1072; &#1090;&#1077;&#1083;&#1072; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;
  request.media_type          # &#1084;&#1077;&#1076;&#1080;&#1072;&#1090;&#1080;&#1087; &#1090;&#1077;&#1083;&#1072; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;
  request.host                # "example.com"
  request.get?                # true (&#1077;&#1089;&#1090;&#1100; &#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080; &#1076;&#1083;&#1103; &#1076;&#1088;&#1091;&#1075;&#1080;&#1093; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074; HTTP)
  request.form_data?          # false
  request["some_param"]       # &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;&#1072; some_param. &#1064;&#1086;&#1088;&#1090;&#1082;&#1072;&#1090; &#1076;&#1083;&#1103; &#1093;&#1077;&#1096;&#1072; params
  request.referrer            # &#1080;&#1089;&#1090;&#1086;&#1095;&#1085;&#1080;&#1082; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072; &#1083;&#1080;&#1073;&#1086; '/'
  request.user_agent          # user agent (&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1076;&#1083;&#1103; :agent &#1091;&#1089;&#1083;&#1086;&#1074;&#1080;&#1103;)
  request.cookies             # &#1093;&#1077;&#1096;, &#1089;&#1086;&#1076;&#1077;&#1088;&#1078;&#1072;&#1097;&#1080;&#1081; cookies &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1072;
  request.xhr?                # &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1083;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089; ajax &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1084;?
  request.url                 # "http://example.com/example/foo"
  request.path                # "/example/foo"
  request.ip                  # IP-&#1072;&#1076;&#1088;&#1077;&#1089; &#1082;&#1083;&#1080;&#1077;&#1085;&#1090;&#1072;
  request.secure?             # false (true, &#1077;&#1089;&#1083;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089; &#1089;&#1076;&#1077;&#1083;&#1072;&#1085; &#1095;&#1077;&#1088;&#1077;&#1079; SSL)
  request.forwarded?          # true (&#1077;&#1089;&#1083;&#1080; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1079;&#1072; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1099;&#1084; &#1087;&#1088;&#1086;&#1082;&#1089;&#1080;)
  request.env                 # "&#1089;&#1099;&#1088;&#1086;&#1081;" env &#1093;&#1077;&#1096;, &#1087;&#1086;&#1083;&#1091;&#1095;&#1077;&#1085;&#1085;&#1099;&#1081; Rack
end
</code></pre>

<p>&#1053;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1086;&#1087;&#1094;&#1080;&#1080;, &#1090;&#1072;&#1082;&#1080;&#1077; &#1082;&#1072;&#1082; <code>script_name</code> &#1080;&#1083;&#1080; <code>path_info</code>, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1076;&#1083;&#1103;
&#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1103;:</p>

<pre><code class="ruby">before { request.path_info = "/" }

get "/" do
  "all requests end up here"
end
</code></pre>

<p><code>request.body</code> &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; IO &#1080;&#1083;&#1080; StringIO &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1086;&#1084;:</p>

<pre><code class="ruby">post "/api" do
  request.body.rewind  # &#1074; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1082;&#1090;&#1086;-&#1090;&#1086; &#1091;&#1078;&#1077; &#1087;&#1088;&#1086;&#1095;&#1080;&#1090;&#1072;&#1083; &#1090;&#1077;&#1083;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;
  data = JSON.parse request.body.read
  "Hello #{data['name']}!"
end
</code></pre>

<a name='&%231042;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;'></a>
<h3>&#1042;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;</h3>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076; <code>attachment</code>, &#1095;&#1090;&#1086;&#1073;&#1099; &#1089;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1091;, &#1095;&#1090;&#1086; &#1086;&#1090;&#1074;&#1077;&#1090;
&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072; &#1076;&#1086;&#1083;&#1078;&#1077;&#1085; &#1073;&#1099;&#1090;&#1100; &#1089;&#1086;&#1093;&#1088;&#1072;&#1085;&#1077;&#1085; &#1085;&#1072; &#1076;&#1080;&#1089;&#1082;, &#1072; &#1085;&#1077; &#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;:</p>

<pre><code class="ruby">get '/' do
  attachment
  "store it!"
end
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1091;&#1082;&#1072;&#1079;&#1072;&#1090;&#1100; &#1080;&#1084;&#1103; &#1092;&#1072;&#1081;&#1083;&#1072;:</p>

<pre><code class="ruby">get '/' do
  attachment "info.txt"
  "store it!"
end
</code></pre>

<a name='&%231056;&%231072;&%231073;&%231086;&%231090;&%231072;%20&%231089;&%231086;%20&%231074;&%231088;&%231077;&%231084;&%231077;&%231085;&%231077;&%231084;%20&%231080;%20&%231076;&%231072;&%231090;&%231072;&%231084;&%231080;'></a>
<h3>&#1056;&#1072;&#1073;&#1086;&#1090;&#1072; &#1089;&#1086; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1077;&#1084; &#1080; &#1076;&#1072;&#1090;&#1072;&#1084;&#1080;</h3>

<p>Sinatra &#1087;&#1088;&#1077;&#1076;&#1083;&#1072;&#1075;&#1072;&#1077;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082; <code>time_for</code>, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1080;&#1079; &#1079;&#1072;&#1076;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103;
&#1089;&#1086;&#1079;&#1076;&#1072;&#1077;&#1090; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090; Time. &#1054;&#1085; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090; &#1082;&#1086;&#1085;&#1074;&#1077;&#1088;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; <code>DateTime</code>, <code>Date</code> &#1080;
&#1087;&#1086;&#1076;&#1086;&#1073;&#1085;&#1099;&#1077; &#1082;&#1083;&#1072;&#1089;&#1089;&#1099;:</p>

<pre><code class="ruby">get '/' do
  pass if Time.now &gt; time_for('Dec 23, 2012')
  "still time"
end
</code></pre>

<p>&#1069;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; Sinatra &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1084;&#1080; <code>expires</code>, <code>last_modified</code> &#1080;
&#1080;&#1084; &#1087;&#1086;&#1076;&#1086;&#1073;&#1085;&#1099;&#1084;&#1080;. &#1055;&#1086;&#1101;&#1090;&#1086;&#1084;&#1091; &#1074;&#1099; &#1083;&#1077;&#1075;&#1082;&#1086; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1080;&#1090;&#1100; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083; &#1101;&#1090;&#1080;&#1093; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;,
&#1087;&#1077;&#1088;&#1077;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1074; <code>time_for</code> &#1074; &#1089;&#1074;&#1086;&#1077;&#1084; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1080;:</p>

<pre><code class="ruby">helpers do
  def time_for(value)
    case value
    when :yesterday then Time.now - 24*60*60
    when :tomorrow  then Time.now + 24*60*60
    else super
    end
  end
end

get '/' do
  last_modified :yesterday
  expires :tomorrow
  "hello"
end
</code></pre>

<a name='&%231055;&%231086;&%231080;&%231089;&%231082;%20&%231096;&%231072;&%231073;&%231083;&%231086;&%231085;&%231086;&%231074;'></a>
<h3>&#1055;&#1086;&#1080;&#1089;&#1082; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;</h3>

<p>&#1044;&#1083;&#1103; &#1087;&#1086;&#1080;&#1089;&#1082;&#1072; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; &#1080; &#1080;&#1093; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1077;&#1075;&#1086; &#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1084;&#1077;&#1090;&#1086;&#1076;
<code>find_template</code>:</p>

<pre><code class="ruby">find_template settings.views, 'foo', Tilt[:haml] do |file|
  puts "could be #{file}"
end
</code></pre>

<p>&#1069;&#1090;&#1086; &#1085;&#1077; &#1089;&#1083;&#1080;&#1096;&#1082;&#1086;&#1084; &#1087;&#1086;&#1083;&#1077;&#1079;&#1085;&#1099;&#1081; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;. &#1047;&#1072;&#1090;&#1086; &#1087;&#1086;&#1083;&#1077;&#1079;&#1077;&#1085; &#1090;&#1086;&#1090; &#1092;&#1072;&#1082;&#1090;, &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1087;&#1077;&#1088;&#1077;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100; &#1101;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1081; &#1089;&#1086;&#1073;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1081; &#1084;&#1077;&#1093;&#1072;&#1085;&#1080;&#1079;&#1084;
&#1087;&#1086;&#1080;&#1089;&#1082;&#1072;. &#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1084;&#1086;&#1078;&#1085;&#1086; &#1073;&#1099;&#1083;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086;
&#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1081; &#1089; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1084;&#1080;:</p>

<pre><code class="ruby">set :views, ['views', 'templates']

helpers do
  def find_template(views, name, engine, &amp;block)
    Array(views).each { |v| super(v, name, engine, &amp;block) }
  end
end
</code></pre>

<p>&#1044;&#1088;&#1091;&#1075;&#1086;&#1081; &#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1074; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1084; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1102;&#1090;&#1089;&#1103; &#1088;&#1072;&#1079;&#1085;&#1099;&#1077; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1076;&#1083;&#1103; &#1076;&#1074;&#1080;&#1078;&#1082;&#1086;&#1074;
&#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072;:</p>

<pre><code class="ruby">set :views, :sass =&gt; 'views/sass', :haml =&gt; 'templates', :default =&gt; 'views'

helpers do
  def find_template(views, name, engine, &amp;block)
    _, folder = views.detect { |k,v| engine == Tilt[k] }
    folder ||= views[:default]
    super(folder, name, engine, &amp;block)
  end
end
</code></pre>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1083;&#1077;&#1075;&#1082;&#1086; &#1074;&#1099;&#1085;&#1077;&#1089;&#1090;&#1080; &#1101;&#1090;&#1086;&#1090; &#1082;&#1086;&#1076; &#1074; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1077; &#1080; &#1087;&#1086;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100;&#1089;&#1103; &#1080;&#1084; &#1089; &#1086;&#1089;&#1090;&#1072;&#1083;&#1100;&#1085;&#1099;&#1084;&#1080;!</p>

<p>&#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; <code>find_template</code> &#1085;&#1077; &#1087;&#1088;&#1086;&#1074;&#1077;&#1088;&#1103;&#1077;&#1090;, &#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; &#1083;&#1080; &#1092;&#1072;&#1081;&#1083; &#1085;&#1072; &#1089;&#1072;&#1084;&#1086;&#1084; &#1076;&#1077;&#1083;&#1077;,
&#1072; &#1074;&#1099;&#1079;&#1099;&#1074;&#1072;&#1077;&#1090; &#1079;&#1072;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1073;&#1083;&#1086;&#1082; &#1076;&#1083;&#1103; &#1074;&#1089;&#1077;&#1093; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1099;&#1093; &#1087;&#1091;&#1090;&#1077;&#1081;. &#1044;&#1077;&#1083;&#1086; &#1090;&#1091;&#1090; &#1085;&#1077; &#1074;
&#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1080;, &#1076;&#1077;&#1083;&#1086; &#1074; &#1090;&#1086;&#1084;, &#1095;&#1090;&#1086; <code>render</code> &#1074;&#1099;&#1079;&#1086;&#1074;&#1077;&#1090; <code>break</code>, &#1082;&#1072;&#1082; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1092;&#1072;&#1081;&#1083;
&#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1085;&#1072;&#1081;&#1076;&#1077;&#1085;. &#1057;&#1086;&#1076;&#1077;&#1088;&#1078;&#1080;&#1084;&#1086;&#1077; &#1080; &#1084;&#1077;&#1089;&#1090;&#1086;&#1085;&#1072;&#1093;&#1086;&#1078;&#1076;&#1077;&#1085;&#1080;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074; &#1073;&#1091;&#1076;&#1077;&#1090; &#1079;&#1072;&#1082;&#1101;&#1096;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1086;,
&#1077;&#1089;&#1083;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1086; &#1085;&#1077; &#1074; &#1088;&#1077;&#1078;&#1080;&#1084;&#1077; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; (<code>set :environment,
:development</code>). &#1042;&#1099; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1087;&#1086;&#1084;&#1085;&#1080;&#1090;&#1100; &#1086;&#1073; &#1101;&#1090;&#1080;&#1093; &#1085;&#1102;&#1072;&#1085;&#1089;&#1072;&#1093;,  &#1077;&#1089;&#1083;&#1080; &#1087;&#1080;&#1096;&#1080;&#1090;&#1077; &#1087;&#1086;-&#1085;&#1072;&#1089;&#1090;&#1086;&#1103;&#1097;&#1077;&#1084;&#1091;
"&#1089;&#1091;&#1084;&#1072;&#1089;&#1096;&#1077;&#1076;&#1096;&#1080;&#1081;" &#1084;&#1077;&#1090;&#1086;&#1076;.</p>

<a name='&%231050;&%231086;&%231085;&%231092;&%231080;&%231075;&%231091;&%231088;&%231072;&%231094;&%231080;&%231103;'></a>
<h2>&#1050;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1103;</h2>

<p>&#1069;&#1090;&#1086;&#1090; &#1073;&#1083;&#1086;&#1082; &#1080;&#1089;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103; &#1086;&#1076;&#1080;&#1085; &#1088;&#1072;&#1079; &#1087;&#1088;&#1080; &#1089;&#1090;&#1072;&#1088;&#1090;&#1077; &#1074; &#1083;&#1102;&#1073;&#1086;&#1084; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1080;, &#1088;&#1077;&#1078;&#1080;&#1084;&#1077;
(environment):</p>

<pre><code class="ruby">configure do
  # &#1079;&#1072;&#1076;&#1072;&#1085;&#1080;&#1077; &#1086;&#1076;&#1085;&#1086;&#1081; &#1086;&#1087;&#1094;&#1080;&#1080;
  set :option, 'value'

  # &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1084; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1087;&#1094;&#1080;&#1081;
  set :a =&gt; 1, :b =&gt; 2

  # &#1090;&#1086; &#1078;&#1077; &#1089;&#1072;&#1084;&#1086;&#1077;, &#1095;&#1090;&#1086; &#1080; `set :option, true`
  enable :option

  # &#1090;&#1086; &#1078;&#1077; &#1089;&#1072;&#1084;&#1086;&#1077;, &#1095;&#1090;&#1086; &#1080; `set :option, false`
  disable :option

  # &#1091; &#1074;&#1072;&#1089; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; "&#1076;&#1080;&#1085;&#1072;&#1084;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077;" &#1086;&#1087;&#1094;&#1080;&#1080; &#1089; &#1073;&#1083;&#1086;&#1082;&#1072;&#1084;&#1080;
  set(:css_dir) { File.join(views, 'css') }
end
</code></pre>

<p>&#1041;&#1091;&#1076;&#1077;&#1090; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1086;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077; (RACK_ENV &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;) <code>:production</code>:</p>

<pre><code class="ruby">configure :production do
  ...
end
</code></pre>

<p>&#1041;&#1091;&#1076;&#1077;&#1090; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1086;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077; <code>:production</code> &#1080;&#1083;&#1080; <code>:test</code>:</p>

<pre><code class="ruby">configure :production, :test do
  ...
end
</code></pre>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1101;&#1090;&#1080;&#1084; &#1086;&#1087;&#1094;&#1080;&#1103;&#1084; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>settings</code>:</p>

<pre><code class="ruby">configure do
  set :foo, 'bar'
end

get '/' do
  settings.foo? # =&gt; true
  settings.foo  # =&gt; 'bar'
  ...
end
</code></pre>

<a name='&%231053;&%231072;&%231089;&%231090;&%231088;&%231086;&%231081;&%231082;&%231072;%20&%231079;&%231072;&%231097;&%231080;&%231090;&%231099;%20&%231086;&%231090;%20&%231072;&%231090;&%231072;&%231082;'></a>
<h3>&#1053;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072; &#1079;&#1072;&#1097;&#1080;&#1090;&#1099; &#1086;&#1090; &#1072;&#1090;&#1072;&#1082;</h3>

<p>Sinatra &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;
<a href="https://github.com/rkh/rack-protection#readme">Rack::Protection</a> &#1076;&#1083;&#1103; &#1079;&#1072;&#1097;&#1080;&#1090;&#1099;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1086;&#1090; &#1087;&#1088;&#1086;&#1089;&#1090;&#1099;&#1093; &#1072;&#1090;&#1072;&#1082;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1083;&#1077;&#1075;&#1082;&#1086; &#1074;&#1099;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1101;&#1090;&#1091; &#1079;&#1072;&#1097;&#1080;&#1090;&#1091; (&#1095;&#1090;&#1086; &#1089;&#1076;&#1077;&#1083;&#1072;&#1077;&#1090;
&#1074;&#1072;&#1096;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1095;&#1088;&#1077;&#1079;&#1074;&#1099;&#1095;&#1072;&#1081;&#1085;&#1086; &#1091;&#1103;&#1079;&#1074;&#1080;&#1084;&#1099;&#1084;):</p>

<pre><code class="ruby">disable :protection
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1087;&#1088;&#1086;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; &#1082;&#1072;&#1082;&#1086;&#1081;-&#1083;&#1080;&#1073;&#1086; &#1091;&#1088;&#1086;&#1074;&#1077;&#1085;&#1100; &#1079;&#1072;&#1097;&#1080;&#1090;&#1099;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1081;&#1090;&#1077; &#1093;&#1077;&#1096; &#1086;&#1087;&#1094;&#1080;&#1081; &#1074; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088;
<code>protection</code>:</p>

<pre><code class="ruby">set :protection, :except =&gt; :path_traversal
</code></pre>

<p>&#1042;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1089;&#1088;&#1072;&#1079;&#1091; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1091;&#1088;&#1086;&#1074;&#1085;&#1077;&#1081; &#1079;&#1072;&#1097;&#1080;&#1090;&#1099;:</p>

<pre><code class="ruby">set :protection, :except =&gt; [:path_traversal, :session_hijacking]
</code></pre>

<a name='&%231044;&%231086;&%231089;&%231090;&%231091;&%231087;&%231085;&%231099;&%231077;%20&%231085;&%231072;&%231089;&%231090;&%231088;&%231086;&%231081;&%231082;&%231080;'></a>
<h3>&#1044;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1080;</h3>

<dl>
<dt>absolute_redirects</dt>
  <dd>
    &#1077;&#1089;&#1083;&#1080; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086;, &#1090;&#1086; Sinatra &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1090;&#1100; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1086;&#1090;&#1085;&#1086;&#1089;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1093;
    &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1081;, &#1085;&#1086; &#1087;&#1088;&#1080; &#1101;&#1090;&#1086;&#1084; &#1087;&#1077;&#1088;&#1077;&#1089;&#1090;&#1072;&#1085;&#1077;&#1090; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1086;&#1074;&#1072;&#1090;&#1100; RFC 2616 (HTTP
    1.1), &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1088;&#1072;&#1079;&#1088;&#1077;&#1096;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1072;&#1073;&#1089;&#1086;&#1083;&#1102;&#1090;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103;.
  </dd>
  <dd>
    &#1042;&#1082;&#1083;&#1102;&#1095;&#1072;&#1081;&#1090;&#1077; &#1101;&#1090;&#1091; &#1086;&#1087;&#1094;&#1080;&#1102;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1072;&#1096;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1079;&#1072; &#1086;&#1073;&#1088;&#1072;&#1090;&#1085;&#1099;&#1084; &#1087;&#1088;&#1086;&#1082;&#1089;&#1080;,
    &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085; &#1085;&#1077; &#1089;&#1086;&#1074;&#1089;&#1077;&#1084; &#1082;&#1086;&#1088;&#1088;&#1077;&#1082;&#1090;&#1085;&#1086;. &#1054;&#1073;&#1088;&#1072;&#1090;&#1080;&#1090;&#1077; &#1074;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077;, &#1084;&#1077;&#1090;&#1086;&#1076; <tt>url</tt> &#1074;&#1089;&#1077;
    &#1088;&#1072;&#1074;&#1085;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1075;&#1077;&#1085;&#1077;&#1088;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100; &#1072;&#1073;&#1089;&#1086;&#1083;&#1102;&#1090;&#1085;&#1099;&#1077; URL, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1085;&#1077; &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1076;&#1080;&#1090;&#1077; <tt>false</tt>
    &#1074;&#1090;&#1086;&#1088;&#1099;&#1084; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;&#1086;&#1084;.
  </dd>
  <dd>&#1054;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;.</dd>

  <dt>add_charsets</dt>
  <dd>
    mime-&#1090;&#1080;&#1087;&#1099;, &#1082; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1084;&#1077;&#1090;&#1086;&#1076; <tt>content_type</tt> &#1073;&#1091;&#1076;&#1077;&#1090; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1090;&#1100;
    &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1102; &#1086; &#1082;&#1086;&#1076;&#1080;&#1088;&#1086;&#1074;&#1082;&#1077;. &#1042;&#1072;&#1084; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1090;&#1100; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1082; &#1101;&#1090;&#1086;&#1081; &#1086;&#1087;&#1094;&#1080;&#1080;
    &#1074;&#1084;&#1077;&#1089;&#1090;&#1086; &#1077;&#1077; &#1087;&#1077;&#1088;&#1077;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1080;&#1103;: <tt>settings.add_charsets &lt;&lt; "application/foobar"</tt>
  </dd>

  <dt>app_file</dt>
  <dd>
    &#1087;&#1091;&#1090;&#1100; &#1082; &#1075;&#1083;&#1072;&#1074;&#1085;&#1086;&#1084;&#1091; &#1092;&#1072;&#1081;&#1083;&#1091; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1076;&#1083;&#1103; &#1085;&#1072;&#1093;&#1086;&#1078;&#1076;&#1077;&#1085;&#1080;&#1103; &#1082;&#1086;&#1088;&#1085;&#1077;&#1074;&#1086;&#1081;
    &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1087;&#1088;&#1086;&#1077;&#1082;&#1090;&#1072;, &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1081; &#1089; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1084;&#1080; &#1080; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1084;&#1080; &#1092;&#1072;&#1081;&#1083;&#1072;&#1084;&#1080;,
    &#1074;&#1083;&#1086;&#1078;&#1077;&#1085;&#1085;&#1099;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;.
  </dd>

  <dt>bind</dt>
  <dd>
    &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1084;&#1099;&#1081; IP-&#1072;&#1076;&#1088;&#1077;&#1089; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: 0.0.0.0). &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086;
    &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1084; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1086;&#1084;.
  </dd>

  <dt>default_encoding</dt>
  <dd>&#1082;&#1086;&#1076;&#1080;&#1088;&#1086;&#1074;&#1082;&#1072;, &#1077;&#1089;&#1083;&#1080; &#1085;&#1077;&#1080;&#1079;&#1074;&#1077;&#1089;&#1090;&#1085;&#1072; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: <tt>"utf-8"</tt>).</dd>

  <dt>dump_errors</dt>
  <dd>&#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1072;&#1090;&#1100; &#1086;&#1096;&#1080;&#1073;&#1082;&#1080; &#1074; &#1083;&#1086;&#1075;&#1077;.</dd>

  <dt>environment</dt>
  <dd>
    &#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1077; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077;, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;, &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; <tt>ENV['RACK_ENV']</tt> &#1080;&#1083;&#1080;
    <tt>"development"</tt>, &#1077;&#1089;&#1083;&#1080; <tt>ENV['RACK_ENV']</tt> &#1085;&#1077;&#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1072;.
  </dd>

  <dt>logging</dt>
  <dd>&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1083;&#1086;&#1075;&#1077;&#1088;.</dd>

  <dt>lock</dt>
  <dd>
    &#1089;&#1086;&#1079;&#1076;&#1072;&#1077;&#1090; &#1073;&#1083;&#1086;&#1082;&#1080;&#1088;&#1086;&#1074;&#1082;&#1091; &#1076;&#1083;&#1103; &#1082;&#1072;&#1078;&#1076;&#1086;&#1075;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1072;&#1103; &#1075;&#1072;&#1088;&#1072;&#1085;&#1090;&#1080;&#1088;&#1091;&#1077;&#1090; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1091;
    &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1074; &#1090;&#1077;&#1082;&#1091;&#1097;&#1080;&#1081; &#1084;&#1086;&#1084;&#1077;&#1085;&#1090; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1080; &#1074; Ruby &#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089;&#1077;.
  </dd>
  <dd>
    &#1042;&#1082;&#1083;&#1102;&#1095;&#1072;&#1081;&#1090;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1072;&#1096;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1085;&#1077; &#1087;&#1086;&#1090;&#1086;&#1082;&#1086;-&#1073;&#1077;&#1079;&#1086;&#1087;&#1072;&#1089;&#1085;&#1086; (thread-safe).
    &#1054;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;.</dd>

  <dt>method_override</dt>
  <dd>
    &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; "&#1084;&#1072;&#1075;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081;" &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; <tt>_method</tt>, &#1076;&#1083;&#1103; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1080;
    PUT/DELETE &#1092;&#1086;&#1088;&#1084; &#1074; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1072;&#1093;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1085;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1102;&#1090; &#1101;&#1090;&#1080; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;.
  </dd>

  <dt>port</dt>
  <dd>
    &#1087;&#1086;&#1088;&#1090;, &#1085;&#1072; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1084; &#1073;&#1091;&#1076;&#1077;&#1090; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;.
    &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1084; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1086;&#1084;.
  </dd>

  <dt>prefixed_redirects</dt>
  <dd>
    &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1103;&#1090;&#1100; &#1080;&#1083;&#1080; &#1085;&#1077;&#1090; &#1087;&#1072;&#1088;&#1072;&#1084;&#1077;&#1090;&#1088; <tt>request.script_name</tt> &#1082; &#1088;&#1077;&#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1072;&#1084;, &#1077;&#1089;&#1083;&#1080; &#1085;&#1077;
    &#1079;&#1072;&#1076;&#1072;&#1085; &#1072;&#1073;&#1089;&#1086;&#1083;&#1102;&#1090;&#1085;&#1099;&#1081; &#1087;&#1091;&#1090;&#1100;. &#1058;&#1072;&#1082;&#1080;&#1084; &#1086;&#1073;&#1088;&#1072;&#1079;&#1086;&#1084;, <tt>redirect '/foo'</tt> &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1077;&#1089;&#1090;&#1080; &#1089;&#1077;&#1073;&#1103;
    &#1082;&#1072;&#1082; <tt>redirect to('/foo')</tt>. &#1054;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;.
  </dd>

  <dt>protection</dt>
  <dd>&#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1072; &#1080;&#1083;&#1080; &#1085;&#1077;&#1090; &#1079;&#1072;&#1097;&#1080;&#1090;&#1072; &#1086;&#1090; &#1072;&#1090;&#1072;&#1082;. &#1057;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1089;&#1077;&#1082;&#1094;&#1080;&#1102; &#1074;&#1099;&#1096;&#1077;.</dd>

  <dt>public_dir</dt>
  <dd>&#1040;&#1083;&#1080;&#1072;&#1089; &#1076;&#1083;&#1103; <tt>public_folder</tt>.</dd>

  <dt>public_folder</dt>
  <dd>
    &#1087;&#1091;&#1090;&#1100; &#1082; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080;, &#1086;&#1090;&#1082;&#1091;&#1076;&#1072; &#1073;&#1091;&#1076;&#1091;&#1090; &#1088;&#1072;&#1079;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099;.
    &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;, &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1077;&#1089;&#1083;&#1080; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1072; &#1088;&#1072;&#1079;&#1076;&#1072;&#1095;&#1072; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;
    (&#1089;&#1084;. &#1086;&#1087;&#1094;&#1080;&#1102; <tt>static</tt> &#1085;&#1080;&#1078;&#1077;).
  </dd>

  <dt>reload_templates</dt>
  <dd>
    &#1087;&#1077;&#1088;&#1077;&#1079;&#1072;&#1075;&#1088;&#1091;&#1078;&#1072;&#1090;&#1100; &#1080;&#1083;&#1080; &#1085;&#1077;&#1090; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1085;&#1072; &#1082;&#1072;&#1078;&#1076;&#1099;&#1081; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;. &#1042;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1074; &#1088;&#1077;&#1078;&#1080;&#1084;&#1077;
    &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080;.
  </dd>

  <dt>root</dt>
  <dd>&#1087;&#1091;&#1090;&#1100; &#1082; &#1082;&#1086;&#1088;&#1085;&#1077;&#1074;&#1086;&#1081; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1087;&#1088;&#1086;&#1077;&#1082;&#1090;&#1072;.</dd>

  <dt>raise_errors</dt>
  <dd>
    &#1074;&#1099;&#1073;&#1088;&#1072;&#1089;&#1099;&#1074;&#1072;&#1090;&#1100; &#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1103; (&#1073;&#1091;&#1076;&#1077;&#1090; &#1086;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1090;&#1100; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;).
    &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1080; <tt>test</tt>.
  </dd>

  <dt>run</dt>
  <dd>
    &#1077;&#1089;&#1083;&#1080; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086;, Sinatra &#1073;&#1091;&#1076;&#1077;&#1090; &#1089;&#1072;&#1084;&#1086;&#1089;&#1090;&#1086;&#1103;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; &#1074;&#1077;&#1073;-&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;. &#1053;&#1077;
    &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1081;&#1090;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; rackup &#1080;&#1083;&#1080; &#1072;&#1085;&#1072;&#1083;&#1086;&#1075;&#1080;&#1095;&#1085;&#1099;&#1077; &#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1072;.
  </dd>

  <dt>running</dt>
  <dd>&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1083;&#1080; &#1089;&#1077;&#1081;&#1095;&#1072;&#1089; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1081; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;? &#1053;&#1077; &#1084;&#1077;&#1085;&#1103;&#1081;&#1090;&#1077; &#1101;&#1090;&#1091; &#1086;&#1087;&#1094;&#1080;&#1102;!</dd>

  <dt>server</dt>
  <dd>
    &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1080;&#1083;&#1080; &#1089;&#1087;&#1080;&#1089;&#1086;&#1082; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1086;&#1074;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077;
    &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;: <tt>['thin', 'mongrel', 'webrick']</tt>, &#1087;&#1086;&#1088;&#1103;&#1076;&#1086;&#1082;
    &#1079;&#1072;&#1076;&#1072;&#1077;&#1090; &#1087;&#1088;&#1080;&#1086;&#1088;&#1080;&#1090;&#1077;&#1090;.</dd>

  <dt>sessions</dt>
  <dd>
    &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1089;&#1077;&#1089;&#1089;&#1080;&#1080; &#1085;&#1072; &#1086;&#1089;&#1085;&#1086;&#1074;&#1077; &#1082;&#1091;&#1082; (cookie) &#1085;&#1072; &#1073;&#1072;&#1079;&#1077; <tt>Rack::Session::Cookie</tt>.
    &#1057;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1089;&#1077;&#1082;&#1094;&#1080;&#1102; "&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;" &#1074;&#1099;&#1096;&#1077;.
  </dd>

  <dt>show_exceptions</dt>
  <dd>
    &#1087;&#1086;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1103;/&#1089;&#1090;&#1077;&#1082; &#1074;&#1099;&#1079;&#1086;&#1074;&#1086;&#1074; (stack trace) &#1074; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1077;. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102;
    &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1080; <tt>development</tt>.
  </dd>
  <dd>
    &#1052;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1083;&#1077;&#1085;&#1086; &#1074;
    <tt>:after_handler</tt> &#1076;&#1083;&#1103; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072; &#1089;&#1087;&#1077;&#1094;&#1080;&#1092;&#1080;&#1095;&#1085;&#1086;&#1081; &#1076;&#1083;&#1103; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082;,
    &#1087;&#1077;&#1088;&#1077;&#1076; &#1087;&#1086;&#1082;&#1072;&#1079;&#1086;&#1084; &#1090;&#1088;&#1072;&#1089;&#1089;&#1080;&#1088;&#1086;&#1074;&#1082;&#1080; &#1089;&#1090;&#1077;&#1082;&#1072; &#1074; &#1073;&#1088;&#1072;&#1091;&#1079;&#1077;&#1088;&#1077;.
  </dd>

  <dt>static</dt>
  <dd>&#1076;&#1086;&#1083;&#1078;&#1085;&#1072; &#1083;&#1080; Sinatra &#1086;&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1083;&#1103;&#1090;&#1100; &#1088;&#1072;&#1079;&#1076;&#1072;&#1095;&#1091; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1092;&#1072;&#1081;&#1083;&#1086;&#1074;.</dd>
  <dd>&#1054;&#1090;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1077;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; &#1082;&#1072;&#1082;&#1086;&#1081;-&#1083;&#1080;&#1073;&#1086; &#1074;&#1077;&#1073;-&#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1076;&#1083;&#1103; &#1101;&#1090;&#1086;&#1081; &#1094;&#1077;&#1083;&#1080;.</dd>
  <dd>&#1054;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077; &#1079;&#1085;&#1072;&#1095;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1091;&#1083;&#1091;&#1095;&#1096;&#1080;&#1090; &#1087;&#1088;&#1086;&#1080;&#1079;&#1074;&#1086;&#1076;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1100; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;.</dd>
  <dd>&#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1080; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086; &#1074; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;&#1093;.</dd>

  <dt>static_cache_control</dt>
  <dd>
    &#1082;&#1086;&#1075;&#1076;&#1072; Sinatra &#1086;&#1090;&#1076;&#1072;&#1077;&#1090; &#1089;&#1090;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1077; &#1092;&#1072;&#1081;&#1083;&#1099;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1101;&#1090;&#1091; &#1086;&#1087;&#1094;&#1080;&#1102;, &#1095;&#1090;&#1086;&#1073;&#1099;
    &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1080;&#1084; &#1079;&#1072;&#1075;&#1086;&#1083;&#1086;&#1074;&#1086;&#1082; <tt>Cache-Control</tt>. &#1044;&#1083;&#1103; &#1101;&#1090;&#1086;&#1075;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103;
    &#1084;&#1077;&#1090;&#1086;&#1076;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082; <tt>cache_control</tt>. &#1055;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086;.
  </dd>
  <dd>
    &#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1084;&#1072;&#1089;&#1089;&#1080;&#1074;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1085;&#1072;&#1076;&#1086; &#1079;&#1072;&#1076;&#1072;&#1090;&#1100; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1081;:
    <tt>set :static_cache_control, [:public, :max_age =&gt; 300]</tt>
  </dd>

  <dt>threaded</dt>
  <dd>
    &#1077;&#1089;&#1083;&#1080; &#1074;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1086;, &#1090;&#1086; Thin &#1073;&#1091;&#1076;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; <tt>EventMachine.defer</tt> &#1076;&#1083;&#1103;
    &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1074;.
  </dd>

  <dt>views</dt>
  <dd>&#1087;&#1091;&#1090;&#1100; &#1082; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1089; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1084;&#1080;.</dd>
</dl>
<a name='&%231056;&%231077;&%231078;&%231080;&%231084;,%20&%231086;&%231082;&%231088;&%231091;&%231078;&%231077;&%231085;&%231080;&%231077;'></a>
<h2>&#1056;&#1077;&#1078;&#1080;&#1084;, &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077;</h2>

<p>&#1045;&#1089;&#1090;&#1100; 3 &#1087;&#1088;&#1077;&#1076;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1093; &#1088;&#1077;&#1078;&#1080;&#1084;&#1072;, &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1103;: <code>"development"</code>, <code>"production"</code> &#1080;
<code>"test"</code>. &#1056;&#1077;&#1078;&#1080;&#1084; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1079;&#1072;&#1076;&#1072;&#1085; &#1095;&#1077;&#1088;&#1077;&#1079; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1091;&#1102; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1103; <code>RACK_ENV</code>.
&#1047;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1077; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &mdash; <code>"development"</code>. &#1042; &#1101;&#1090;&#1086;&#1084; &#1088;&#1077;&#1078;&#1080;&#1084;&#1077; &#1088;&#1072;&#1073;&#1086;&#1090;&#1099; &#1074;&#1089;&#1077; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099;
&#1087;&#1077;&#1088;&#1077;&#1079;&#1072;&#1075;&#1088;&#1091;&#1078;&#1072;&#1102;&#1090;&#1089;&#1103; &#1084;&#1077;&#1078;&#1076;&#1091; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;&#1084;&#1080;. &#1040; &#1090;&#1072;&#1082;&#1078;&#1077; &#1079;&#1072;&#1076;&#1072;&#1102;&#1090;&#1089;&#1103; &#1089;&#1087;&#1077;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1080;
<code>not_found</code> &#1080; <code>error</code>, &#1095;&#1090;&#1086;&#1073;&#1099; &#1074;&#1099; &#1084;&#1086;&#1075;&#1083;&#1080; &#1091;&#1074;&#1080;&#1076;&#1077;&#1090;&#1100; &#1089;&#1090;&#1077;&#1082; &#1074;&#1099;&#1079;&#1086;&#1074;&#1086;&#1074;. &#1042; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1103;&#1093;
<code>"production"</code> &#1080; <code>"test"</code> &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1099; &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1082;&#1101;&#1096;&#1080;&#1088;&#1091;&#1102;&#1090;&#1089;&#1103;.</p>

<p>&#1044;&#1083;&#1103; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1074; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1086;&#1084; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; &#1082;&#1083;&#1102;&#1095; <code>-e</code></p>

<pre><code>ruby my_app.rb -e [ENVIRONMENT]
</code></pre>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1087;&#1088;&#1077;&#1076;&#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; <code>development?</code>, <code>test?</code> &#1080;
+production?, &#1095;&#1090;&#1086;&#1073;&#1099; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1080;&#1090;&#1100; &#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1077; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077;.</p>

<a name='&%231054;&%231073;&%231088;&%231072;&%231073;&%231086;&%231090;&%231082;&%231072;%20&%231086;&%231096;&%231080;&%231073;&%231086;&%231082;'></a>
<h2>&#1054;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1072; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082;</h2>

<p>&#1054;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1080; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082; &#1080;&#1089;&#1087;&#1086;&#1083;&#1085;&#1103;&#1102;&#1090;&#1089;&#1103; &#1074; &#1090;&#1086;&#1084; &#1078;&#1077; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1080; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;, &#1080;
<code>before</code>-&#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099;, &#1072; &#1101;&#1090;&#1086; &#1086;&#1079;&#1085;&#1072;&#1095;&#1072;&#1077;&#1090;, &#1095;&#1090;&#1086; &#1074;&#1089;&#1103;&#1082;&#1080;&#1077; &#1087;&#1088;&#1077;&#1083;&#1077;&#1089;&#1090;&#1080; &#1074;&#1088;&#1086;&#1076;&#1077; <code>haml</code>, <code>erb</code>,
<code>halt</code> &#1080; &#1090;.&#1076;. &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1080; &#1080;&#1084;.</p>

<a name='Not%20Found'></a>
<h3>Not Found</h3>

<p>&#1050;&#1086;&#1075;&#1076;&#1072; &#1074;&#1099;&#1073;&#1088;&#1086;&#1096;&#1077;&#1085;&#1086; &#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077; <code>Sinatra::NotFound</code>, &#1080;&#1083;&#1080; &#1082;&#1086;&#1076;&#1086;&#1084; &#1086;&#1090;&#1074;&#1077;&#1090;&#1072; &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; 404,
&#1090;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1079;&#1074;&#1072;&#1085; <code>not_found</code> &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;:</p>

<pre><code class="ruby">not_found do
  'This is nowhere to be found.'
end
</code></pre>

<a name='&%231054;&%231096;&%231080;&%231073;&%231082;&%231080;'></a>
<h3>&#1054;&#1096;&#1080;&#1073;&#1082;&#1080;</h3>

<p>&#1054;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082; <code>error</code> &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1079;&#1074;&#1072;&#1085;, &#1082;&#1086;&#1075;&#1076;&#1072; &#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077; &#1074;&#1099;&#1073;&#1088;&#1086;&#1096;&#1077;&#1085;&#1086; &#1080;&#1079; &#1073;&#1083;&#1086;&#1082;&#1072;
&#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1072;, &#1083;&#1080;&#1073;&#1086; &#1080;&#1079; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;. &#1054;&#1073;&#1098;&#1077;&#1082;&#1090;-&#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1077; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1077;&#1085; &#1082;&#1072;&#1082; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1072;&#1103;
<code>sinatra.error</code> &#1074; Rack:</p>

<pre><code class="ruby">error do
  'Sorry there was a nasty error - ' + env['sinatra.error'].name
end
</code></pre>

<p>&#1050;&#1086;&#1085;&#1082;&#1088;&#1077;&#1090;&#1085;&#1099;&#1077; &#1086;&#1096;&#1080;&#1073;&#1082;&#1080;:</p>

<pre><code class="ruby">error MyCustomError do
  'So what happened was...' + env['sinatra.error'].message
end
</code></pre>

<p>&#1058;&#1086;&#1075;&#1076;&#1072;, &#1077;&#1089;&#1083;&#1080; &#1101;&#1090;&#1086; &#1087;&#1088;&#1086;&#1080;&#1079;&#1086;&#1096;&#1083;&#1086;:</p>

<pre><code class="ruby">get '/' do
  raise MyCustomError, 'something bad'
end
</code></pre>

<p>&#1058;&#1086; &#1074;&#1099; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1077;:</p>

<pre><code>So what happened was... something bad
</code></pre>

<p>&#1058;&#1072;&#1082;&#1078;&#1077; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082; &#1076;&#1083;&#1103; &#1082;&#1086;&#1076;&#1072; &#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1103; HTTP:</p>

<pre><code class="ruby">error 403 do
  'Access forbidden'
end

get '/secret' do
  403
end
</code></pre>

<p>&#1051;&#1080;&#1073;&#1086; &#1085;&#1072;&#1073;&#1086;&#1088;&#1072; &#1082;&#1086;&#1076;&#1086;&#1074;:</p>

<pre><code class="ruby">error 400..510 do
  'Boom'
end
</code></pre>

<p>Sinatra &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1090; &#1089;&#1087;&#1077;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1099;&#1077; <code>not_found</code> &#1080; <code>error</code> &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1080;, &#1082;&#1086;&#1075;&#1076;&#1072;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1086; &#1074; &#1088;&#1077;&#1078;&#1080;&#1084;&#1077; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; (&#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1077; <code>:development</code>).</p>

<a name='Rack%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22'></a>
<h2>Rack "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;"</h2>

<p>Sinatra &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090; <a href="http://rack.rubyforge.org/">Rack</a>, &#1084;&#1080;&#1085;&#1080;&#1084;&#1072;&#1083;&#1100;&#1085;&#1099;&#1081; &#1089;&#1090;&#1072;&#1085;&#1076;&#1072;&#1088;&#1090;&#1085;&#1099;&#1081;
&#1080;&#1085;&#1090;&#1077;&#1088;&#1092;&#1077;&#1081;&#1089; &#1076;&#1083;&#1103; &#1074;&#1077;&#1073;-&#1092;&#1088;&#1077;&#1081;&#1084;&#1074;&#1086;&#1088;&#1082;&#1086;&#1074; &#1085;&#1072; Ruby. &#1054;&#1076;&#1085;&#1086;&#1081; &#1080;&#1079; &#1089;&#1072;&#1084;&#1099;&#1093; &#1080;&#1085;&#1090;&#1077;&#1088;&#1077;&#1089;&#1085;&#1099;&#1093; &#1076;&#1083;&#1103;
&#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1086;&#1074; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1077;&#1081; Rack &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1072; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1077;&#1082;" ("middleware") &mdash;
&#1082;&#1086;&#1084;&#1087;&#1086;&#1085;&#1077;&#1085;&#1090;&#1086;&#1074;, &#1085;&#1072;&#1093;&#1086;&#1076;&#1103;&#1097;&#1080;&#1093;&#1089;&#1103; "&#1084;&#1077;&#1078;&#1076;&#1091;" &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1086;&#1084; &#1080; &#1074;&#1072;&#1096;&#1080;&#1084; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1077;
&#1086;&#1090;&#1089;&#1083;&#1077;&#1078;&#1080;&#1074;&#1072;&#1102;&#1090; &#1080;/&#1080;&#1083;&#1080; &#1084;&#1072;&#1085;&#1080;&#1087;&#1091;&#1083;&#1080;&#1088;&#1091;&#1102;&#1090; HTTP &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;&#1084;&#1080;/&#1086;&#1090;&#1074;&#1077;&#1090;&#1072;&#1084;&#1080; &#1076;&#1083;&#1103; &#1087;&#1088;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103;
&#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1086;&#1081; &#1092;&#1091;&#1085;&#1082;&#1094;&#1080;&#1086;&#1085;&#1072;&#1083;&#1100;&#1085;&#1086;&#1089;&#1090;&#1080;.</p>

<p>&#1042; Sinatra &#1086;&#1095;&#1077;&#1085;&#1100; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1090;&#1072;&#1082;&#1080;&#1077; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;" &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072; <code>use</code>:</p>

<pre><code class="ruby">require 'sinatra'
require 'my_custom_middleware'

use Rack::Lint
use MyCustomMiddleware

get '/hello' do
  'Hello World'
end
</code></pre>

<p>&#1057;&#1077;&#1084;&#1072;&#1085;&#1090;&#1080;&#1082;&#1072; <code>use</code> &#1080;&#1076;&#1077;&#1085;&#1090;&#1080;&#1095;&#1085;&#1072; &#1090;&#1086;&#1081;, &#1095;&#1090;&#1086; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1072; &#1076;&#1083;&#1103;
<a href="http://rack.rubyforge.org/doc/classes/Rack/Builder.html">Rack::Builder</a> DSL
(&#1095;&#1072;&#1097;&#1077; &#1074;&#1089;&#1077;&#1075;&#1086; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1074; rackup &#1092;&#1072;&#1081;&#1083;&#1072;&#1093;). &#1053;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1084;&#1077;&#1090;&#1086;&#1076; <code>use</code> &#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1077;&#1090; &#1082;&#1072;&#1082;
&#1084;&#1085;&#1086;&#1078;&#1077;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;, &#1090;&#1072;&#1082; &#1080; &#1073;&#1083;&#1086;&#1082;&#1080;:</p>

<pre><code class="ruby">use Rack::Auth::Basic do |username, password|
  username == 'admin' &amp;&amp; password == 'secret'
end
</code></pre>

<p>Rack &#1088;&#1072;&#1089;&#1087;&#1088;&#1086;&#1089;&#1090;&#1088;&#1072;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103; &#1089; &#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1099;&#1084;&#1080; &#1089;&#1090;&#1072;&#1085;&#1076;&#1072;&#1088;&#1090;&#1085;&#1099;&#1084;&#1080; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1072;&#1084;&#1080;" &#1076;&#1083;&#1103; &#1083;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;,
&#1086;&#1090;&#1083;&#1072;&#1076;&#1082;&#1080;, &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; URL, &#1072;&#1091;&#1090;&#1077;&#1085;&#1090;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1080;, &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1080; &#1089;&#1077;&#1089;&#1089;&#1080;&#1081;. Sinatra
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090; &#1084;&#1085;&#1086;&#1075;&#1080;&#1077; &#1080;&#1079; &#1101;&#1090;&#1080;&#1093; &#1082;&#1086;&#1084;&#1087;&#1086;&#1085;&#1077;&#1085;&#1090;&#1086;&#1074; &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;, &#1086;&#1089;&#1085;&#1086;&#1074;&#1099;&#1074;&#1072;&#1103;&#1089;&#1100; &#1085;&#1072;
&#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1080;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1074;&#1072;&#1084; &#1085;&#1077; &#1087;&#1088;&#1080;&#1093;&#1086;&#1076;&#1080;&#1083;&#1086;&#1089;&#1100; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; (<code>use</code>) &#1080;&#1093; &#1074;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;.</p>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1085;&#1072;&#1081;&#1090;&#1080; &#1087;&#1086;&#1083;&#1077;&#1079;&#1085;&#1099;&#1077; &#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080; &#1074;
<a href="https://github.com/rack/rack/tree/master/lib/rack">rack</a>,
<a href="https://github.com/rack/rack-contrib#readme">rack-contrib</a>,
<a href="http://coderack.org/">CodeRack</a> &#1080;&#1083;&#1080; &#1074;
<a href="https://github.com/rack/rack/wiki/List-of-Middleware">Rack wiki</a>.</p>

<a name='&%231058;&%231077;&%231089;&%231090;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;'></a>
<h2>&#1058;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;</h2>

<p>&#1058;&#1077;&#1089;&#1090;&#1099; &#1076;&#1083;&#1103; Sinatra &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; &#1085;&#1072;&#1087;&#1080;&#1089;&#1072;&#1085;&#1099; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;,
&#1092;&#1088;&#1077;&#1081;&#1084;&#1074;&#1086;&#1088;&#1082;&#1086;&#1074;, &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1102;&#1097;&#1080;&#1093; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; Rack.
<a href="http://rdoc.info/github/brynary/rack-test/master/frames">Rack::Test</a>
&#1088;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1086;&#1074;&#1072;&#1085;:</p>

<pre><code class="ruby">require 'my_sinatra_app'
require 'test/unit'
require 'rack/test'

class MyAppTest &lt; Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    Sinatra::Application
  end

  def test_my_default
    get '/'
    assert_equal 'Hello World!', last_response.body
  end

  def test_with_params
    get '/meet', :name =&gt; 'Frank'
    assert_equal 'Hello Frank!', last_response.body
  end

  def test_with_rack_env
    get '/', {}, 'HTTP_USER_AGENT' =&gt; 'Songbird'
    assert_equal "You're using Songbird!", last_response.body
  end
end
</code></pre>

<a name='Sinatra::Base%20&mdash;%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22,%20&%231073;&%231080;&%231073;&%231083;&%231080;&%231086;&%231090;&%231077;&%231082;&%231080;%20&%231080;%20&%231084;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;'></a>
<h2>Sinatra::Base &mdash; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;", &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;&#1080; &#1080; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;</h2>

<p>&#1054;&#1087;&#1080;&#1089;&#1072;&#1085;&#1080;&#1077; &#1089;&#1074;&#1086;&#1077;&#1075;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1089;&#1072;&#1084;&#1099;&#1084; &#1087;&#1088;&#1086;&#1089;&#1090;&#1077;&#1081;&#1096;&#1080;&#1084; &#1089;&#1087;&#1086;&#1089;&#1086;&#1073;&#1086;&#1084; (&#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; DSL &#1074;&#1077;&#1088;&#1093;&#1085;&#1077;&#1075;&#1086;
&#1091;&#1088;&#1086;&#1074;&#1085;&#1103;, &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081; &#1089;&#1090;&#1080;&#1083;&#1100;) &#1086;&#1090;&#1083;&#1080;&#1095;&#1085;&#1086; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1076;&#1083;&#1103; &#1082;&#1088;&#1086;&#1093;&#1086;&#1090;&#1085;&#1099;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081;. &#1042; &#1090;&#1072;&#1082;&#1080;&#1093;
&#1089;&#1083;&#1091;&#1095;&#1072;&#1103;&#1093; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1089;&#1103; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1103;, &#1088;&#1072;&#1089;&#1089;&#1095;&#1080;&#1090;&#1072;&#1085;&#1085;&#1072;&#1103; &#1085;&#1072;  &#1084;&#1080;&#1082;&#1088;&#1086;-&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;
(&#1077;&#1076;&#1080;&#1085;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1081; &#1092;&#1072;&#1081;&#1083; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;, <code>./public</code> &#1080; <code>./views</code> &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080;, &#1083;&#1086;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;,
&#1089;&#1090;&#1088;&#1072;&#1085;&#1080;&#1094;&#1072; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1086;&#1073; &#1080;&#1089;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1080;&#1080; &#1080; &#1090;.&#1076;.). &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1090;&#1072;&#1082;&#1086;&#1081; &#1084;&#1077;&#1090;&#1086;&#1076; &#1080;&#1084;&#1077;&#1077;&#1090;
&#1084;&#1085;&#1086;&#1078;&#1077;&#1089;&#1090;&#1074;&#1086; &#1085;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1090;&#1082;&#1086;&#1074; &#1087;&#1088;&#1080; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1080; &#1082;&#1086;&#1084;&#1087;&#1086;&#1085;&#1077;&#1085;&#1090;&#1086;&#1074;, &#1090;&#1072;&#1082;&#1080;&#1093; &#1082;&#1072;&#1082; Rack middleware
("&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1077;&#1082;"), Rails metal, &#1087;&#1088;&#1086;&#1089;&#1090;&#1099;&#1093; &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082; &#1089; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1085;&#1099;&#1084;&#1080; &#1082;&#1086;&#1084;&#1087;&#1086;&#1085;&#1077;&#1085;&#1090;&#1072;&#1084;&#1080;,
&#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1081; Sinatra. &#1048; &#1090;&#1091;&#1090; &#1085;&#1072; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100; &#1087;&#1088;&#1080;&#1093;&#1086;&#1076;&#1080;&#1090; <code>Sinatra::Base</code>:</p>

<pre><code class="ruby">require 'sinatra/base'

class MyApp &lt; Sinatra::Base
  set :sessions, true
  set :foo, 'bar'

  get '/' do
    'Hello world!'
  end
end
</code></pre>

<p>&#1052;&#1077;&#1090;&#1086;&#1076;&#1099;, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; <code>Sinatra::Base</code> &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;&#1072;&#1084; &#1080;&#1076;&#1077;&#1085;&#1090;&#1080;&#1095;&#1085;&#1099; &#1090;&#1077;&#1084;, &#1095;&#1090;&#1086; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;&#1084; &#1074; DSL &#1074;&#1077;&#1088;&#1093;&#1085;&#1077;&#1075;&#1086; &#1091;&#1088;&#1086;&#1074;&#1085;&#1103;. &#1041;&#1086;&#1083;&#1100;&#1096;&#1080;&#1085;&#1089;&#1090;&#1074;&#1086; &#1090;&#1072;&#1082;&#1080;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100;
&#1082;&#1086;&#1085;&#1074;&#1077;&#1088;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1099; &#1074; <code>Sinatra::Base</code> &#1082;&#1086;&#1084;&#1087;&#1086;&#1085;&#1077;&#1085;&#1090;&#1099; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1076;&#1074;&#1091;&#1093; &#1084;&#1086;&#1076;&#1080;&#1092;&#1080;&#1082;&#1072;&#1094;&#1080;&#1081;:</p>

<ul>
<li>&#1042;&#1099; &#1076;&#1086;&#1083;&#1078;&#1085;&#1099; &#1087;&#1086;&#1076;&#1082;&#1083;&#1102;&#1095;&#1072;&#1090;&#1100; <code>sinatra/base</code> &#1074;&#1084;&#1077;&#1089;&#1090;&#1086; <code>sinatra</code>, &#1080;&#1085;&#1072;&#1095;&#1077; &#1074;&#1089;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;,
&#1087;&#1088;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1074;&#1083;&#1103;&#1077;&#1084;&#1099;&#1077; Sinatra, &#1073;&#1091;&#1076;&#1091;&#1090; &#1080;&#1084;&#1087;&#1086;&#1088;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1099; &#1074; &#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1100;&#1085;&#1086;&#1077; &#1087;&#1088;&#1086;&#1089;&#1090;&#1088;&#1072;&#1085;&#1089;&#1090;&#1074;&#1086;
&#1080;&#1084;&#1077;&#1085;.</li>
<li>&#1055;&#1086;&#1084;&#1077;&#1089;&#1090;&#1080;&#1090;&#1077; &#1074;&#1089;&#1077; &#1084;&#1072;&#1088;&#1096;&#1088;&#1091;&#1090;&#1099;, &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1080; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082;, &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1099; &#1080; &#1086;&#1087;&#1094;&#1080;&#1080; &#1074; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;
<code>Sinatra::Base</code>.</li>
</ul>
<p><code>Sinatra::Base</code> &mdash; &#1101;&#1090;&#1086; &#1095;&#1080;&#1089;&#1090;&#1099;&#1081; &#1083;&#1080;&#1089;&#1090;. &#1041;&#1086;&#1083;&#1100;&#1096;&#1080;&#1085;&#1089;&#1090;&#1074;&#1086; &#1086;&#1087;&#1094;&#1080;&#1081;, &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1103; &#1074;&#1089;&#1090;&#1088;&#1086;&#1077;&#1085;&#1085;&#1099;&#1081;
&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;, &#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1086;&#1090;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1099;. &#1057;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077;
<a href="http://www.sinatrarb.com/configuration.html">&#1054;&#1087;&#1094;&#1080;&#1080; &#1080; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1103;</a>
&#1076;&#1083;&#1103; &#1076;&#1077;&#1090;&#1072;&#1083;&#1100;&#1085;&#1086;&#1081; &#1080;&#1085;&#1092;&#1086;&#1088;&#1084;&#1072;&#1094;&#1080;&#1080; &#1086;&#1073; &#1086;&#1087;&#1094;&#1080;&#1103;&#1093; &#1080; &#1080;&#1093; &#1087;&#1086;&#1074;&#1077;&#1076;&#1077;&#1085;&#1080;&#1080;.</p>

<a name='&%231052;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;%20&%231087;&%231088;&%231086;&%231090;&%231080;&%231074;%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231093;'></a>
<h3>&#1052;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1090;&#1080;&#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093;</h3>

<p>&#1042;&#1086;&#1087;&#1088;&#1077;&#1082;&#1080; &#1074;&#1089;&#1077;&#1086;&#1073;&#1097;&#1077;&#1084;&#1091; &#1091;&#1073;&#1077;&#1078;&#1076;&#1077;&#1085;&#1080;&#1102;, &#1074; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1084; &#1089;&#1090;&#1080;&#1083;&#1077; (&#1089;&#1072;&#1084;&#1086;&#1084; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;&#1084;) &#1085;&#1077;&#1090; &#1085;&#1080;&#1095;&#1077;&#1075;&#1086;
&#1087;&#1083;&#1086;&#1093;&#1086;&#1075;&#1086;. &#1045;&#1089;&#1083;&#1080; &#1101;&#1090;&#1086;&#1090; &#1089;&#1090;&#1080;&#1083;&#1100; &#1087;&#1086;&#1076;&#1093;&#1086;&#1076;&#1080;&#1090; &#1074;&#1072;&#1096;&#1077;&#1084;&#1091; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1102;, &#1074;&#1099; &#1085;&#1077; &#1086;&#1073;&#1103;&#1079;&#1072;&#1085;&#1099;
&#1087;&#1077;&#1088;&#1077;&#1087;&#1080;&#1089;&#1099;&#1074;&#1072;&#1090;&#1100; &#1077;&#1075;&#1086; &#1074; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;.</p>

<p>&#1054;&#1089;&#1085;&#1086;&#1074;&#1085;&#1099;&#1084; &#1085;&#1077;&#1076;&#1086;&#1089;&#1090;&#1072;&#1090;&#1082;&#1086;&#1084; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1086;&#1075;&#1086; &#1089;&#1090;&#1080;&#1083;&#1103; &#1103;&#1074;&#1083;&#1103;&#1077;&#1090;&#1089;&#1103; &#1090;&#1086;&#1090; &#1092;&#1072;&#1082;&#1090;, &#1095;&#1090;&#1086; &#1091; &#1074;&#1072;&#1089; &#1084;&#1086;&#1078;&#1077;&#1090;
&#1073;&#1099;&#1090;&#1100; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1076;&#1085;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; Sinatra &#1085;&#1072; &#1086;&#1076;&#1080;&#1085; &#1087;&#1088;&#1086;&#1094;&#1077;&#1089;&#1089; Ruby. &#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1087;&#1083;&#1072;&#1085;&#1080;&#1088;&#1091;&#1077;&#1090;&#1077;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077;, &#1087;&#1077;&#1088;&#1077;&#1082;&#1083;&#1102;&#1095;&#1072;&#1081;&#1090;&#1077;&#1089;&#1100; &#1085;&#1072; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1081; &#1089;&#1090;&#1080;&#1083;&#1100;. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1089;&#1084;&#1077;&#1083;&#1086;
&#1089;&#1084;&#1077;&#1096;&#1080;&#1074;&#1072;&#1090;&#1100; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1081; &#1080; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081; &#1089;&#1090;&#1080;&#1083;&#1080;.</p>

<p>&#1055;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076;&#1103; &#1089; &#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1089;&#1090;&#1080;&#1083;&#1103; &#1085;&#1072; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081;, &#1087;&#1088;&#1080;&#1084;&#1080;&#1090;&#1077; &#1074;&#1086; &#1074;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077; &#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1077; &#1080;&#1079;&#1084;&#1077;&#1085;&#1077;&#1085;&#1080;&#1103; &#1074;
&#1085;&#1072;&#1089;&#1090;&#1088;&#1086;&#1081;&#1082;&#1072;&#1093;:</p>

<pre><code>&#1054;&#1087;&#1094;&#1080;&#1103;               &#1050;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1081;            &#1052;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1081;

app_file            &#1092;&#1072;&#1081;&#1083; &#1089; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;&#1084;      &#1092;&#1072;&#1081;&#1083; &#1089; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1084; Sinatra::Base
run                 $0 == app_file          false
logging             true                    false
method_override     true                    false
inline_templates    true                    false
static              true                    false
</code></pre>

<a name='&%231047;&%231072;&%231087;&%231091;&%231089;&%231082;%20&%231084;&%231086;&%231076;&%231091;&%231083;&%231100;&%231085;&%231099;&%231093;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;'></a>
<h3>&#1047;&#1072;&#1087;&#1091;&#1089;&#1082; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081;</h3>

<p>&#1045;&#1089;&#1090;&#1100; &#1076;&#1074;&#1072; &#1086;&#1073;&#1097;&#1077;&#1087;&#1088;&#1080;&#1085;&#1103;&#1090;&#1099;&#1093; &#1089;&#1087;&#1086;&#1089;&#1086;&#1073;&#1072; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;: &#1079;&#1072;&#1087;&#1091;&#1089;&#1082; &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102;
&#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>run!</code>:</p>

<pre><code class="ruby"># my_app.rb
require 'sinatra/base'

class MyApp &lt; Sinatra::Base
  # ... &#1079;&#1076;&#1077;&#1089;&#1100; &#1082;&#1086;&#1076; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; ...

  # &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;, &#1077;&#1089;&#1083;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1085;&#1103;&#1077;&#1090;&#1089;&#1103; &#1090;&#1077;&#1082;&#1091;&#1097;&#1080;&#1081; &#1092;&#1072;&#1081;&#1083;
  run! if app_file == $0
end
</code></pre>

<p>&#1047;&#1072;&#1090;&#1077;&#1084;:</p>

<pre><code>ruby my_app.rb
</code></pre>

<p>&#1048;&#1083;&#1080; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1086;&#1085;&#1085;&#1086;&#1075;&#1086; &#1092;&#1072;&#1081;&#1083;&#1072; <code>config.ru</code>, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1087;&#1086;&#1079;&#1074;&#1086;&#1083;&#1103;&#1077;&#1090;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1083;&#1102;&#1073;&#1086;&#1081; Rack-&#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1080;&#1084;&#1099;&#1081; &#1089;&#1077;&#1088;&#1074;&#1077;&#1088; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081;.</p>

<pre><code class="ruby"># config.ru
require './my_app'
run MyApp
</code></pre>

<p>&#1047;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084;:</p>

<pre><code>rackup -p 4567
</code></pre>

<a name='&%231047;&%231072;&%231087;&%231091;&%231089;&%231082;%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231080;&%231095;&%231077;&%231089;&%231082;&%231080;&%231093;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;%20&%231089;%20config.ru'></a>
<h3>&#1047;&#1072;&#1087;&#1091;&#1089;&#1082; &#1082;&#1083;&#1072;&#1089;&#1089;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080;&#1093; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; &#1089; config.ru</h3>

<p>&#1060;&#1072;&#1081;&#1083; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;:</p>

<pre><code class="ruby"># app.rb
require 'sinatra'

get '/' do
  'Hello world!'
end
</code></pre>

<p>&#1048; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1102;&#1097;&#1080;&#1081; <code>config.ru</code>:</p>

<pre><code class="ruby">require './app'
run Sinatra::Application
</code></pre>

<a name='&%231050;&%231086;&%231075;&%231076;&%231072;%20&%231080;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231090;&%231100;%20config.ru?'></a>
<h3>&#1050;&#1086;&#1075;&#1076;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; config.ru?</h3>

<p>&#1042;&#1086;&#1090; &#1085;&#1077;&#1089;&#1082;&#1086;&#1083;&#1100;&#1082;&#1086; &#1087;&#1088;&#1080;&#1095;&#1080;&#1085;, &#1087;&#1086; &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084; &#1074;&#1099;, &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1079;&#1072;&#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;
<code>config.ru</code>:</p>

<ul>
<li>&#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1088;&#1072;&#1079;&#1074;&#1086;&#1088;&#1072;&#1095;&#1080;&#1074;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1085;&#1072; &#1088;&#1072;&#1079;&#1083;&#1080;&#1095;&#1085;&#1099;&#1093; Rack-&#1089;&#1086;&#1074;&#1084;&#1077;&#1089;&#1090;&#1080;&#1084;&#1099;&#1093;
&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072;&#1093; (Passenger, Unicorn, Heroku, ...);</li>
<li>&#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1073;&#1086;&#1083;&#1077;&#1077; &#1086;&#1076;&#1085;&#1086;&#1075;&#1086; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; <code>Sinatra::Base</code>;</li>
<li>&#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; Sinatra &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;" Rack.</li>
</ul>
<p><strong>&#1057;&#1086;&#1074;&#1089;&#1077;&#1084; &#1085;&#1077;&#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1087;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076;&#1080;&#1090;&#1100; &#1085;&#1072; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; <code>config.ru</code> &#1083;&#1080;&#1096;&#1100; &#1087;&#1086;&#1090;&#1086;&#1084;&#1091;,
&#1095;&#1090;&#1086; &#1074;&#1099; &#1089;&#1090;&#1072;&#1083;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1081; &#1089;&#1090;&#1080;&#1083;&#1100; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;. &#1048; &#1085;&#1077;&#1086;&#1073;&#1103;&#1079;&#1072;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1084;&#1086;&#1076;&#1091;&#1083;&#1100;&#1085;&#1099;&#1081; &#1089;&#1090;&#1080;&#1083;&#1100;, &#1095;&#1090;&#1086;&#1073;&#1099; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102;
<code>config.ru</code>.</strong></p>

<a name='&%231048;&%231089;&%231087;&%231086;&%231083;&%231100;&%231079;&%231086;&%231074;&%231072;&%231085;&%231080;&%231077;%20Sinatra%20&%231074;%20&%231082;&%231072;&%231095;&%231077;&%231089;&%231090;&%231074;&%231077;%20%22&%231087;&%231088;&%231086;&%231089;&%231083;&%231086;&%231081;&%231082;&%231080;%22'></a>
<h3>&#1048;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077; Sinatra &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;"</h3>

<p>&#1053;&#1077; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1089;&#1072;&#1084;&#1072; Sinatra &#1084;&#1086;&#1078;&#1077;&#1090; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;" Rack, &#1085;&#1086; &#1080; &#1083;&#1102;&#1073;&#1086;&#1077; Sinatra
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089;&#1072;&#1084;&#1086; &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1076;&#1086;&#1073;&#1072;&#1074;&#1083;&#1077;&#1085;&#1086; &#1082; &#1083;&#1102;&#1073;&#1086;&#1084;&#1091; Rack endpoint &#1074; &#1082;&#1072;&#1095;&#1077;&#1089;&#1090;&#1074;&#1077;
"&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1080;". &#1069;&#1090;&#1080;&#1084; endpoint (&#1082;&#1086;&#1085;&#1077;&#1095;&#1085;&#1086;&#1081; &#1090;&#1086;&#1095;&#1082;&#1086;&#1081;) &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100; &#1076;&#1088;&#1091;&#1075;&#1086;&#1077; Sinatra
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;, &#1080;&#1083;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;, &#1086;&#1089;&#1085;&#1086;&#1074;&#1072;&#1085;&#1085;&#1086;&#1077; &#1085;&#1072; Rack (Rails/Ramaze/Camping/...):</p>

<pre><code class="ruby">require 'sinatra/base'

class LoginScreen &lt; Sinatra::Base
  enable :sessions

  get('/login') { haml :login }

  post('/login') do
    if params[:name] == 'admin' &amp;&amp; params[:password] == 'admin'
      session['user_name'] = params[:name]
    else
      redirect '/login'
    end
  end
end

class MyApp &lt; Sinatra::Base
  # "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1072;" &#1073;&#1091;&#1076;&#1077;&#1090; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1072; &#1087;&#1077;&#1088;&#1077;&#1076; &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1084;&#1080;
  use LoginScreen

  before do
    unless session['user_name']
      halt "Access denied, please &lt;a href='/login'&gt;login&lt;/a&gt;."
    end
  end

  get('/') { "Hello #{session['user_name']}." }
end
</code></pre>

<a name='&%231057;&%231086;&%231079;&%231076;&%231072;&%231085;&%231080;&%231077;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231081;%20%22&%231085;&%231072;%20&%231083;&%231077;&%231090;&%231091;%22'></a>
<h3>&#1057;&#1086;&#1079;&#1076;&#1072;&#1085;&#1080;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1081; "&#1085;&#1072; &#1083;&#1077;&#1090;&#1091;"</h3>

<p>&#1048;&#1085;&#1086;&#1075;&#1076;&#1072; &#1090;&#1088;&#1077;&#1073;&#1091;&#1077;&#1090;&#1089;&#1103; &#1089;&#1086;&#1079;&#1076;&#1072;&#1074;&#1072;&#1090;&#1100; Sinatra &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; "&#1085;&#1072; &#1083;&#1077;&#1090;&#1091;" (&#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1080;&#1079; &#1076;&#1088;&#1091;&#1075;&#1086;&#1075;&#1086;
&#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;). &#1069;&#1090;&#1086; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>Sinatra.new</code>:</p>

<pre><code class="ruby">require 'sinatra/base'
my_app = Sinatra.new { get('/') { "hi" } }
my_app.run!
</code></pre>

<p>&#1069;&#1090;&#1086;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076; &#1084;&#1086;&#1078;&#1077;&#1090; &#1087;&#1088;&#1080;&#1085;&#1080;&#1084;&#1072;&#1090;&#1100; &#1072;&#1088;&#1075;&#1091;&#1084;&#1077;&#1085;&#1090;&#1086;&#1084; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077;, &#1086;&#1090; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1075;&#1086; &#1089;&#1083;&#1077;&#1076;&#1091;&#1077;&#1090;
&#1085;&#1072;&#1089;&#1083;&#1077;&#1076;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103;:</p>

<pre><code class="ruby"># config.ru
require 'sinatra/base'

controller = Sinatra.new do
  enable :logging
  helpers MyHelpers
end

map('/a') do
  run Sinatra.new(controller) { get('/') { 'a' } }
end

map('/b') do
  run Sinatra.new(controller) { get('/') { 'b' } }
end
</code></pre>

<p>&#1069;&#1090;&#1086; &#1086;&#1089;&#1086;&#1073;&#1077;&#1085;&#1085;&#1086; &#1087;&#1086;&#1083;&#1077;&#1079;&#1085;&#1086; &#1076;&#1083;&#1103; &#1090;&#1077;&#1089;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1081; Sinatra &#1080; &#1087;&#1088;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080;
Sinatra &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; &#1074;&#1072;&#1096;&#1077;&#1081; &#1073;&#1080;&#1073;&#1083;&#1080;&#1086;&#1090;&#1077;&#1082;&#1080;.</p>

<p>&#1041;&#1083;&#1072;&#1075;&#1086;&#1076;&#1072;&#1088;&#1103; &#1101;&#1090;&#1086;&#1084;&#1091;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; Sinatra &#1082;&#1072;&#1082; "&#1087;&#1088;&#1086;&#1089;&#1083;&#1086;&#1081;&#1082;&#1091;" &#1086;&#1095;&#1077;&#1085;&#1100; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086;:</p>

<pre><code class="ruby">require 'sinatra/base'

use Sinatra do
  get('/') { ... }
end

run RailsProject::Application
</code></pre>

<a name='&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231080;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231080;%20&%231087;&%231088;&%231080;&%231074;&%231103;&%231079;&%231082;&%231072;'></a>
<h2>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1080; &#1087;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1072;</h2>

<p>&#1058;&#1077;&#1082;&#1091;&#1097;&#1072;&#1103; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1103;&#1077;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1080; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1077;, &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;&#1077; &#1074; &#1076;&#1072;&#1085;&#1085;&#1099;&#1081;
&#1084;&#1086;&#1084;&#1077;&#1085;&#1090;.</p>

<a name='&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231087;&%231088;&%231080;&%231083;&%231086;&%231078;&%231077;&%231085;&%231080;&%231103;%20/%20&%231082;&%231083;&%231072;&%231089;&%231089;&%231072;'></a>
<h3>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; / &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;</h3>

<p>&#1051;&#1102;&#1073;&#1086;&#1077; Sinatra &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089;&#1086;&#1086;&#1090;&#1074;&#1077;&#1090;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;&#1091; <code>Sinatra::Base</code>. &#1045;&#1089;&#1083;&#1080; &#1074;&#1099;
&#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; DSL &#1074;&#1077;&#1088;&#1093;&#1085;&#1077;&#1075;&#1086; &#1091;&#1088;&#1086;&#1074;&#1085;&#1103; (<code>require 'sinatra'</code>), &#1090;&#1086; &#1101;&#1090;&#1080;&#1084; &#1082;&#1083;&#1072;&#1089;&#1089;&#1086;&#1084; &#1073;&#1091;&#1076;&#1077;&#1090;
<code>Sinatra::Application</code>, &#1080;&#1085;&#1072;&#1095;&#1077; &#1101;&#1090;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1086;&#1076;&#1082;&#1083;&#1072;&#1089;&#1089;, &#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1081; &#1074;&#1099; &#1089;&#1086;&#1079;&#1076;&#1072;&#1083;&#1080; &#1074;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;.
&#1053;&#1072; &#1091;&#1088;&#1086;&#1074;&#1085;&#1077; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072; &#1074;&#1072;&#1084; &#1073;&#1091;&#1076;&#1091;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; &#1090;&#1072;&#1082;&#1080;&#1077; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;, &#1082;&#1072;&#1082; <code>get</code> &#1080;&#1083;&#1080; <code>before</code>, &#1085;&#1086;
&#1074;&#1099; &#1085;&#1077; &#1089;&#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1072;&#1084; <code>request</code> &#1080;&#1083;&#1080; <code>session</code>, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082;
&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1091;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; &#1086;&#1076;&#1080;&#1085; &#1082;&#1083;&#1072;&#1089;&#1089; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1076;&#1083;&#1103; &#1074;&#1089;&#1077;&#1093; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1086;&#1074;.</p>

<p>&#1054;&#1087;&#1094;&#1080;&#1080;, &#1089;&#1086;&#1079;&#1076;&#1072;&#1085;&#1085;&#1099;&#1077; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>set</code>, &#1103;&#1074;&#1083;&#1103;&#1102;&#1090;&#1089;&#1103; &#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1084;&#1080; &#1091;&#1088;&#1086;&#1074;&#1085;&#1103; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;:</p>

<pre><code class="ruby">class MyApp &lt; Sinatra::Base
  # &#1071; &#1074; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;!
  set :foo, 42
  foo # =&gt; 42

  get '/foo' do
    # &#1071; &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; &#1085;&#1077; &#1074; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;!
  end
end
</code></pre>

<p>&#1059; &#1074;&#1072;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1074;&#1085;&#1091;&#1090;&#1088;&#1080;:</p>

<ul>
<li>&#1090;&#1077;&#1083;&#1072; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;;</li>
<li>&#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;, &#1086;&#1087;&#1088;&#1077;&#1076;&#1077;&#1083;&#1077;&#1085;&#1085;&#1099;&#1093; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1103;&#1084;&#1080;;</li>
<li>&#1073;&#1083;&#1086;&#1082;&#1072;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1074; <code>helpers</code>;</li>
<li>&#1073;&#1083;&#1086;&#1082;&#1086;&#1074;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1085;&#1099;&#1093; &#1082;&#1072;&#1082; &#1079;&#1085;&#1072;&#1095;&#1077;&#1085;&#1080;&#1103; &#1076;&#1083;&#1103; <code>set</code>;</li>
<li>&#1073;&#1083;&#1086;&#1082;&#1072;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1086;&#1075;&#1086; &#1074; <code>Sinatra.new</code>.</li>
</ul>
<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1091; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; (&#1082;&#1083;&#1072;&#1089;&#1089;&#1091; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;)
&#1089;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1084;&#1080; &#1089;&#1087;&#1086;&#1089;&#1086;&#1073;&#1072;&#1084;&#1080;:</p>

<ul>
<li>&#1095;&#1077;&#1088;&#1077;&#1079; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;, &#1087;&#1077;&#1088;&#1077;&#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1073;&#1083;&#1086;&#1082;&#1072;&#1084; &#1082;&#1086;&#1085;&#1092;&#1080;&#1075;&#1091;&#1088;&#1072;&#1094;&#1080;&#1080; (<code>configure { |c| ... }</code>);</li>
<li>
<code>settings</code> &#1074;&#1085;&#1091;&#1090;&#1088;&#1080; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;.</li>
</ul>
<a name='&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231079;&%231072;&%231087;&%231088;&%231086;&%231089;&%231072;/&%231101;&%231082;&%231079;&%231077;&%231084;&%231087;&%231083;&%231103;&%231088;&%231072;'></a>
<h3>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;/&#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088;&#1072;</h3>

<p>&#1044;&#1083;&#1103; &#1082;&#1072;&#1078;&#1076;&#1086;&#1075;&#1086; &#1074;&#1093;&#1086;&#1076;&#1103;&#1097;&#1077;&#1075;&#1086; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1073;&#1091;&#1076;&#1077;&#1090; &#1089;&#1086;&#1079;&#1076;&#1072;&#1085; &#1085;&#1086;&#1074;&#1099;&#1081; &#1101;&#1082;&#1079;&#1077;&#1084;&#1087;&#1083;&#1103;&#1088; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;,
&#1080; &#1074;&#1089;&#1077; &#1073;&#1083;&#1086;&#1082;&#1080; &#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072; &#1073;&#1091;&#1076;&#1091;&#1090; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1099; &#1074; &#1101;&#1090;&#1086;&#1084; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1077;. &#1042; &#1101;&#1090;&#1086;&#1081; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080;
&#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1074;&#1072;&#1084; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099; <code>request</code> &#1080; <code>session</code> &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1099;, &#1074;&#1099;&#1079;&#1086;&#1074;&#1099; &#1084;&#1077;&#1090;&#1086;&#1076;&#1086;&#1074;
&#1088;&#1077;&#1085;&#1076;&#1077;&#1088;&#1080;&#1085;&#1075;&#1072;, &#1090;&#1072;&#1082;&#1080;&#1077; &#1082;&#1072;&#1082; <code>erb</code> &#1080;&#1083;&#1080; <code>haml</code>. &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1087;&#1086;&#1083;&#1091;&#1095;&#1080;&#1090;&#1100; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087; &#1082; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080;
&#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1080;&#1079; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090;&#1072; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1103; &#1084;&#1077;&#1090;&#1086;&#1076;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;
<code>settings</code>:</p>

<pre><code class="ruby">class MyApp &lt; Sinatra::Base
  # &#1071; &#1074; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;!
  get '/define_route/:name' do
    # &#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; '/define_route/:name'
    @value = 42

    settings.get("/#{params[:name]}") do
      # &#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; "/#{params[:name]}"
      @value # =&gt; nil (&#1076;&#1088;&#1091;&#1075;&#1086;&#1081; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;)
    end

    "Route defined!"
  end
end
</code></pre>

<p>&#1059; &#1074;&#1072;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1079;&#1072;&#1087;&#1088;&#1086;&#1089;&#1072; &#1074;:</p>

<ul>
<li>get/head/post/put/delete/options &#1073;&#1083;&#1086;&#1082;&#1072;&#1093;;</li>
<li>before/after &#1092;&#1080;&#1083;&#1100;&#1090;&#1088;&#1072;&#1093;;</li>
<li>&#1084;&#1077;&#1090;&#1086;&#1076;&#1072;&#1093;-&#1087;&#1086;&#1084;&#1086;&#1097;&#1085;&#1080;&#1082;&#1072;&#1093;;</li>
<li>&#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1072;&#1093;/&#1086;&#1090;&#1086;&#1073;&#1088;&#1072;&#1078;&#1077;&#1085;&#1080;&#1103;&#1093;.</li>
</ul>
<a name='&%231054;&%231073;&%231083;&%231072;&%231089;&%231090;&%231100;%20&%231074;&%231080;&%231076;&%231080;&%231084;&%231086;&%231089;&%231090;&%231080;%20&%231076;&%231077;&%231083;&%231077;&%231075;&%231080;&%231088;&%231086;&%231074;&%231072;&%231085;&%231080;&%231103;'></a>
<h3>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;</h3>

<p>&#1054;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1087;&#1088;&#1086;&#1089;&#1090;&#1086; &#1087;&#1077;&#1088;&#1077;&#1085;&#1072;&#1087;&#1088;&#1072;&#1074;&#1083;&#1103;&#1077;&#1090; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1074; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100;
&#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1082;&#1083;&#1072;&#1089;&#1089;&#1072;. &#1054;&#1076;&#1085;&#1072;&#1082;&#1086;, &#1086;&#1085;&#1072; &#1085;&#1077; &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1074;&#1077;&#1076;&#1077;&#1090; &#1089;&#1077;&#1073;&#1103; &#1082;&#1072;&#1082; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1100; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082; &#1091; &#1074;&#1072;&#1089; &#1085;&#1077;&#1090; &#1087;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1080; &#1082; &#1082;&#1083;&#1072;&#1089;&#1089;&#1091;. &#1058;&#1086;&#1083;&#1100;&#1082;&#1086; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099;, &#1103;&#1074;&#1085;&#1086; &#1087;&#1086;&#1084;&#1077;&#1095;&#1077;&#1085;&#1085;&#1099;&#1077;
&#1076;&#1083;&#1103; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;, &#1073;&#1091;&#1076;&#1091;&#1090; &#1076;&#1086;&#1089;&#1090;&#1091;&#1087;&#1085;&#1099;, &#1072; &#1087;&#1077;&#1088;&#1077;&#1084;&#1077;&#1085;&#1085;&#1099;&#1093;/&#1089;&#1086;&#1089;&#1090;&#1086;&#1103;&#1085;&#1080;&#1081; &#1086;&#1073;&#1083;&#1072;&#1089;&#1090;&#1080; &#1074;&#1080;&#1076;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
&#1082;&#1083;&#1072;&#1089;&#1089;&#1072; &#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; (&#1080;&#1085;&#1072;&#1095;&#1077; &#1075;&#1086;&#1074;&#1086;&#1088;&#1103;, &#1091; &#1074;&#1072;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; &#1076;&#1088;&#1091;&#1075;&#1086;&#1081; <code>self</code> &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;). &#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1086; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;&#1100; &#1084;&#1077;&#1090;&#1086;&#1076;&#1099; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;, &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1103;
<code>Sinatra::Delegator.delegate :method_name</code>.</p>

<p>&#1059; &#1074;&#1072;&#1089; &#1073;&#1091;&#1076;&#1077;&#1090; &#1082;&#1086;&#1085;&#1090;&#1077;&#1082;&#1089;&#1090; &#1076;&#1077;&#1083;&#1077;&#1075;&#1080;&#1088;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103; &#1074;&#1085;&#1091;&#1090;&#1088;&#1080;:</p>

<ul>
<li> &#1087;&#1088;&#1080;&#1074;&#1103;&#1079;&#1082;&#1080; &#1074;&#1077;&#1088;&#1093;&#1085;&#1077;&#1075;&#1086; &#1091;&#1088;&#1086;&#1074;&#1085;&#1103;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1089;&#1076;&#1077;&#1083;&#1072;&#1083;&#1080; <code>require 'sinatra'</code>;</li>
<li> &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;&#1072;, &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1085;&#1086;&#1075;&#1086; &#1089; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; <code>Sinatra::Delegator</code>.</li>
</ul>
<p>&#1055;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1089;&#1072;&#1084;&#1080; &#1074; &#1082;&#1086;&#1076;: &#1074;&#1086;&#1090;
<a href="https://github.com/sinatra/sinatra/blob/ca06364/lib/sinatra/base.rb#L1609-1633">&#1087;&#1088;&#1080;&#1084;&#1077;&#1089;&#1100; Sinatra::Delegator</a>
<a href="https://github.com/sinatra/sinatra/blob/ca06364/lib/sinatra/main.rb#L28-30">&#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1103;&#1077;&#1090; &#1075;&#1083;&#1072;&#1074;&#1085;&#1099;&#1081; &#1086;&#1073;&#1098;&#1077;&#1082;&#1090;</a>.</p>

<a name='&%231050;&%231086;&%231084;&%231072;&%231085;&%231076;&%231085;&%231072;&%231103;%20&%231089;&%231090;&%231088;&%231086;&%231082;&%231072;'></a>
<h2>&#1050;&#1086;&#1084;&#1072;&#1085;&#1076;&#1085;&#1072;&#1103; &#1089;&#1090;&#1088;&#1086;&#1082;&#1072;</h2>

<p>Sinatra &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103; &#1084;&#1086;&#1075;&#1091;&#1090; &#1073;&#1099;&#1090;&#1100; &#1079;&#1072;&#1087;&#1091;&#1097;&#1077;&#1085;&#1099; &#1085;&#1072;&#1087;&#1088;&#1103;&#1084;&#1091;&#1102;:</p>

<pre><code>ruby myapp.rb [-h] [-x] [-e ENVIRONMENT] [-p PORT] [-o HOST] [-s HANDLER]
</code></pre>

<p>&#1054;&#1087;&#1094;&#1080;&#1080; &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1102;&#1090;:</p>

<pre><code>-h # &#1088;&#1072;&#1079;&#1076;&#1077;&#1083; &#1087;&#1086;&#1084;&#1086;&#1097;&#1080;
-p # &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1080;&#1077; &#1087;&#1086;&#1088;&#1090;&#1072; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; 4567)
-o # &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1080;&#1077; &#1093;&#1086;&#1089;&#1090;&#1072; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; 0.0.0.0)
-e # &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1080;&#1077; &#1086;&#1082;&#1088;&#1091;&#1078;&#1077;&#1085;&#1080;&#1103;, &#1088;&#1077;&#1078;&#1080;&#1084;&#1072; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; development)
-s # &#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1080;&#1077; rack &#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1072;/&#1086;&#1073;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1072; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; thin)
-x # &#1074;&#1082;&#1083;&#1102;&#1095;&#1080;&#1090;&#1100; &#1084;&#1100;&#1102;&#1090;&#1077;&#1082;&#1089;-&#1073;&#1083;&#1086;&#1082;&#1080;&#1088;&#1086;&#1074;&#1082;&#1091; (&#1087;&#1086; &#1091;&#1084;&#1086;&#1083;&#1095;&#1072;&#1085;&#1080;&#1102; &#1074;&#1099;&#1082;&#1083;&#1102;&#1095;&#1077;&#1085;&#1072;)
</code></pre>

<a name='&%231057;&%231080;&%231089;&%231090;&%231077;&%231084;&%231085;&%231099;&%231077;%20&%231090;&%231088;&%231077;&%231073;&%231086;&%231074;&%231072;&%231085;&%231080;&%231103;'></a>
<h2>&#1057;&#1080;&#1089;&#1090;&#1077;&#1084;&#1085;&#1099;&#1077; &#1090;&#1088;&#1077;&#1073;&#1086;&#1074;&#1072;&#1085;&#1080;&#1103;</h2>

<p>&#1057;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1077; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; Ruby &#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1086; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1102;&#1090;&#1089;&#1103;:</p>

<dl>
<dt>Ruby 1.8.7</dt>
  <dd>1.8.7 &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1090;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1072;&#1089; &#1085;&#1080;&#1095;&#1090;&#1086; &#1085;&#1077; &#1076;&#1077;&#1088;&#1078;&#1080;&#1090; &#1085;&#1072;
    &#1101;&#1090;&#1086;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080;, &#1088;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1091;&#1077;&#1084; &#1086;&#1073;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100;&#1089;&#1103; &#1076;&#1086; 1.9.2 &#1080;&#1083;&#1080; &#1087;&#1077;&#1088;&#1077;&#1081;&#1090;&#1080; &#1085;&#1072; JRuby &#1080;&#1083;&#1080;
    Rubinius. &#1055;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1072; 1.8.7 &#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1088;&#1077;&#1082;&#1088;&#1072;&#1097;&#1077;&#1085;&#1072; &#1076;&#1086; &#1074;&#1099;&#1093;&#1086;&#1076;&#1072; Sinatra 2.0 &#1080; Ruby
    2.0, &#1088;&#1072;&#1079;&#1074;&#1077; &#1095;&#1090;&#1086; &#1074; &#1089;&#1083;&#1091;&#1095;&#1072;&#1077; &#1088;&#1077;&#1083;&#1080;&#1079;&#1072; 1.8.8 (&#1095;&#1090;&#1086; &#1084;&#1072;&#1083;&#1086;&#1074;&#1077;&#1088;&#1086;&#1103;&#1090;&#1085;&#1086;). &#1053;&#1086; &#1076;&#1072;&#1078;&#1077; &#1090;&#1086;&#1075;&#1076;&#1072;,
    &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;, &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1072; &#1085;&#1077; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1088;&#1077;&#1082;&#1088;&#1072;&#1097;&#1077;&#1085;&#1072;. <b>Ruby 1.8.6 &#1073;&#1086;&#1083;&#1100;&#1096;&#1077; &#1085;&#1077;
    &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;.</b> &#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; 1.8.6, &#1086;&#1090;&#1082;&#1072;&#1090;&#1080;&#1090;&#1077;&#1089;&#1100; &#1076;&#1086; Sinatra
    1.2, &#1082;&#1086;&#1090;&#1086;&#1088;&#1072;&#1103; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1086;&#1083;&#1091;&#1095;&#1072;&#1090;&#1100; &#1074;&#1089;&#1077; &#1080;&#1089;&#1087;&#1088;&#1072;&#1074;&#1083;&#1077;&#1085;&#1080;&#1103; &#1086;&#1096;&#1080;&#1073;&#1086;&#1082; &#1076;&#1086; &#1090;&#1077;&#1093; &#1087;&#1086;&#1088;, &#1087;&#1086;&#1082;&#1072; &#1085;&#1077;
    &#1073;&#1091;&#1076;&#1077;&#1090; &#1074;&#1099;&#1087;&#1091;&#1097;&#1077;&#1085;&#1072; Sinatra 1.4.0.</dd>

  <dt>Ruby 1.9.2</dt>
  <dd>1.9.2 &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1080; &#1088;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1086;&#1074;&#1072;&#1085;&#1072; &#1082; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1102;.
    &#1053;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1081;&#1090;&#1077; 1.9.2p0,
    &#1080;&#1079;&#1074;&#1077;&#1089;&#1090;&#1085;&#1086;, &#1095;&#1090;&#1086; &#1101;&#1090;&#1072; &#1074;&#1077;&#1088;&#1089;&#1080;&#1103; &#1086;&#1095;&#1077;&#1085;&#1100; &#1085;&#1077;&#1089;&#1090;&#1072;&#1073;&#1080;&#1083;&#1100;&#1085;&#1072; &#1087;&#1088;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1080; Sinatra. &#1069;&#1090;&#1072;
    &#1074;&#1077;&#1088;&#1089;&#1080;&#1103; &#1073;&#1091;&#1076;&#1077;&#1090; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103; &#1087;&#1086; &#1082;&#1088;&#1072;&#1081;&#1085;&#1077;&#1081; &#1084;&#1077;&#1088;&#1077; &#1076;&#1086; &#1074;&#1099;&#1093;&#1086;&#1076;&#1072; Ruby 1.9.4/2.0, &#1072;
    &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1072; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1077;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; 1.9 &#1073;&#1091;&#1076;&#1077;&#1090; &#1086;&#1089;&#1091;&#1097;&#1077;&#1089;&#1090;&#1074;&#1083;&#1103;&#1090;&#1100;&#1089;&#1103; &#1076;&#1086; &#1090;&#1077;&#1093; &#1087;&#1086;&#1088;, &#1087;&#1086;&#1082;&#1072; &#1086;&#1085;&#1072;
    &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1086;&#1081; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1095;&#1080;&#1082;&#1086;&#1074; Ruby.</dd>

  <dt>Ruby 1.9.3</dt>
  <dd>1.9.3 &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;. &#1047;&#1072;&#1084;&#1077;&#1090;&#1100;&#1090;&#1077;, &#1095;&#1090;&#1086; &#1087;&#1077;&#1088;&#1077;&#1093;&#1086;&#1076; &#1085;&#1072; 1.9.3 &#1089;
    &#1088;&#1072;&#1085;&#1085;&#1080;&#1093; &#1074;&#1077;&#1088;&#1089;&#1080;&#1081; &#1089;&#1076;&#1077;&#1083;&#1072;&#1077;&#1090; &#1085;&#1077;&#1076;&#1077;&#1081;&#1089;&#1090;&#1074;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1084;&#1080; &#1074;&#1089;&#1077; &#1089;&#1077;&#1089;&#1089;&#1080;&#1080;.</dd>

  <dt>Rubinius</dt>
  <dd>Rubinius &#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1086; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; (Rubinius &gt;= 1.2.4), &#1074;&#1089;&#1105;, &#1074;&#1082;&#1083;&#1102;&#1095;&#1072;&#1103; &#1074;&#1089;&#1077;
  &#1103;&#1079;&#1099;&#1082;&#1080; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;, &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090;. &#1055;&#1088;&#1077;&#1076;&#1089;&#1090;&#1086;&#1103;&#1097;&#1080;&#1081; &#1088;&#1077;&#1083;&#1080;&#1079; 2.0 &#1090;&#1072;&#1082;&#1078;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;.</dd>

  <dt>JRuby</dt>
  <dd>JRuby &#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1086; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; (JRuby &gt;= 1.6.5). &#1053;&#1077;&#1090; &#1085;&#1080;&#1082;&#1072;&#1082;&#1080;&#1093; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084; &#1089;
  &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1077;&#1084; &#1072;&#1083;&#1100;&#1090;&#1077;&#1088;&#1085;&#1072;&#1090;&#1080;&#1074;&#1085;&#1099;&#1093; &#1096;&#1072;&#1073;&#1083;&#1086;&#1085;&#1086;&#1074;. &#1058;&#1077;&#1084; &#1085;&#1077; &#1084;&#1077;&#1085;&#1077;&#1077;, &#1077;&#1089;&#1083;&#1080; &#1074;&#1099; &#1074;&#1099;&#1073;&#1080;&#1088;&#1072;&#1077;&#1090;&#1077;
  JRuby, &#1090;&#1086;, &#1087;&#1086;&#1078;&#1072;&#1083;&#1091;&#1081;&#1089;&#1090;&#1072;, &#1087;&#1086;&#1089;&#1084;&#1086;&#1090;&#1088;&#1080;&#1090;&#1077; &#1085;&#1072; JRuby Rack-&#1089;&#1077;&#1088;&#1074;&#1077;&#1088;&#1099;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082; Thin &#1085;&#1077;
  &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103; &#1087;&#1086;&#1083;&#1085;&#1086;&#1089;&#1090;&#1100;&#1102; &#1085;&#1072; JRuby. &#1055;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1082;&#1072; &#1088;&#1072;&#1089;&#1096;&#1080;&#1088;&#1077;&#1085;&#1080;&#1081; &#1085;&#1072; C &#1074; JRuby &#1074;&#1089;&#1077;
  &#1077;&#1097;&#1077; &#1101;&#1082;&#1089;&#1087;&#1077;&#1088;&#1080;&#1084;&#1077;&#1085;&#1090;&#1072;&#1083;&#1100;&#1085;&#1072;&#1103;, &#1095;&#1090;&#1086; &#1085;&#1072; &#1076;&#1072;&#1085;&#1085;&#1099;&#1081; &#1084;&#1086;&#1084;&#1077;&#1085;&#1090; &#1079;&#1072;&#1090;&#1088;&#1072;&#1075;&#1080;&#1074;&#1072;&#1077;&#1090; &#1090;&#1086;&#1083;&#1100;&#1082;&#1086; RDiscount,
  Redcarpet &#1080; RedCloth.</dd>
</dl>
<p>&#1052;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1089;&#1083;&#1077;&#1076;&#1080;&#1084; &#1079;&#1072; &#1087;&#1088;&#1077;&#1076;&#1089;&#1090;&#1086;&#1103;&#1097;&#1080;&#1084;&#1080; &#1082; &#1074;&#1099;&#1093;&#1086;&#1076;&#1091; &#1074;&#1077;&#1088;&#1089;&#1080;&#1103;&#1084;&#1080; Ruby.</p>

<p>&#1057;&#1083;&#1077;&#1076;&#1091;&#1102;&#1097;&#1080;&#1077; &#1088;&#1077;&#1072;&#1083;&#1080;&#1079;&#1072;&#1094;&#1080;&#1080; Ruby &#1085;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1102;&#1090;&#1089;&#1103; &#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1086;, &#1085;&#1086; &#1080;&#1079;&#1074;&#1077;&#1089;&#1090;&#1085;&#1086;, &#1095;&#1090;&#1086; &#1085;&#1072;
&#1085;&#1080;&#1093; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1090;&#1089;&#1103; Sinatra:</p>

<ul>
<li>&#1089;&#1090;&#1072;&#1088;&#1099;&#1077; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; JRuby &#1080; Rubinius;</li>
<li>Ruby Enterprise Edition;</li>
<li>MacRuby, Maglev, IronRuby;</li>
<li>Ruby 1.9.0 &#1080; 1.9.1 (&#1085;&#1072;&#1089;&#1090;&#1086;&#1103;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1085;&#1077; &#1088;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1091;&#1102;&#1090;&#1089;&#1103; &#1082; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1085;&#1080;&#1102;).</li>
</ul>
<p>&#1058;&#1086;, &#1095;&#1090;&#1086; &#1074;&#1077;&#1088;&#1089;&#1080;&#1103; &#1086;&#1092;&#1080;&#1094;&#1080;&#1072;&#1083;&#1100;&#1085;&#1086; &#1085;&#1077; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1086;&#1079;&#1085;&#1072;&#1095;&#1072;&#1077;&#1090;, &#1095;&#1090;&#1086;, &#1077;&#1089;&#1083;&#1080; &#1095;&#1090;&#1086;-&#1090;&#1086; &#1085;&#1077;
&#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &#1085;&#1072; &#1101;&#1090;&#1086;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080;, &#1072; &#1085;&#1072; &#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1077;&#1084;&#1086;&#1081; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1077;&#1090; &mdash; &#1101;&#1090;&#1086; &#1085;&#1077; &#1085;&#1072;&#1096;&#1072; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;&#1072;,
&#1072; &#1080;&#1093;.</p>

<p>&#1052;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084; &#1085;&#1072;&#1096;&#1080; CI-&#1090;&#1077;&#1089;&#1090;&#1099; &#1085;&#1072; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080; Ruby, &#1085;&#1072;&#1093;&#1086;&#1076;&#1103;&#1097;&#1077;&#1081;&#1089;&#1103; &#1074; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1077;
(&#1087;&#1088;&#1077;&#1076;&#1089;&#1090;&#1086;&#1103;&#1097;&#1077;&#1081; 2.0.0), &#1080; &#1085;&#1072; 1.9.4, &#1085;&#1086; &#1084;&#1099; &#1085;&#1077; &#1084;&#1086;&#1078;&#1077;&#1084; &#1085;&#1080;&#1095;&#1077;&#1075;&#1086; &#1075;&#1072;&#1088;&#1072;&#1085;&#1090;&#1080;&#1088;&#1086;&#1074;&#1072;&#1090;&#1100;, &#1090;&#1072;&#1082; &#1082;&#1072;&#1082;
&#1086;&#1085;&#1080; &#1085;&#1072;&#1093;&#1086;&#1076;&#1103;&#1090;&#1089;&#1103; &#1074; &#1088;&#1072;&#1079;&#1088;&#1072;&#1073;&#1086;&#1090;&#1082;&#1077;. &#1055;&#1088;&#1077;&#1076;&#1087;&#1086;&#1083;&#1072;&#1075;&#1072;&#1077;&#1090;&#1089;&#1103;, &#1095;&#1090;&#1086; 1.9.4p0 &#1080; 2.0.0p0 &#1073;&#1091;&#1076;&#1091;&#1090;
&#1087;&#1086;&#1076;&#1076;&#1077;&#1088;&#1078;&#1080;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103;.</p>

<p>Sinatra &#1076;&#1086;&#1083;&#1078;&#1085;&#1072; &#1088;&#1072;&#1073;&#1086;&#1090;&#1072;&#1090;&#1100; &#1085;&#1072; &#1083;&#1102;&#1073;&#1086;&#1081; &#1086;&#1087;&#1077;&#1088;&#1072;&#1094;&#1080;&#1086;&#1085;&#1085;&#1086;&#1081; &#1089;&#1080;&#1089;&#1090;&#1077;&#1084;&#1077;, &#1074; &#1082;&#1086;&#1090;&#1086;&#1088;&#1086;&#1081; &#1077;&#1089;&#1090;&#1100; &#1086;&#1076;&#1085;&#1072; &#1080;&#1079;
&#1091;&#1082;&#1072;&#1079;&#1072;&#1085;&#1085;&#1099;&#1093; &#1074;&#1099;&#1096;&#1077; &#1074;&#1077;&#1088;&#1089;&#1080;&#1081; Ruby.</p>

<p>&#1055;&#1086;&#1082;&#1072; &#1085;&#1077;&#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086; &#1079;&#1072;&#1087;&#1091;&#1089;&#1090;&#1080;&#1090;&#1100; Sinatra &#1085;&#1072; Cardinal, SmallRuby, BlueRuby &#1080; &#1085;&#1072; &#1083;&#1102;&#1073;&#1086;&#1081;
&#1074;&#1077;&#1088;&#1089;&#1080;&#1080; Ruby &#1076;&#1086; 1.8.7.</p>

<a name='&%231053;&%231072;%20&%231086;&%231089;&%231090;&%231088;&%231080;&%231077;'></a>
<h2>&#1053;&#1072; &#1086;&#1089;&#1090;&#1088;&#1080;&#1077;</h2>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; &#1089;&#1072;&#1084;&#1099;&#1081; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1080;&#1081; &#1082;&#1086;&#1076; Sinatra, &#1085;&#1077; &#1073;&#1086;&#1081;&#1090;&#1077;&#1089;&#1100; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100;
&#1089;&#1074;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1074;&#1084;&#1077;&#1089;&#1090;&#1077; &#1089; &#1082;&#1086;&#1076;&#1086;&#1084; &#1080;&#1079; master &#1074;&#1077;&#1090;&#1082;&#1080; Sinatra, &#1086;&#1085;&#1072; &#1074;&#1077;&#1089;&#1100;&#1084;&#1072; &#1089;&#1090;&#1072;&#1073;&#1080;&#1083;&#1100;&#1085;&#1072;.</p>

<p>&#1052;&#1099; &#1090;&#1072;&#1082;&#1078;&#1077; &#1074;&#1088;&#1077;&#1084;&#1103; &#1086;&#1090; &#1074;&#1088;&#1077;&#1084;&#1077;&#1085;&#1080; &#1074;&#1099;&#1087;&#1091;&#1089;&#1082;&#1072;&#1077;&#1084; &#1087;&#1088;&#1077;&#1076;&#1074;&#1072;&#1088;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1099;&#1077; &#1074;&#1077;&#1088;&#1089;&#1080;&#1080;, &#1090;&#1072;&#1082; &#1095;&#1090;&#1086; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077;
&#1076;&#1077;&#1083;&#1072;&#1090;&#1100; &#1090;&#1072;&#1082;:</p>

<pre><code>gem install sinatra --pre
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1074;&#1086;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100;&#1089;&#1103; &#1085;&#1077;&#1082;&#1086;&#1090;&#1086;&#1088;&#1099;&#1084;&#1080; &#1089;&#1072;&#1084;&#1099;&#1084;&#1080; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1080;&#1084;&#1080; &#1074;&#1086;&#1079;&#1084;&#1086;&#1078;&#1085;&#1086;&#1089;&#1090;&#1103;&#1084;&#1080;.</p>

<a name='&%231057;%20&%231087;&%231086;&%231084;&%231086;&%231097;&%231100;&%231102;%20Bundler'></a>
<h3>&#1057; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;&#1102; Bundler</h3>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1093;&#1086;&#1090;&#1080;&#1090;&#1077; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1077;&#1081; &#1074;&#1077;&#1088;&#1089;&#1080;&#1077;&#1081; Sinatra, &#1090;&#1086;
&#1088;&#1077;&#1082;&#1086;&#1084;&#1077;&#1085;&#1076;&#1091;&#1077;&#1084; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1100; <a href="http://gembundler.com/">Bundler</a>.</p>

<p>&#1057;&#1085;&#1072;&#1095;&#1072;&#1083;&#1072; &#1091;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1080;&#1090;&#1077; Bundler, &#1077;&#1089;&#1083;&#1080; &#1091; &#1074;&#1072;&#1089; &#1077;&#1075;&#1086; &#1077;&#1097;&#1077; &#1085;&#1077;&#1090;:</p>

<pre><code>gem install bundler
</code></pre>

<p>&#1047;&#1072;&#1090;&#1077;&#1084; &#1089;&#1086;&#1079;&#1076;&#1072;&#1081;&#1090;&#1077; &#1092;&#1072;&#1081;&#1083; <code>Gemfile</code> &#1074; &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1080; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1087;&#1088;&#1086;&#1077;&#1082;&#1090;&#1072;:</p>

<pre><code class="ruby">source :rubygems
gem 'sinatra', :git =&gt; "git://github.com/sinatra/sinatra.git"

# &#1076;&#1088;&#1091;&#1075;&#1080;&#1077; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080;
gem 'haml'                    # &#1085;&#1072;&#1087;&#1088;&#1080;&#1084;&#1077;&#1088;, &#1077;&#1089;&#1083;&#1080; &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090;&#1077; haml
gem 'activerecord', '~&gt; 3.0'  # &#1084;&#1086;&#1078;&#1077;&#1090; &#1073;&#1099;&#1090;&#1100;, &#1074;&#1072;&#1084; &#1085;&#1091;&#1078;&#1077;&#1085; &#1080; ActiveRecord 3.x
</code></pre>

<p>&#1054;&#1073;&#1088;&#1072;&#1090;&#1080;&#1090;&#1077; &#1074;&#1085;&#1080;&#1084;&#1072;&#1085;&#1080;&#1077;, &#1074;&#1072;&#1084; &#1085;&#1091;&#1078;&#1085;&#1086; &#1073;&#1091;&#1076;&#1077;&#1090; &#1091;&#1082;&#1072;&#1079;&#1099;&#1074;&#1072;&#1090;&#1100; &#1074;&#1089;&#1077; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; &#1074;&#1072;&#1096;&#1077;&#1075;&#1086; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1103;
&#1074; &#1101;&#1090;&#1086;&#1084; &#1092;&#1072;&#1081;&#1083;&#1077;. &#1054;&#1076;&#1085;&#1072;&#1082;&#1086;, &#1085;&#1077;&#1087;&#1086;&#1089;&#1088;&#1077;&#1076;&#1089;&#1090;&#1074;&#1077;&#1085;&#1085;&#1099;&#1077; &#1079;&#1072;&#1074;&#1080;&#1089;&#1080;&#1084;&#1086;&#1089;&#1090;&#1080; Sinatra (Rack &#1080; Tilt)
Bundler &#1072;&#1074;&#1090;&#1086;&#1084;&#1072;&#1090;&#1080;&#1095;&#1077;&#1089;&#1082;&#1080; &#1089;&#1082;&#1072;&#1095;&#1072;&#1077;&#1090; &#1080; &#1076;&#1086;&#1073;&#1072;&#1074;&#1080;&#1090;.</p>

<p>&#1058;&#1077;&#1087;&#1077;&#1088;&#1100; &#1074;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1090;&#1100; &#1089;&#1074;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1090;&#1072;&#1082;:</p>

<pre><code>bundle exec ruby myapp.rb
</code></pre>

<a name='&%231042;&%231088;&%231091;&%231095;&%231085;&%231091;&%231102;'></a>
<h3>&#1042;&#1088;&#1091;&#1095;&#1085;&#1091;&#1102;</h3>

<p>&#1057;&#1086;&#1079;&#1076;&#1072;&#1081;&#1090;&#1077; &#1083;&#1086;&#1082;&#1072;&#1083;&#1100;&#1085;&#1099;&#1081; &#1082;&#1083;&#1086;&#1085; &#1088;&#1077;&#1087;&#1086;&#1079;&#1080;&#1090;&#1086;&#1088;&#1080;&#1103; &#1080; &#1079;&#1072;&#1087;&#1091;&#1089;&#1082;&#1072;&#1081;&#1090;&#1077; &#1089;&#1074;&#1086;&#1077; &#1087;&#1088;&#1080;&#1083;&#1086;&#1078;&#1077;&#1085;&#1080;&#1077; &#1089;
<code>sinatra/lib</code> &#1076;&#1080;&#1088;&#1077;&#1082;&#1090;&#1086;&#1088;&#1080;&#1077;&#1081; &#1074; <code>$LOAD_PATH</code>:</p>

<pre><code>cd myapp
git clone git://github.com/sinatra/sinatra.git
ruby -Isinatra/lib myapp.rb
</code></pre>

<p>&#1063;&#1090;&#1086;&#1073;&#1099; &#1086;&#1073;&#1085;&#1086;&#1074;&#1080;&#1090;&#1100; &#1080;&#1089;&#1093;&#1086;&#1076;&#1085;&#1080;&#1082;&#1080; Sinatra:</p>

<pre><code>cd myapp/sinatra
git pull
</code></pre>

<a name='&%231059;&%231089;&%231090;&%231072;&%231085;&%231086;&%231074;&%231082;&%231072;%20&%231075;&%231083;&%231086;&%231073;&%231072;&%231083;&%231100;&%231085;&%231086;'></a>
<h3>&#1059;&#1089;&#1090;&#1072;&#1085;&#1086;&#1074;&#1082;&#1072; &#1075;&#1083;&#1086;&#1073;&#1072;&#1083;&#1100;&#1085;&#1086;</h3>

<p>&#1042;&#1099; &#1084;&#1086;&#1078;&#1077;&#1090;&#1077; &#1089;&#1072;&#1084;&#1086;&#1089;&#1090;&#1086;&#1103;&#1090;&#1077;&#1083;&#1100;&#1085;&#1086; &#1089;&#1086;&#1073;&#1088;&#1072;&#1090;&#1100; gem:</p>

<pre><code>git clone git://github.com/sinatra/sinatra.git
cd sinatra
rake sinatra.gemspec
rake install
</code></pre>

<p>&#1045;&#1089;&#1083;&#1080; &#1074;&#1099; &#1091;&#1089;&#1090;&#1072;&#1085;&#1072;&#1074;&#1083;&#1080;&#1074;&#1072;&#1077;&#1090;&#1077; &#1087;&#1072;&#1082;&#1077;&#1090;&#1099; (gem) &#1086;&#1090; &#1087;&#1086;&#1083;&#1100;&#1079;&#1086;&#1074;&#1072;&#1090;&#1077;&#1083;&#1103; root, &#1090;&#1086; &#1074;&#1072;&#1096;&#1080;&#1084; &#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1080;&#1084;
&#1096;&#1072;&#1075;&#1086;&#1084; &#1076;&#1086;&#1083;&#1078;&#1085;&#1072; &#1073;&#1099;&#1090;&#1100; &#1082;&#1086;&#1084;&#1072;&#1085;&#1076;&#1072;</p>

<pre><code>sudo rake install
</code></pre>

<a name='&%231042;&%231077;&%231088;&%231089;&%231080;&%231080;'></a>
<h2>&#1042;&#1077;&#1088;&#1089;&#1080;&#1080;</h2>

<p>Sinatra &#1080;&#1089;&#1087;&#1086;&#1083;&#1100;&#1079;&#1091;&#1077;&#1090; <a href="http://semver.org/">Semantic Versioning</a>, SemVer &#1080;
SemVerTag.</p>

<a name='&%231044;&%231072;&%231083;&%231100;&%231085;&%231077;&%231081;&%231096;&%231077;&%231077;%20&%231095;&%231090;&%231077;&%231085;&%231080;&%231077;'></a>
<h2>&#1044;&#1072;&#1083;&#1100;&#1085;&#1077;&#1081;&#1096;&#1077;&#1077; &#1095;&#1090;&#1077;&#1085;&#1080;&#1077;</h2>

<ul>
<li>
<a href="http://www.sinatrarb.com/">&#1042;&#1077;&#1073;-&#1089;&#1072;&#1081;&#1090; &#1087;&#1088;&#1086;&#1077;&#1082;&#1090;&#1072;</a> &mdash; &#1044;&#1086;&#1087;&#1086;&#1083;&#1085;&#1080;&#1090;&#1077;&#1083;&#1100;&#1085;&#1072;&#1103;
&#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103;, &#1085;&#1086;&#1074;&#1086;&#1089;&#1090;&#1080; &#1080; &#1089;&#1089;&#1099;&#1083;&#1082;&#1080; &#1085;&#1072; &#1076;&#1088;&#1091;&#1075;&#1080;&#1077; &#1088;&#1077;&#1089;&#1091;&#1088;&#1089;&#1099;.</li>
<li>
<a href="http://www.sinatrarb.com/contributing">&#1059;&#1095;&#1072;&#1089;&#1090;&#1080;&#1077; &#1074; &#1087;&#1088;&#1086;&#1077;&#1082;&#1090;&#1077;</a> &mdash; &#1054;&#1073;&#1085;&#1072;&#1088;&#1091;&#1078;&#1080;&#1083;&#1080;
&#1073;&#1072;&#1075;? &#1053;&#1091;&#1078;&#1085;&#1072; &#1087;&#1086;&#1084;&#1086;&#1097;&#1100;? &#1053;&#1072;&#1087;&#1080;&#1089;&#1072;&#1083;&#1080; &#1087;&#1072;&#1090;&#1095;?</li>
<li><a href="http://github.com/sinatra/sinatra/issues">&#1057;&#1083;&#1077;&#1078;&#1077;&#1085;&#1080;&#1077; &#1079;&#1072; &#1087;&#1088;&#1086;&#1073;&#1083;&#1077;&#1084;&#1072;&#1084;&#1080;/&#1086;&#1096;&#1080;&#1073;&#1082;&#1072;&#1084;&#1080;</a></li>
<li><a href="http://twitter.com/sinatra">Twitter</a></li>
<li><a href="http://groups.google.com/group/sinatrarb/topics">&#1043;&#1088;&#1091;&#1087;&#1087;&#1099; &#1088;&#1072;&#1089;&#1089;&#1099;&#1083;&#1082;&#1080;</a></li>
<li>
<a href="irc://chat.freenode.net/#sinatra">#sinatra</a> &#1085;&#1072; http://freenode.net</li>
<li>
<a href="http://sinatra-book.gittr.com">Sinatra Book</a> &#1091;&#1095;&#1077;&#1073;&#1085;&#1080;&#1082; &#1080; &#1089;&#1073;&#1086;&#1088;&#1085;&#1080;&#1082; &#1088;&#1077;&#1094;&#1077;&#1087;&#1090;&#1086;&#1074;</li>
<li>
<a href="http://recipes.sinatrarb.com/">Sinatra Recipes</a> &#1089;&#1073;&#1086;&#1088;&#1085;&#1080;&#1082; &#1088;&#1077;&#1094;&#1077;&#1087;&#1090;&#1086;&#1074;</li>
<li>API &#1076;&#1086;&#1082;&#1091;&#1084;&#1077;&#1085;&#1090;&#1072;&#1094;&#1080;&#1103; &#1082; <a href="http://rubydoc.info/gems/sinatra">&#1087;&#1086;&#1089;&#1083;&#1077;&#1076;&#1085;&#1077;&#1084;&#1091; &#1088;&#1077;&#1083;&#1080;&#1079;&#1091;</a>
&#1080;&#1083;&#1080; <a href="http://rubydoc.info/github/sinatra/sinatra">&#1090;&#1077;&#1082;&#1091;&#1097;&#1077;&#1084;&#1091; HEAD</a> &#1085;&#1072;
http://rubydoc.info</li>
<li><a href="http://travis-ci.org/sinatra/sinatra">&#1057;&#1077;&#1088;&#1074;&#1077;&#1088; &#1085;&#1077;&#1087;&#1088;&#1077;&#1088;&#1099;&#1074;&#1085;&#1086;&#1081; &#1080;&#1085;&#1090;&#1077;&#1075;&#1088;&#1072;&#1094;&#1080;&#1080;</a></li>
</ul>
</body></html>
