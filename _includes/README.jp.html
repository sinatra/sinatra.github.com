<div class='toc'>
	<ol class='level-1'>
		<li><a href='#&%2312523;&%2312540;&%2312488;'>&#12523;&#12540;&#12488;</a></li>
		<ol class='level-2'>
			<li><a href='#&%2326465;&%2320214;'>&#26465;&#20214;</a></li>
			<li><a href='#&%2325147;&%2312426;&%2320516;'>&#25147;&#12426;&#20516;</a></li>
		</ol>
		<li><a href='#&%2338745;&%2330340;&%2312501;&%2312449;&%2312452;&%2312523;'>&#38745;&#30340;&#12501;&#12449;&#12452;&#12523;</a></li>
		<li><a href='#&%2312499;&%2312517;&%2312540;%20/%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>&#12499;&#12517;&#12540; / &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
		<ol class='level-2'>
			<li><a href='#Haml%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Haml &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Erb%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Erb &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Erubis'>Erubis</a></li>
			<li><a href='#Builder%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Builder &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#&%2337624;%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>&#37624; &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Sass%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Sass &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Scss%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Scss &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Less%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Less &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Liquid%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Liquid &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Markdown%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Markdown &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Textile%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Textile &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#RDoc%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>RDoc &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Radius%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Radius &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Markaby%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Markaby &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#RABL%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>RABL &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Slim%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Slim &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#Creole%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>Creole &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#CoffeeScript%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>CoffeeScript &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#&%2312452;&%2312531;&%2312521;&%2312452;&%2312531;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>&#12452;&#12531;&#12521;&#12452;&#12531;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;&%2320869;&%2312391;&%2322793;&%2325968;&%2312395;&%2312450;&%2312463;&%2312475;&%2312473;&%2312377;&%2312427;'>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#20869;&#12391;&#22793;&#25968;&#12395;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;</a></li>
			<li><a href='#&%2312501;&%2312449;&%2312452;&%2312523;&%2320869;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>&#12501;&#12449;&#12452;&#12523;&#20869;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
			<li><a href='#&%2321517;&%2321069;&%2320184;&%2312365;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'>&#21517;&#21069;&#20184;&#12365;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</a></li>
		</ol>
		<li><a href='#&%2312504;&%2312523;&%2312497;&%2312540;'>&#12504;&#12523;&#12497;&#12540;</a></li>
		<li><a href='#&%2312501;&%2312451;&%2312523;&%2312479;'>&#12501;&#12451;&#12523;&#12479;</a></li>
		<li><a href='#&%2324375;&%2321046;&%2332066;&%2320102;'>&#24375;&#21046;&#32066;&#20102;</a></li>
		<li><a href='#&%2312497;&%2312483;&%2312471;&%2312531;&%2312464;(Passing)'>&#12497;&#12483;&#12471;&#12531;&#12464;(Passing)</a></li>
		<li><a href='#&%2312522;&%2312463;&%2312456;&%2312473;&%2312488;&%2312458;&%2312502;&%2312472;&%2312455;&%2312463;&%2312488;&%2312408;&%2312398;&%2312450;&%2312463;&%2312475;&%2312473;'>&#12522;&#12463;&#12456;&#12473;&#12488;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12408;&#12398;&#12450;&#12463;&#12475;&#12473;</a></li>
		<li><a href='#&%2335373;&%2323450;'>&#35373;&#23450;</a></li>
		<li><a href='#&%2312456;&%2312521;&%2312540;&%2312495;&%2312531;&%2312489;&%2312522;&%2312531;&%2312464;'>&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12522;&#12531;&#12464;</a></li>
		<ol class='level-2'>
			<li><a href='#Not%20Found'>Not Found</a></li>
			<li><a href='#&%2312456;&%2312521;&%2312540;'>&#12456;&#12521;&#12540;</a></li>
		</ol>
		<li><a href='#MIME&%2312479;&%2312452;&%2312503;'>MIME&#12479;&#12452;&#12503;</a></li>
		<li><a href='#Rack&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;'>Rack&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;</a></li>
		<li><a href='#&%2312486;&%2312473;&%2312488;'>&#12486;&#12473;&#12488;</a></li>
		<li><a href='#Sinatra::Base%20-%20&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;&%2312289;&%2312521;&%2312452;&%2312502;&%2312521;&%2312522;&%2312289;%20&%2312514;&%2312472;&%2312517;&%2312521;&%2312540;&%2312450;&%2312503;&%2312522;'>Sinatra::Base - &#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12289;&#12521;&#12452;&#12502;&#12521;&#12522;&#12289; &#12514;&#12472;&#12517;&#12521;&#12540;&#12450;&#12503;&#12522;</a></li>
		<ol class='level-2'>
			<li><a href='#Sinatra&%2312434;&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;&%2312392;&%2312375;&%2312390;&%2321033;&%2329992;&%2312377;&%2312427;'>Sinatra&#12434;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12392;&#12375;&#12390;&#21033;&#29992;&#12377;&#12427;</a></li>
		</ol>
		<li><a href='#&%2312473;&%2312467;&%2312540;&%2312503;&%2312392;&%2312496;&%2312452;&%2312531;&%2312487;&%2312451;&%2312531;&%2312464;'>&#12473;&#12467;&#12540;&#12503;&#12392;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;</a></li>
		<ol class='level-2'>
			<li><a href='#&%2312450;&%2312503;&%2312522;&%2312465;&%2312540;&%2312471;&%2312519;&%2312531;/&%2312463;&%2312521;&%2312473;&%2312398;&%2312473;&%2312467;&%2312540;&%2312503;'>&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;/&#12463;&#12521;&#12473;&#12398;&#12473;&#12467;&#12540;&#12503;</a></li>
			<li><a href='#&%2312522;&%2312463;&%2312456;&%2312473;&%2312488;/&%2312452;&%2312531;&%2312473;&%2312479;&%2312531;&%2312473;&%2312398;&%2312473;&%2312467;&%2312540;&%2312503;'>&#12522;&#12463;&#12456;&#12473;&#12488;/&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12398;&#12473;&#12467;&#12540;&#12503;</a></li>
			<li><a href='#&%2312487;&%2312522;&%2312466;&%2312540;&%2312488;&%2312473;&%2312467;&%2312540;&%2312503;'>&#12487;&#12522;&#12466;&#12540;&#12488;&#12473;&#12467;&#12540;&#12503;</a></li>
		</ol>
		<li><a href='#&%2312467;&%2312510;&%2312531;&%2312489;&%2312521;&%2312452;&%2312531;'>&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;</a></li>
		<li><a href='#&%2326368;&%2326032;&%2338283;&%2330330;&%2329256;&%2312395;&%2312388;&%2312356;&%2312390;'>&#26368;&#26032;&#38283;&#30330;&#29256;&#12395;&#12388;&#12356;&#12390;</a></li>
		<li><a href='#&%2312381;&%2312398;&%2320182;'>&#12381;&#12398;&#20182;</a></li>
	</ol>
</div>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>

<p><em>&#27880;&#65289;
&#26412;&#25991;&#26360;&#12399;&#33521;&#35486;&#12363;&#12425;&#32763;&#35379;&#12375;&#12383;&#12418;&#12398;&#12391;&#12354;&#12426;&#12289;&#12381;&#12398;&#20869;&#23481;&#12364;&#26368;&#26032;&#12391;&#12394;&#12356;&#22580;&#21512;&#12418;&#12354;&#12426;&#12414;&#12377;&#12290;&#26368;&#26032;&#12398;&#24773;&#22577;&#12399;&#12458;&#12522;&#12472;&#12490;&#12523;&#12398;&#33521;&#35486;&#29256;&#12434;&#21442;&#29031;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</em></p>

<p><a href="http://ja.wikipedia.org/wiki/%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E5%9B%BA%E6%9C%89%E8%A8%80%E8%AA%9E">DSL</a>&#12391;&#12377;&#12290;</p>

<pre><code># myapp.rb
require 'sinatra'
get '/' do
  'Hello world!'
end
</code></pre>

<p>gem&#12434;&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12390;&#21205;&#12363;&#12375;&#12390;&#12415;&#12427;&#12290;</p>

<pre><code>gem install sinatra
ruby myapp.rb
</code></pre>

<p><a href="http://localhost:4567">localhost:4567</a> &#12434;&#35211;&#12427;&#12290;</p>

<a name='&%2312523;&%2312540;&%2312488;'></a>
<h2>&#12523;&#12540;&#12488;</h2>

<p>Sinatra&#12391;&#12399;&#12289;&#12523;&#12540;&#12488;&#12399;HTTP&#12513;&#12477;&#12483;&#12489;&#12392;URL&#12510;&#12483;&#12481;&#12531;&#12464;&#12497;&#12479;&#12540;&#12531;&#12364;&#12506;&#12450;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
&#12523;&#12540;&#12488;&#12399;&#12502;&#12525;&#12483;&#12463;&#12395;&#32080;&#12403;&#20184;&#12369;&#12425;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

<pre><code>get '/' do
  .. &#20309;&#12363;&#35211;&#12379;&#12427; ..
end

post '/' do
  .. &#20309;&#12363;&#29983;&#25104;&#12377;&#12427; ..
end

put '/' do
  .. &#20309;&#12363;&#26356;&#26032;&#12377;&#12427; ..
end

delete '/' do
  .. &#20309;&#12363;&#21066;&#38500;&#12377;&#12427; ..
end
</code></pre>

<p>&#12523;&#12540;&#12488;&#12399;&#23450;&#32681;&#12373;&#12428;&#12383;&#38918;&#30058;&#12395;&#12510;&#12483;&#12481;&#12375;&#12414;&#12377;&#12290;
&#12522;&#12463;&#12456;&#12473;&#12488;&#12395;&#26368;&#21021;&#12395;&#12510;&#12483;&#12481;&#12375;&#12383;&#12523;&#12540;&#12488;&#12364;&#21628;&#12403;&#20986;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

<p>&#12523;&#12540;&#12488;&#12398;&#12497;&#12479;&#12540;&#12531;&#12399;&#21517;&#21069;&#20184;&#12365;&#12497;&#12521;&#12513;&#12540;&#12479;&#12434;&#21547;&#12416;&#12371;&#12392;&#12364;&#12391;&#12365;&#12289;
<code>params</code>&#12495;&#12483;&#12471;&#12517;&#12391;&#21462;&#24471;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/hello/:name' do
  # matches "GET /hello/foo" and "GET /hello/bar"
  # params[:name] is 'foo' or 'bar'
  "Hello #{params[:name]}!"
end
</code></pre>

<p>&#12414;&#12383;&#12289;&#12502;&#12525;&#12483;&#12463;&#12497;&#12521;&#12513;&#12540;&#12479;&#12391;&#21517;&#21069;&#20184;&#12365;&#12497;&#12521;&#12513;&#12540;&#12479;&#12395;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/hello/:name' do |n|
  "Hello #{n}!"
end
</code></pre>

<p>&#12523;&#12540;&#12488;&#12497;&#12479;&#12540;&#12531;&#12399;splat(&#12414;&#12383;&#12399;&#12527;&#12452;&#12523;&#12489;&#12459;&#12540;&#12489;)&#12434;&#21547;&#12416;&#12371;&#12392;&#12418;&#12391;&#12365;&#12289;
<code>params[:splat]</code> &#12391;&#21462;&#24471;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/say/*/to/*' do
  # matches /say/hello/to/world
  params[:splat] # =&gt; ["hello", "world"]
end

get '/download/*.*' do
  # matches /download/path/to/file.xml
  params[:splat] # =&gt; ["path/to/file", "xml"]
end
</code></pre>

<p>&#12502;&#12525;&#12483;&#12463;&#12497;&#12521;&#12540;&#12513;&#12540;&#12479;&#12434;&#20351;&#29992;&#12375;&#12383;&#22580;&#21512;:</p>

<pre><code>get '/download/*.*' do |path, ext|
  [path, ext] # =&gt; ["path/to/file", "xml"]
end
</code></pre>

<p>&#27491;&#35215;&#34920;&#29694;&#12434;&#20351;&#12387;&#12383;&#12523;&#12540;&#12488;:</p>

<pre><code>get %r{/hello/([\w]+)} do
  "Hello, #{params[:captures].first}!"
end
</code></pre>

<p>&#12502;&#12525;&#12483;&#12463;&#12497;&#12521;&#12540;&#12513;&#12540;&#12479;&#12434;&#20351;&#29992;&#12375;&#12383;&#22580;&#21512;:</p>

<pre><code>get %r{/hello/([\w]+)} do |c|
  "Hello, #{c}!"
end
</code></pre>

<a name='&%2326465;&%2320214;'></a>
<h3>&#26465;&#20214;</h3>

<p>&#12523;&#12540;&#12488;&#12395;&#12399;&#12518;&#12540;&#12470;&#12456;&#12540;&#12472;&#12455;&#12531;&#12488;&#12398;&#12424;&#12358;&#12394;&#12373;&#12414;&#12374;&#12414;&#12394;&#26465;&#20214;&#12434;&#21547;&#12417;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/foo', :agent =&gt; /Songbird (\d\.\d)[\d\/]*?/ do
  "You're using Songbird version #{params[:agent][0]}"
end

get '/foo' do
  # Matches non-songbird browsers
end
</code></pre>

<p>&#12411;&#12363;&#12395;<code>host_name</code>&#12392;<code>provides</code>&#26465;&#20214;&#12364;&#21033;&#29992;&#21487;&#33021;&#12391;&#12377;:</p>

<pre><code>get '/', :host_name =&gt; /^admin\./ do
  "Admin Area, Access denied!"
end

get '/', :provides =&gt; 'html' do
  haml :index
end

get '/', :provides =&gt; ['rss', 'atom', 'xml'] do
  builder :feed
end
</code></pre>

<p>&#29420;&#33258;&#12398;&#26465;&#20214;&#12434;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12418;&#31777;&#21336;&#12395;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>set(:probability) { |value| condition { rand &lt;= value } }

get '/win_a_car', :probability =&gt; 0.1 do
  "You won!"
end

get '/win_a_car' do
  "Sorry, you lost."
end
</code></pre>

<a name='&%2325147;&%2312426;&%2320516;'></a>
<h3>&#25147;&#12426;&#20516;</h3>

<p>&#12523;&#12540;&#12488;&#12502;&#12525;&#12483;&#12463;&#12398;&#25147;&#12426;&#20516;&#12399;&#12289;HTTP&#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12414;&#12383;&#12399;Rack&#12473;&#12479;&#12483;&#12463;&#12391;&#12398;&#27425;&#12398;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12395;&#28193;&#12373;&#12428;&#12427;&#12524;&#12473;&#12509;&#12531;&#12473;&#12508;&#12487;&#12451;&#12434;&#27770;&#23450;&#12375;&#12414;&#12377;&#12290;</p>

<p>&#12371;&#12428;&#12399;&#22823;&#25269;&#12398;&#22580;&#21512;&#12289;&#19978;&#12398;&#20363;&#12398;&#12424;&#12358;&#12395;&#25991;&#23383;&#21015;&#12391;&#12377;&#12364;&#12289;&#12381;&#12428;&#20197;&#22806;&#12398;&#20516;&#12418;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<p>Rack&#12524;&#12473;&#12509;&#12531;&#12473;&#12289;Rack&#12508;&#12487;&#12451;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12289;HTTP&#12473;&#12486;&#12540;&#12479;&#12473;&#12467;&#12540;&#12489;&#12398;&#12356;&#12378;&#12428;&#12363;&#12392;&#12375;&#12390;
&#22949;&#24403;&#12394;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12391;&#12354;&#12428;&#12400;&#12393;&#12398;&#12424;&#12358;&#12394;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12391;&#12418;&#36820;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<p>&#12381;&#12398;&#12424;&#12358;&#12395;&#12289;&#20363;&#12360;&#12400;&#12473;&#12488;&#12522;&#12540;&#12511;&#12531;&#12464;&#12398;&#20363;&#12434;&#31777;&#21336;&#12395;&#23455;&#35013;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>class Stream
  def each
    100.times { |i| yield "#{i}\n" }
  end
end

get('/') { Stream.new }
</code></pre>

<a name='&%2338745;&%2330340;&%2312501;&%2312449;&%2312452;&%2312523;'></a>
<h2>&#38745;&#30340;&#12501;&#12449;&#12452;&#12523;</h2>

<p>&#38745;&#30340;&#12501;&#12449;&#12452;&#12523;&#12399;<code>./public</code>&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12363;&#12425;&#37197;&#20449;&#12373;&#12428;&#12414;&#12377;&#12290;
<code>:public_folder</code>&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12391;&#21029;&#12398;&#22580;&#25152;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>set :public_folder, File.dirname(__FILE__) + '/static'
</code></pre>

<p>&#27880;&#24847;: &#12371;&#12398;&#38745;&#30340;&#12501;&#12449;&#12452;&#12523;&#29992;&#12398;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#21517;&#12399;URL&#20013;&#12395;&#21547;&#12414;&#12428;&#12414;&#12379;&#12435;&#12290;
&#20363;&#12360;&#12400;&#12289;<code>./public/css/style.css</code>&#12399;<code>http://example.com/css/style.css</code>&#12391;&#12450;&#12463;&#12475;&#12473;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<a name='&%2312499;&%2312517;&%2312540;%20/%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h2>&#12499;&#12517;&#12540; / &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h2>

<p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;<code>./views</code>&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#19979;&#12395;&#37197;&#32622;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;
&#20182;&#12398;&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#20351;&#29992;&#12377;&#12427;&#22580;&#21512;&#12398;&#20363;:</p>

<pre><code>set :views, File.dirname(__FILE__) + '/templates'
</code></pre>

<p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;&#12471;&#12531;&#12508;&#12523;&#12434;&#20351;&#29992;&#12375;&#12390;&#21442;&#29031;&#12373;&#12379;&#12427;&#12371;&#12392;&#12434;&#35226;&#12360;&#12390;&#12362;&#12356;&#12390;&#19979;&#12373;&#12356;&#12290;
&#12469;&#12502;&#12487;&#12524;&#12463;&#12488;&#12522;&#12391;&#12418;&#12371;&#12398;&#22580;&#21512;&#12399;<code>:'subdir/template'</code>&#12398;&#12424;&#12358;&#12395;&#12375;&#12414;&#12377;&#12290;
&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12513;&#12477;&#12483;&#12489;&#12399;&#25991;&#23383;&#21015;&#12364;&#28193;&#12373;&#12428;&#12427;&#12392;&#12289;&#12381;&#12398;&#12414;&#12414;&#25991;&#23383;&#21015;&#12434;&#20986;&#21147;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Haml%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Haml &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>haml&#12434;&#20351;&#12358;&#12395;&#12399;haml&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># haml&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'haml'

get '/' do
  haml :index
end
</code></pre>

<p><code>./views/index.haml</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p><a href="http://haml.info/docs/yardoc/file.HAML_REFERENCE.html#options">Haml&rsquo;s
options</a>
&#12399;Sinatra&#12398;&#35373;&#23450;&#12391;&#12464;&#12525;&#12540;&#12496;&#12523;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; <a href="http://www.sinatrarb.com/configuration.html">Options and
Configurations</a>,
&#12434;&#21442;&#29031;&#12375;&#12390;&#12381;&#12428;&#12382;&#12428;&#35373;&#23450;&#12434;&#19978;&#26360;&#12365;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

<pre><code>set :haml, {:format =&gt; :html5 } # &#12487;&#12501;&#12457;&#12523;&#12488;&#12398;&#12501;&#12457;&#12540;&#12510;&#12483;&#12488;&#12399;:xhtml

get '/' do
  haml :index, :haml_options =&gt; {:format =&gt; :html4 } # &#19978;&#26360;&#12365;
end
</code></pre>

<a name='Erb%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Erb &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<pre><code># erb&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'erb'

get '/' do
  erb :index
end
</code></pre>

<p><code>./views/index.erb</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Erubis'></a>
<h3>Erubis</h3>

<p>erubis&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#34920;&#31034;&#12377;&#12427;&#12395;&#12399;&#12289;erubis&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># erubis&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'erubis'

get '/' do
  erubis :index
end
</code></pre>

<p><code>./views/index.erubis</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Builder%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Builder &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>builder&#12434;&#20351;&#12358;&#12395;&#12399;builder&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># builder&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'builder'

get '/' do
  builder :index
end
</code></pre>

<p><code>./views/index.builder</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='&%2337624;%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>&#37624; &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>&#37624;&#12434;&#20351;&#12358;&#12395;&#12399;&#37624;&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># &#37624;&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'nokogiri'

get '/' do
  nokogiri :index
end
</code></pre>

<p><code>./views/index.nokogiri</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Sass%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Sass &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Sass&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;sass&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># haml&#12363;sass&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'sass'

get '/stylesheet.css' do
  sass :stylesheet
end
</code></pre>

<p><code>./views/stylesheet.sass</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options">Sass&rsquo;
options</a>
&#12399;Sinatra&#12398;&#35373;&#23450;&#12391;&#12464;&#12525;&#12540;&#12496;&#12523;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; see <a href="http://www.sinatrarb.com/configuration.html">Options and
Configurations</a>,
&#12434;&#21442;&#29031;&#12375;&#12390;&#12381;&#12428;&#12382;&#12428;&#35373;&#23450;&#12434;&#19978;&#26360;&#12365;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

<pre><code>set :sass, {:style =&gt; :compact } # &#12487;&#12501;&#12457;&#12523;&#12488;&#12398;Sass style&#12399; :nested

get '/stylesheet.css' do
  sass :stylesheet, :sass_options =&gt; {:style =&gt; :expanded } # &#19978;&#26360;&#12365;
end
</code></pre>

<a name='Scss%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Scss &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Scss&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;sass&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># haml&#12363;sass&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'sass'

get '/stylesheet.css' do
  scss :stylesheet
end
</code></pre>

<p><code>./views/stylesheet.scss</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p><a href="http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#options">Sass&rsquo;
options</a>
&#12399;Sinatra&#12398;&#35373;&#23450;&#12391;&#12464;&#12525;&#12540;&#12496;&#12523;&#12395;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290; see <a href="http://www.sinatrarb.com/configuration.html">Options and
Configurations</a>,
&#12434;&#21442;&#29031;&#12375;&#12390;&#12381;&#12428;&#12382;&#12428;&#35373;&#23450;&#12434;&#19978;&#26360;&#12365;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

<pre><code>set :scss, :style =&gt; :compact # &#12487;&#12501;&#12457;&#12523;&#12488;&#12398;Scss style&#12399;:nested

get '/stylesheet.css' do
  scss :stylesheet, :style =&gt; :expanded # &#19978;&#26360;&#12365;
end
</code></pre>

<a name='Less%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Less &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Less&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;less&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># less&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'less'

get '/stylesheet.css' do
  less :stylesheet
end
</code></pre>

<p><code>./views/stylesheet.less</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Liquid%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Liquid &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Liquid&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;liquid&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># liquid&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'liquid'

get '/' do
  liquid :index
end
</code></pre>

<p><code>./views/index.liquid</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p>Liquid&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;Ruby&#12398;&#12513;&#12477;&#12483;&#12489;(<code>yield</code>&#12434;&#38500;&#12367;)&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12394;&#12356;&#12383;&#12417;&#12289;
&#12411;&#12412;&#20840;&#12390;&#12398;&#22580;&#21512;&#12395;locals&#12434;&#25351;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12391;&#12375;&#12423;&#12358;:</p>

<pre><code>liquid :index, :locals =&gt; { :key =&gt; 'value' }
</code></pre>

<a name='Markdown%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Markdown &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Markdown&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;rdiscount&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># rdiscount&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require "rdiscount"

get '/' do
  markdown :index
end
</code></pre>

<p><code>./views/index.markdown</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;(<code>md</code>&#12392;<code>mkd</code>&#12418;&#22949;&#24403;&#12394;&#25313;&#24373;&#23376;&#12391;&#12377;)</p>

<p>markdown&#12363;&#12425;&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12418;&#12289;locals&#12395;&#22793;&#25968;&#12434;&#28193;&#12377;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;
&#12381;&#12428;&#12422;&#12360;&#12289;&#20182;&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12456;&#12531;&#12472;&#12531;&#12392;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12391;&#20351;&#12358;&#12398;&#12364;&#26222;&#36890;&#12391;&#12377;:</p>

<pre><code>erb :overview, :locals =&gt; { :text =&gt; markdown(:introduction) }
</code></pre>

<p>&#20182;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;markdown&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12375;&#12390;&#12418;&#12424;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;:</p>

<pre><code>%h1 Hello From Haml!
%p= markdown(:greetings)
</code></pre>

<a name='Textile%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Textile &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Textile&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;RedCloth&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># redcloth&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require "redcloth"

get '/' do
  textile :index
end
</code></pre>

<p><code>./views/index.textile</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p>textile&#12363;&#12425;&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12418;&#12289;locals&#12395;&#22793;&#25968;&#12434;&#28193;&#12377;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;
&#12381;&#12428;&#12422;&#12360;&#12289;&#20182;&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12456;&#12531;&#12472;&#12531;&#12392;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12391;&#20351;&#12358;&#12398;&#12364;&#26222;&#36890;&#12391;&#12377;:</p>

<pre><code>erb :overview, :locals =&gt; { :text =&gt; textile(:introduction) }
</code></pre>

<p>&#20182;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;textile&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12375;&#12390;&#12418;&#12424;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;:</p>

<pre><code>%h1 Hello From Haml!
%p= textile(:greetings)
</code></pre>

<a name='RDoc%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>RDoc &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>RDoc&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;RDoc&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># rdoc/markup/to_html&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require "rdoc"
require "rdoc/markup/to_html"

get '/' do
  rdoc :index
end
</code></pre>

<p><code>./views/index.rdoc</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p>rdoc&#12363;&#12425;&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12418;&#12289;locals&#12395;&#22793;&#25968;&#12434;&#28193;&#12377;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;
&#12381;&#12428;&#12422;&#12360;&#12289;&#20182;&#12398;&#12524;&#12531;&#12480;&#12522;&#12531;&#12464;&#12456;&#12531;&#12472;&#12531;&#12392;&#12398;&#32068;&#12415;&#21512;&#12431;&#12379;&#12391;&#20351;&#12358;&#12398;&#12364;&#26222;&#36890;&#12391;&#12377;:</p>

<pre><code>erb :overview, :locals =&gt; { :text =&gt; rdoc(:introduction) }
</code></pre>

<p>&#20182;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;rdoc&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12375;&#12390;&#12418;&#12424;&#12356;&#12371;&#12392;&#12395;&#27880;&#24847;&#12375;&#12390;&#12367;&#12384;&#12373;&#12356;:</p>

<pre><code>%h1 Hello From Haml!
%p= rdoc(:greetings)
</code></pre>

<a name='Radius%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Radius &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Radius&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;radius&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># radius&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'radius'

get '/' do
  radius :index
end
</code></pre>

<p><code>./views/index.radius</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<p>Radius&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12363;&#12425;Ruby&#12398;&#12513;&#12477;&#12483;&#12489;(<code>yield</code>&#12434;&#38500;&#12367;)&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12394;&#12356;&#12383;&#12417;&#12289;
&#12411;&#12412;&#20840;&#12390;&#12398;&#22580;&#21512;&#12395;locals&#12434;&#25351;&#23450;&#12377;&#12427;&#24517;&#35201;&#12364;&#12354;&#12427;&#12391;&#12375;&#12423;&#12358;:</p>

<pre><code>radius :index, :locals =&gt; { :key =&gt; 'value' }
</code></pre>

<a name='Markaby%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Markaby &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Markaby&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;markaby&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># markaby&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'markaby'

get '/' do
  markaby :index
end
</code></pre>

<p><code>./views/index.mab</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='RABL%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>RABL &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>RABL&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;rabl&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># rabl&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'rabl'

get '/' do
  rabl :index
end
</code></pre>

<p><code>./views/index.rabl</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Slim%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Slim &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Slim&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;slim&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># slim&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'slim'

get '/' do
  slim :index
end
</code></pre>

<p><code>./views/index.slim</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='Creole%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>Creole &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>Creole&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;creole&#12521;&#12452;&#12502;&#12521;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># creole&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'creole'

get '/' do
  creole :index
end
</code></pre>

<p><code>./views/index.creole</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='CoffeeScript%20&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>CoffeeScript &#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>CoffeeScript&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#34920;&#31034;&#12377;&#12427;&#12395;&#12399;coffee-script&#12521;&#12452;&#12502;&#12521;&#12522;&#12392;`coffee`&#12496;&#12452;&#12490;&#12522;&#12364;&#24517;&#35201;&#12391;&#12377;:</p>

<pre><code># coffee-script&#12434;&#35501;&#12415;&#36796;&#12415;&#12414;&#12377;
require 'coffee-script'

get '/application.js' do
  coffee :application
end
</code></pre>

<p><code>./views/application.coffee</code>&#12434;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='&%2312452;&%2312531;&%2312521;&%2312452;&%2312531;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>&#12452;&#12531;&#12521;&#12452;&#12531;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<pre><code>get '/' do
  haml '%div.title Hello World'
end
</code></pre>

<p>&#25991;&#23383;&#21015;&#12434;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12392;&#12375;&#12390;&#34920;&#31034;&#12375;&#12414;&#12377;&#12290;</p>

<a name='&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;&%2320869;&%2312391;&%2322793;&%2325968;&%2312395;&%2312450;&%2312463;&%2312475;&%2312473;&%2312377;&%2312427;'></a>
<h3>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#20869;&#12391;&#22793;&#25968;&#12395;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;</h3>

<p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;&#12523;&#12540;&#12488;&#12495;&#12531;&#12489;&#12521;&#12392;&#21516;&#12376;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12398;&#20013;&#12391;&#35413;&#20385;&#12373;&#12428;&#12414;&#12377;&#12290;.
&#12523;&#12540;&#12488;&#12495;&#12531;&#12489;&#12521;&#12391;&#12475;&#12483;&#12488;&#12373;&#12428;&#12383;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#22793;&#25968;&#12399;
&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#20869;&#12391;&#30452;&#25509;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/:id' do
  @foo = Foo.find(params[:id])
  haml '%h1= @foo.name'
end
</code></pre>

<p>&#12525;&#12540;&#12459;&#12523;&#22793;&#25968;&#12434;&#26126;&#31034;&#30340;&#12395;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/:id' do
  foo = Foo.find(params[:id])
  haml '%h1= foo.name', :locals =&gt; { :foo =&gt; foo }
end
</code></pre>

<p>&#12371;&#12398;&#12420;&#12426;&#26041;&#12399;&#20182;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#20869;&#12391;&#37096;&#20998;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12392;&#12375;&#12390;&#34920;&#31034;&#12377;&#12427;&#26178;&#12395;&#20856;&#22411;&#30340;&#12395;&#20351;&#29992;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

<a name='&%2312501;&%2312449;&%2312452;&%2312523;&%2320869;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>&#12501;&#12449;&#12452;&#12523;&#20869;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;&#12477;&#12540;&#12473;&#12501;&#12449;&#12452;&#12523;&#12398;&#26368;&#24460;&#12391;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>require 'rubygems'
require 'sinatra'

get '/' do
  haml :index
end

__END__

@@ layout
%html
  = yield

@@ index
%div.title Hello world!!!!!
</code></pre>

<p>&#27880;&#24847;:
sinatra&#12434;require&#12377;&#12427;&#12501;&#12449;&#12452;&#12523;&#20869;&#12391;&#23450;&#32681;&#12373;&#12428;&#12383;&#12501;&#12449;&#12452;&#12523;&#20869;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;&#33258;&#21205;&#30340;&#12395;&#35501;&#12415;&#36796;&#12414;&#12428;&#12414;&#12377;&#12290;
&#20182;&#12398;&#12501;&#12449;&#12452;&#12523;&#12391;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12427;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12434;&#20351;&#12358;&#12395;&#12399;
<code>enable :inline_templates</code>&#12434;&#26126;&#31034;&#30340;&#12395;&#21628;&#12435;&#12391;&#12367;&#12384;&#12373;&#12356;&#12290;</p>

<a name='&%2321517;&%2321069;&%2320184;&%2312365;&%2312486;&%2312531;&%2312503;&%2312524;&%2312540;&%2312488;'></a>
<h3>&#21517;&#21069;&#20184;&#12365;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;</h3>

<p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12399;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12398;<code>template</code>&#12513;&#12477;&#12483;&#12489;&#12391;&#23450;&#32681;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>template :layout do
  "%html\n  =yield\n"
end

template :index do
  '%div.title Hello World!'
end

get '/' do
  haml :index
end
</code></pre>

<p>&#12300;layout&#12301;&#12392;&#12356;&#12358;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12364;&#23384;&#22312;&#12377;&#12427;&#22580;&#21512;&#12289;&#12381;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12501;&#12449;&#12452;&#12523;&#12399;&#20182;&#12398;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12364;
&#34920;&#31034;&#12373;&#12428;&#12427;&#24230;&#12395;&#20351;&#29992;&#12373;&#12428;&#12414;&#12377;&#12290;<code>:layout =&gt; false</code>&#12377;&#12427;&#12371;&#12392;&#12391;layouts&#12434;&#28961;&#21177;&#12395;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>get '/' do
  haml :index, :layout =&gt; !request.xhr?
end
</code></pre>

<a name='&%2312504;&%2312523;&%2312497;&%2312540;'></a>
<h2>&#12504;&#12523;&#12497;&#12540;</h2>

<p>&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12398;<code>helpers</code>&#12434;&#20351;&#29992;&#12375;&#12390;&#12523;&#12540;&#12488;&#12495;&#12531;&#12489;&#12521;&#12420;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12391;&#20351;&#12358;&#12504;&#12523;&#12497;&#12513;&#12477;&#12483;&#12489;&#12434;
&#23450;&#32681;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>helpers do
  def bar(name)
    "#{name}bar"
  end
end

get '/:name' do
  bar(params[:name])
end
</code></pre>

<a name='&%2312501;&%2312451;&%2312523;&%2312479;'></a>
<h2>&#12501;&#12451;&#12523;&#12479;</h2>

<p>before&#12501;&#12451;&#12523;&#12479;&#12399;&#12522;&#12463;&#12456;&#12473;&#12488;&#12373;&#12428;&#12383;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12434;&#23455;&#34892;&#12377;&#12427;&#21069;&#12395;&#35413;&#20385;&#12373;&#12428;&#12289;
&#12522;&#12463;&#12456;&#12473;&#12488;&#12392;&#12524;&#12473;&#12509;&#12531;&#12473;&#12434;&#22793;&#26356;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;&#12501;&#12451;&#12523;&#12479;&#20869;&#12391;&#12475;&#12483;&#12488;&#12373;&#12428;&#12383;
&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#22793;&#25968;&#12399;&#12523;&#12540;&#12486;&#12451;&#12531;&#12464;&#12392;&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;&#12391;&#20351;&#29992;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>before do
  @note = 'Hi!'
  request.path_info = '/foo/bar/baz'
end

get '/foo/*' do
  @note #=&gt; 'Hi!'
  params[:splat] #=&gt; 'bar/baz'
end
</code></pre>

<p>after&#12501;&#12451;&#12523;&#12479;&#12399;&#21516;&#12376;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12395;&#12354;&#12427;&#12522;&#12463;&#12456;&#12473;&#12488;&#12398;&#24460;&#12395;&#35413;&#20385;&#12373;&#12428;&#12289;
&#21516;&#12376;&#12367;&#12522;&#12463;&#12456;&#12473;&#12488;&#12392;&#12524;&#12473;&#12509;&#12531;&#12473;&#12434;&#22793;&#26356;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
before&#12501;&#12451;&#12523;&#12479;&#12392;&#12523;&#12540;&#12488;&#12391;&#35373;&#23450;&#12373;&#12428;&#12383;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#22793;&#25968;&#12399;&#12289;
after&#12501;&#12451;&#12523;&#12479;&#12363;&#12425;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>after do
  puts response.status
end
</code></pre>

<p>&#12501;&#12451;&#12523;&#12479;&#12395;&#12399;&#12458;&#12503;&#12471;&#12519;&#12531;&#12392;&#12375;&#12390;&#12497;&#12479;&#12540;&#12531;&#12434;&#28193;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12289;
&#12371;&#12398;&#22580;&#21512;&#12399;&#12522;&#12463;&#12456;&#12473;&#12488;&#12398;&#12497;&#12473;&#12364;&#12497;&#12479;&#12540;&#12531;&#12395;&#12510;&#12483;&#12481;&#12375;&#12383;&#22580;&#21512;&#12398;&#12415;&#12501;&#12451;&#12523;&#12479;&#12364;&#35413;&#20385;&#12373;&#12428;&#12414;&#12377;:</p>

<pre><code>before '/protected/*' do
  authenticate!
end

after '/create/:slug' do |slug|
  session[:last_slug] = slug
end
</code></pre>

<a name='&%2324375;&%2321046;&%2332066;&%2320102;'></a>
<h2>&#24375;&#21046;&#32066;&#20102;</h2>

<p>&#12523;&#12540;&#12488;&#12363;before&#12501;&#12451;&#12523;&#12479;&#20869;&#12391;&#30452;&#12385;&#12395;&#23455;&#34892;&#12434;&#32066;&#20102;&#12377;&#12427;&#26041;&#27861;:</p>

<pre><code>halt
</code></pre>

<p>&#12473;&#12486;&#12540;&#12479;&#12473;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>halt 410
</code></pre>

<p>body&#37096;&#12434;&#25351;&#23450;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377; &hellip;</p>

<pre><code>halt '&#12371;&#12371;&#12395;body&#12434;&#26360;&#12367;'
</code></pre>

<p>&#12473;&#12486;&#12540;&#12479;&#12473;&#12392;body&#37096;&#12434;&#25351;&#23450;&#12377;&#12427; &hellip;</p>

<pre><code>halt 401, '&#31435;&#12385;&#21435;&#12428;!'
</code></pre>

<p>&#12504;&#12483;&#12480;&#12434;&#25351;&#23450;:</p>

<pre><code>halt 402, {'Content-Type' =&gt; 'text/plain'}, '&#12522;&#12505;&#12531;&#12472;'
</code></pre>

<a name='&%2312497;&%2312483;&%2312471;&%2312531;&%2312464;(Passing)'></a>
<h2>&#12497;&#12483;&#12471;&#12531;&#12464;(Passing)</h2>

<p>&#12523;&#12540;&#12488;&#12399;<code>pass</code>&#12434;&#20351;&#12387;&#12390;&#27425;&#12398;&#12523;&#12540;&#12488;&#12395;&#39131;&#12400;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>get '/guess/:who' do
  pass unless params[:who] == 'Frank'
  "&#35211;&#12388;&#12363;&#12387;&#12385;&#12419;&#12387;&#12383;!"
end

get '/guess/*' do
  "&#12399;&#12378;&#12428;&#12391;&#12377;!"
end
</code></pre>

<p>&#12523;&#12540;&#12488;&#12502;&#12525;&#12483;&#12463;&#12363;&#12425;&#12377;&#12368;&#12395;&#25244;&#12369;&#20986;&#12375;&#12289;&#27425;&#12395;&#12510;&#12483;&#12481;&#12377;&#12427;&#12523;&#12540;&#12488;&#12434;&#23455;&#34892;&#12375;&#12414;&#12377;&#12290;
&#12510;&#12483;&#12481;&#12377;&#12427;&#12523;&#12540;&#12488;&#12364;&#35211;&#24403;&#12383;&#12425;&#12394;&#12356;&#22580;&#21512;&#12399;404&#12364;&#36820;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

<a name='&%2312522;&%2312463;&%2312456;&%2312473;&%2312488;&%2312458;&%2312502;&%2312472;&%2312455;&%2312463;&%2312488;&%2312408;&%2312398;&%2312450;&%2312463;&%2312475;&%2312473;'></a>
<h2>&#12522;&#12463;&#12456;&#12473;&#12488;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12408;&#12398;&#12450;&#12463;&#12475;&#12473;</h2>

<p>&#21463;&#20449;&#12377;&#12427;&#12522;&#12463;&#12456;&#12473;&#12488;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12399;&#12289;`request`&#12513;&#12477;&#12483;&#12489;&#12434;&#36890;&#12376;&#12390;&#12522;&#12463;&#12456;&#12473;&#12488;&#12524;&#12505;&#12523;(&#12501;&#12451;&#12523;&#12479;&#12289;&#12523;&#12540;&#12488;&#12289;&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12521;)&#12363;&#12425;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code># &#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12364; http://example.com/example &#12391;&#21205;&#20316;&#12375;&#12390;&#12356;&#12427;&#22580;&#21512;
get '/foo' do
  request.body              # &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12395;&#12424;&#12387;&#12390;&#36865;&#20449;&#12373;&#12428;&#12383;&#12522;&#12463;&#12456;&#12473;&#12488;&#12508;&#12487;&#12451;(&#19979;&#35352;&#21442;&#29031;)
  request.scheme            # "http"
  request.script_name       # "/example"
  request.path_info         # "/foo"
  request.port              # 80
  request.request_method    # "GET"
  request.query_string      # ""
  request.content_length    # request.body&#12398;&#38263;&#12373;
  request.media_type        # request.body&#12398;&#12513;&#12487;&#12451;&#12450;&#12479;&#12452;&#12503;
  request.host              # "example.com"
  request.get?              # true (&#20182;&#12398;&#21205;&#35422;&#12395;&#12388;&#12356;&#12390;&#12418;&#21516;&#27096;&#12398;&#12513;&#12477;&#12483;&#12489;&#12354;&#12426;)
  request.form_data?        # false
  request["SOME_HEADER"]    # SOME_HEADER&#12504;&#12483;&#12480;&#12398;&#20516;
  request.referer           # &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12398;&#12522;&#12501;&#12449;&#12521;&#12414;&#12383;&#12399;'/'
  request.user_agent        # &#12518;&#12540;&#12470;&#12456;&#12540;&#12472;&#12455;&#12531;&#12488; (:agent &#26465;&#20214;&#12395;&#12424;&#12387;&#12390;&#20351;&#29992;&#12373;&#12428;&#12427;)
  request.cookies           # &#12502;&#12521;&#12454;&#12470;&#12463;&#12483;&#12461;&#12540;&#12398;&#12495;&#12483;&#12471;&#12517;
  request.xhr?              # Ajax&#12522;&#12463;&#12456;&#12473;&#12488;&#12363;&#12393;&#12358;&#12363;
  request.url               # "http://example.com/example/foo"
  request.path              # "/example/foo"
  request.ip                # &#12463;&#12521;&#12452;&#12450;&#12531;&#12488;&#12398;IP&#12450;&#12489;&#12524;&#12473;
  request.secure?           # false
  request.env               # Rack&#12395;&#12424;&#12387;&#12390;&#28193;&#12373;&#12428;&#12383;&#29983;&#12398;env&#12495;&#12483;&#12471;&#12517;
end
</code></pre>

<p><code>script_name</code>&#12420;<code>path_info</code>&#12394;&#12393;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#21033;&#29992;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>before { request.path_info = "/" }

get "/" do
  "&#20840;&#12390;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;&#12399;&#12371;&#12371;&#12395;&#26469;&#12427;"
end
</code></pre>

<p><code>request.body</code>&#12399;IO&#12414;&#12383;&#12399;StringIO&#12398;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12391;&#12377;:</p>

<pre><code>post "/api" do
  request.body.rewind  # &#26082;&#12395;&#35501;&#12414;&#12428;&#12390;&#12356;&#12427;&#12392;&#12365;&#12398;&#12383;&#12417;
  data = JSON.parse request.body.read
  "Hello #{data['name']}!"
end
</code></pre>

<a name='&%2335373;&%2323450;'></a>
<h2>&#35373;&#23450;</h2>

<p>&#12393;&#12398;&#29872;&#22659;&#12391;&#12418;&#36215;&#21205;&#26178;&#12395;&#65297;&#22238;&#12384;&#12369;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;</p>

<pre><code>configure do
  ...
end
</code></pre>

<p>&#29872;&#22659;(RACK_ENV&#29872;&#22659;&#22793;&#25968;)&#12364;<code>:production</code>&#12395;&#35373;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#26178;&#12384;&#12369;&#23455;&#34892;&#12377;&#12427;&#26041;&#27861;:</p>

<pre><code>configure :production do
  ...
end
</code></pre>

<p>&#29872;&#22659;&#12364;<code>:production</code>&#12363;<code>:test</code>&#12398;&#22580;&#21512;&#12395;&#35373;&#23450;&#12377;&#12427;&#26041;&#27861;:</p>

<pre><code>configure :production, :test do
  ...
end
</code></pre>

<a name='&%2312456;&%2312521;&%2312540;&%2312495;&%2312531;&%2312489;&%2312522;&%2312531;&%2312464;'></a>
<h2>&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12522;&#12531;&#12464;</h2>

<p>&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12521;&#12540;&#12399;&#12523;&#12540;&#12488;&#12467;&#12531;&#12486;&#12461;&#12473;&#12488;&#12392;before&#12501;&#12451;&#12523;&#12479;&#20869;&#12391;&#23455;&#34892;&#12375;&#12414;&#12377;&#12290;
<code>haml</code>&#12289;<code>erb</code>&#12289;<code>halt</code>&#12394;&#12393;&#12434;&#20351;&#12358;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<a name='Not%20Found'></a>
<h3>Not Found</h3>

<p><code>Sinatra::NotFound</code>&#12364;&#36215;&#12365;&#12383;&#26178;&#12363; &#12524;&#12473;&#12509;&#12531;&#12473;&#12398;&#12473;&#12486;&#12540;&#12479;&#12473;&#12467;&#12540;&#12489;&#12364;
404&#12398;&#26178;&#12395;<code>not_found</code>&#12495;&#12531;&#12489;&#12521;&#12540;&#12364;&#30330;&#21205;&#12375;&#12414;&#12377;&#12290;</p>

<pre><code>not_found do
  '&#12501;&#12449;&#12452;&#12523;&#12364;&#23384;&#22312;&#12375;&#12414;&#12379;&#12435;'
end
</code></pre>

<a name='&%2312456;&%2312521;&%2312540;'></a>
<h3>&#12456;&#12521;&#12540;</h3>

<p><code>error</code>
&#12495;&#12531;&#12489;&#12521;&#12540;&#12399;&#12523;&#12540;&#12488;&#12502;&#12525;&#12483;&#12463;&#12363;before&#12501;&#12451;&#12523;&#12479;&#20869;&#12391;&#20363;&#22806;&#12364;&#30330;&#29983;&#12375;&#12383;&#26178;&#12399;&#12356;&#12388;&#12391;&#12418;&#30330;&#21205;&#12375;&#12414;&#12377;&#12290;
&#20363;&#22806;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12399;Rack&#22793;&#25968;<code>sinatra.error</code>&#12363;&#12425;&#21462;&#24471;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>error do
  '&#12456;&#12521;&#12540;&#12364;&#30330;&#29983;&#12375;&#12414;&#12375;&#12383;&#12290; - ' + env['sinatra.error'].name
end
</code></pre>

<p>&#12456;&#12521;&#12540;&#12434;&#12459;&#12473;&#12479;&#12510;&#12452;&#12474;&#12377;&#12427;&#22580;&#21512;&#12399;&#12289;</p>

<pre><code>error MyCustomError do
  '&#12456;&#12521;&#12540;&#12513;&#12483;&#12475;&#12540;&#12472;...' + env['sinatra.error'].message
end
</code></pre>

<p>&#12392;&#26360;&#12356;&#12390;&#12362;&#12356;&#12390;,&#19979;&#35352;&#12398;&#12424;&#12358;&#12395;&#21628;&#12403;&#20986;&#12375;&#12414;&#12377;&#12290;</p>

<pre><code>get '/' do
  raise MyCustomError, '&#20309;&#12363;&#12364;&#12414;&#12378;&#12363;&#12387;&#12383;&#12424;&#12358;&#12391;&#12377;'
end
</code></pre>

<p>&#12381;&#12358;&#12377;&#12427;&#12392;&#12371;&#12358;&#12394;&#12426;&#12414;&#12377;:</p>

<pre><code>&#12456;&#12521;&#12540;&#12513;&#12483;&#12475;&#12540;&#12472;... &#20309;&#12363;&#12364;&#12414;&#12378;&#12363;&#12387;&#12383;&#12424;&#12358;&#12391;&#12377;
</code></pre>

<p>&#12354;&#12427;&#12356;&#12399;&#12289;&#12473;&#12486;&#12540;&#12479;&#12473;&#12467;&#12540;&#12489;&#12395;&#23550;&#24540;&#12377;&#12427;&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12521;&#12434;&#35373;&#23450;&#12377;&#12427;&#12371;&#12392;&#12418;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>error 403 do
  'Access forbidden'
end

get '/secret' do
  403
end
</code></pre>

<p>&#31684;&#22258;&#25351;&#23450;&#12418;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>error 400..510 do
  'Boom'
end
</code></pre>

<p>&#38283;&#30330;&#29872;&#22659;&#12392;&#12375;&#12390;&#23455;&#34892;&#12375;&#12390;&#12356;&#12427;&#22580;&#21512;&#12289;Sinatra&#12399;&#29305;&#21029;&#12394;<code>not_found</code>&#12392;<code>error</code>&#12495;&#12531;&#12489;&#12521;&#12540;&#12434;
&#12452;&#12531;&#12473;&#12488;&#12540;&#12523;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

<a name='MIME&%2312479;&%2312452;&%2312503;'></a>
<h2>MIME&#12479;&#12452;&#12503;</h2>

<p><code>send_file</code>&#12363;&#38745;&#30340;&#12501;&#12449;&#12452;&#12523;&#12434;&#20351;&#12358;&#26178;&#12289;Sinatra&#12364;&#29702;&#35299;&#12391;&#12356;&#12394;&#12356;MIME&#12479;&#12452;&#12503;&#12364;&#12354;&#12427;&#22580;&#21512;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;
&#12381;&#12398;&#26178;&#12399; <code>mime_type</code> &#12434;&#20351;&#12387;&#12390;&#12501;&#12449;&#12452;&#12523;&#25313;&#24373;&#23376;&#27598;&#12395;&#30331;&#37682;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

<pre><code>mime_type :foo, 'text/foo'
</code></pre>

<p>&#12371;&#12428;&#12399;content_type&#12504;&#12523;&#12497;&#12391;&#21033;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;:</p>

<pre><code>content_type :foo
</code></pre>

<a name='Rack&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;'></a>
<h2>Rack&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;</h2>

<p><a href="http://rack.rubyforge.org/">Sinatra&#12399;Rack</a>&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#29992;&#12398;
&#26368;&#23567;&#38480;&#12398;&#27161;&#28310;&#12452;&#12531;&#12479;&#12540;&#12501;&#12455;&#12540;&#12473;
&#19978;&#12391;&#21205;&#20316;&#12375;&#12390;&#12356;&#12414;&#12377;&#12290;Rack&#20013;&#12391;&#12418;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12487;&#12505;&#12525;&#12483;&#12497;&#12540;
&#21521;&#12369;&#12395;&#19968;&#30058;&#33288;&#21619;&#28145;&#12356;&#27231;&#33021;&#12399;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;(&#12469;&#12540;&#12496;&#12392;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#38291;&#12395;&#20171;&#22312;&#12375;&#12289;&#12514;&#12491;&#12479;&#12522;&#12531;&#12464;&#12289;HTTP&#12522;&#12463;&#12456;&#12473;&#12488;&#12392;&#12524;&#12473;&#12509;&#12531;&#12473;
&#12398;&#25163;&#21205;&#25805;&#20316;&#12364;&#12391;&#12365;&#12427;&#12394;&#12393;&#12289;&#19968;&#33324;&#30340;&#12394;&#27231;&#33021;&#12398;&#12356;&#12429;&#12356;&#12429;&#12394;&#12371;&#12392;&#12434;&#25552;&#20379;&#12377;&#12427;&#12418;&#12398;)&#12434;&#12469;&#12509;&#12540;&#12488;&#12377;&#12427;&#12371;&#12392;&#12391;&#12377;&#12290;</p>

<p>Sinatra&#12391;&#12399;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12398;<code>use</code>
&#12513;&#12477;&#12483;&#12489;&#12434;&#20351;&#12387;&#12390;Rack&#12395;&#12497;&#12452;&#12503;&#12521;&#12452;&#12531;&#12434;&#27083;&#31689;&#12375;&#12414;&#12377;&#12290;</p>

<pre><code>require 'sinatra'
require 'my_custom_middleware'

use Rack::Lint
use MyCustomMiddleware

get '/hello' do
  'Hello World'
end
</code></pre>

<p><code>use</code>
<a href="http://rack.rubyforge.org/doc/classes/Rack/Builder.html">Rack::Builder</a>
DSL&#12391;&#23450;&#32681;&#12373;&#12428;&#12390;&#12356;&#12427;&#12371;&#12392;&#12392;&#20840;&#12390;&#19968;&#33268;&#12375;&#12414;&#12377;&#12290; &#20363;&#12360;&#12400; <code>use</code>
&#12513;&#12477;&#12483;&#12489;&#12399;&#12502;&#12525;&#12483;&#12463;&#27083;&#25991;&#12398;&#12424;&#12358;&#12395;&#35079;&#25968;&#12398;&#24341;&#25968;&#12434;&#21463;&#12369;&#21462;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>use Rack::Auth::Basic do |username, password|
  username == 'admin' &amp;&amp; password == 'secret'
end
</code></pre>

<p>Rack&#12399;&#12525;&#12464;&#12289;&#12487;&#12496;&#12483;&#12462;&#12531;&#12464;&#12289;URL&#12523;&#12540;&#12486;&#12451;&#12531;&#12464;&#12289;&#35469;&#35388;&#12289;&#12475;&#12483;&#12471;&#12519;&#12531;&#12394;&#12393;&#12356;&#12429;&#12356;&#12429;&#12394;&#27231;&#33021;&#12434;&#20633;&#12360;&#12383;&#27161;&#28310;&#30340;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12391;&#12377;&#12290;
Sinatra&#12399;&#12381;&#12398;&#22810;&#12367;&#12398;&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12434;&#33258;&#21205;&#12391;&#20351;&#12358;&#12424;&#12358;&#22522;&#26412;&#35373;&#23450;&#12373;&#12428;&#12390;&#12356;&#12427;&#12383;&#12417;&#12289;<code>use</code>&#12391;&#26126;&#31034;&#30340;&#12395;&#25351;&#23450;&#12377;&#12427;&#24517;&#35201;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;&#12290;</p>

<a name='&%2312486;&%2312473;&%2312488;'></a>
<h2>&#12486;&#12473;&#12488;</h2>

<p>Sinatra&#12391;&#12398;&#12486;&#12473;&#12488;&#12399;Rack-based&#12398;&#12486;&#12473;&#12488;&#12521;&#12452;&#12502;&#12521;&#12522;&#12363;&#12501;&#12524;&#12540;&#12512;&#12527;&#12540;&#12463;&#12434;&#20351;&#12387;&#12390;&#26360;&#12367;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
<a href="http://gitrdoc.com/brynary/rack-test">Rack::Test</a>
&#12434;&#12362;&#12377;&#12377;&#12417;&#12375;&#12414;&#12377;&#12290;&#12420;&#12426;&#26041;:</p>

<pre><code>require 'my_sinatra_app'
require 'rack/test'

class MyAppTest &lt; Test::Unit::TestCase
  include Rack::Test::Methods

  def app
    Sinatra::Application
  end

  def test_my_default
    get '/'
    assert_equal 'Hello World!', last_response.body
  end

  def test_with_params
    get '/meet', :name =&gt; 'Frank'
    assert_equal 'Hello Frank!', last_response.body
  end

  def test_with_rack_env
    get '/', {}, 'HTTP_USER_AGENT' =&gt; 'Songbird'
    assert_equal "&#12354;&#12394;&#12383;&#12399;Songbird&#12434;&#20351;&#12387;&#12390;&#12414;&#12377;&#12397;!", last_response.body
  end
end
</code></pre>

<p>&#27880;&#24847;: &#12499;&#12523;&#12488;&#12452;&#12531;&#12398;Sinatra::Test&#12514;&#12472;&#12517;&#12540;&#12523;&#12392;Sinatra::TestHarness&#12463;&#12521;&#12473;&#12399;
0.9.2&#12522;&#12522;&#12540;&#12473;&#20197;&#38477;&#12289;&#24259;&#27490;&#20104;&#23450;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;</p>

<a name='Sinatra::Base%20-%20&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;&%2312289;&%2312521;&%2312452;&%2312502;&%2312521;&%2312522;&%2312289;%20&%2312514;&%2312472;&%2312517;&%2312521;&%2312540;&%2312450;&%2312503;&%2312522;'></a>
<h2>Sinatra::Base - &#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12289;&#12521;&#12452;&#12502;&#12521;&#12522;&#12289; &#12514;&#12472;&#12517;&#12521;&#12540;&#12450;&#12503;&#12522;</h2>

<p>&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;(&#12464;&#12525;&#12540;&#12496;&#12523;&#38936;&#22495;)&#19978;&#12391;&#12356;&#12429;&#12356;&#12429;&#23450;&#32681;&#12375;&#12390;&#12356;&#12367;&#12398;&#12399;&#36605;&#37327;&#12450;&#12503;&#12522;&#12394;&#12425;&#12358;&#12414;&#12367;&#12356;&#12365;&#12414;&#12377;&#12364;&#12289;
Rack&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12420;Rails metal&#12289;&#12469;&#12540;&#12496;&#12398;&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12434;&#21547;&#12435;&#12384;&#12471;&#12531;&#12503;&#12523;&#12394;
&#12521;&#12452;&#12502;&#12521;&#12522;&#12420;Sinatra&#12398;&#25313;&#24373;&#12503;&#12525;&#12464;&#12521;&#12512;&#12434;&#32771;&#24942;&#12377;&#12427;&#12424;&#12358;&#12394;&#22580;&#21512;&#12399;&#12381;&#12358;&#12392;&#12399;&#38480;&#12426;&#12414;&#12379;&#12435;&#12290;
&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12398;DSL&#12364;&#12493;&#12540;&#12512;&#12473;&#12506;&#12540;&#12473;&#12434;&#27738;&#26579;&#12375;&#12383;&#12426;&#12289;&#35373;&#23450;&#12434;&#22793;&#12360;&#12390;&#12375;&#12414;&#12358;&#12371;&#12392;(&#20363;:./public&#12420;./view)&#12364;&#12354;&#12426;&#12360;&#12414;&#12377;&#12290;
&#12381;&#12371;&#12391;Sinatra::Base&#12398;&#20986;&#30058;&#12391;&#12377;&#12290;</p>

<pre><code>require 'sinatra/base'

class MyApp &lt; Sinatra::Base
  set :sessions, true
  set :foo, 'bar'

  get '/' do
    'Hello world!'
  end
end
</code></pre>

<p>&#12371;&#12398;MyApp&#12399;&#29420;&#31435;&#12375;&#12383;Rack&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12391;&#12289;Rack&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12420;Rack&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;
Rails metal&#12392;&#12375;&#12390;&#20351;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;<code>config.ru</code>&#12501;&#12449;&#12452;&#12523;&#20869;&#12391; <code>use</code>
&#12363;&#12289;&#12414;&#12383;&#12399; <code>run</code>
&#12391;&#12371;&#12398;&#12463;&#12521;&#12473;&#12434;&#25351;&#23450;&#12377;&#12427;&#12363;&#12289;&#12521;&#12452;&#12502;&#12521;&#12522;&#12392;&#12375;&#12390;&#12469;&#12540;&#12496;&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12434;&#12467;&#12531;&#12488;&#12525;&#12540;&#12523;&#12375;&#12414;&#12377;&#12290;</p>

<pre><code>MyApp.run! :host =&gt; 'localhost', :port =&gt; 9090
</code></pre>

<p>Sinatra::Base&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12391;&#20351;&#12360;&#12427;&#12513;&#12477;&#12483;&#12489;&#12399;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12398;DSL&#12434;&#32076;&#30001;&#12375;&#12390;&#30906;&#23455;&#12395;&#20351;&#12358;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
&#12411;&#12392;&#12435;&#12393;&#12398;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12391;&#35352;&#36848;&#12373;&#12428;&#12383;&#12450;&#12503;&#12522;&#12399;&#12289;&#20197;&#19979;&#12398;&#65298;&#28857;&#12434;&#20462;&#27491;&#12377;&#12427;&#12371;&#12392;&#12391;Sinatra::Base&#12467;&#12531;&#12509;&#12540;&#12493;&#12531;&#12488;&#12395;&#22793;&#12360;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<ul>
<li>  <code>sinatra</code>&#12398;&#20195;&#12431;&#12426;&#12395;<code>sinatra/base</code>&#12434;&#35501;&#12415;&#36796;&#12416;</li>
</ul>
<p>(&#12381;&#12358;&#12375;&#12394;&#12356;&#22580;&#21512;&#12289;Sinatra&#12398;DSL&#12513;&#12477;&#12483;&#12489;&#12398;&#20840;&#12390;&#12364;&#12513;&#12452;&#12531;&#12493;&#12540;&#12512;&#12473;&#12506;&#12540;&#12473;&#12395;&#12452;&#12531;&#12509;&#12540;&#12488;&#12373;&#12428;&#12414;&#12377;)</p>

<ul>
<li>  &#12523;&#12540;&#12488;&#12289;&#12456;&#12521;&#12540;&#12495;&#12531;&#12489;&#12521;&#12540;&#12289;&#12501;&#12451;&#12523;&#12479;&#12540;&#12289;&#12458;&#12503;&#12471;&#12519;&#12531;&#12434;Sinatra::Base&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12395;&#26360;&#12367;</li>
</ul>
<p><code>Sinatra::Base</code>
&#12399;&#12414;&#12387;&#12373;&#12425;&#12391;&#12377;&#12290;&#12499;&#12523;&#12488;&#12452;&#12531;&#12469;&#12540;&#12496;&#12434;&#21547;&#12416;&#12289;&#12411;&#12392;&#12435;&#12393;&#12398;&#12458;&#12503;&#12471;&#12519;&#12531;&#12364;&#12487;&#12501;&#12457;&#12523;&#12488;
&#12391;&#28961;&#21177;&#12395;&#12394;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;&#12458;&#12503;&#12471;&#12519;&#12531;&#35443;&#32048;&#12395;&#12388;&#12356;&#12390;&#12399;<a href="http://sinatra.github.com/configuration.html">Options and
Configuration</a>
&#12434;&#12372;&#35239;&#19979;&#12373;&#12356;&#12290;</p>

<p>&#35036;&#36275;:
Sinatra&#12398;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;DSL&#12399;&#12471;&#12531;&#12503;&#12523;&#12394;&#22996;&#35698;(delgation)&#12471;&#12473;&#12486;&#12512;&#12391;&#23455;&#35013;&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;&#12290;
<code>Sinatra::Application</code>&#12463;&#12521;&#12473;(Sinatra::Base&#12398;&#29305;&#21029;&#12394;&#12469;&#12502;&#12463;&#12521;&#12473;)&#12399;&#12289;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12395;&#36865;&#12425;&#12428;&#12427;
:get&#12289; :put&#12289; :post&#12289;:delete&#12289; :before&#12289;:error&#12289;:not_found&#12289;
:configure&#12289;:set messages&#12398;&#12371;&#12428;&#12425; &#20840;&#12390;&#12434;&#21463;&#12369;&#21462;&#12426;&#12414;&#12377;&#12290;
&#35443;&#32048;&#12434;&#38322;&#35239;&#12373;&#12428;&#12383;&#12356;&#26041;&#12399;&#12371;&#12385;&#12425;(&#33521;&#35486;): <a href="http://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1064">Sinatra::Delegator
mixin</a>
<a href="http://github.com/sinatra/sinatra/blob/master/lib/sinatra/main.rb#L25">included into the main
namespace</a>.</p>

<a name='Sinatra&%2312434;&%2312511;&%2312489;&%2312523;&%2312454;&%2312455;&%2312450;&%2312392;&%2312375;&%2312390;&%2321033;&%2329992;&%2312377;&%2312427;'></a>
<h3>Sinatra&#12434;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12392;&#12375;&#12390;&#21033;&#29992;&#12377;&#12427;</h3>

<p>Sinatra&#12399;&#20182;&#12398;Rack&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12434;&#21033;&#29992;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12427;&#12384;&#12369;&#12391;&#12394;&#12367;&#12289;
&#20840;&#12390;&#12398;Sinatra&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12399;&#12289;&#12381;&#12428;&#33258;&#20307;&#12511;&#12489;&#12523;&#12454;&#12455;&#12450;&#12392;&#12375;&#12390;&#21029;&#12398;Rack&#12456;&#12531;&#12489;&#12509;&#12452;&#12531;&#12488;&#12398;&#21069;&#12395;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#21487;&#33021;&#12391;&#12377;&#12290;</p>

<p>&#12371;&#12398;&#12456;&#12531;&#12489;&#12509;&#12452;&#12531;&#12488;&#12395;&#12399;&#12289;&#21029;&#12398;Sinatra&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12414;&#12383;&#12399;&#20182;&#12398;Rack&#12505;&#12540;&#12473;&#12398;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;(Rails/Ramaze/Camping/&hellip;)&#12364;&#29992;&#12356;&#12425;&#12428;&#12427;&#12391;&#12375;&#12423;&#12358;&#12290;</p>

<pre><code>require 'sinatra/base'

class LoginScreen &lt; Sinatra::Base
  enable :sessions

  get('/login') { haml :login }

  post('/login') do
    if params[:name] = 'admin' and params[:password] = 'admin'
      session['user_name'] = params[:name]
    else
      redirect '/login'
    end
  end
end

class MyApp &lt; Sinatra::Base
  # middleware will run before filters
  use LoginScreen

  before do
    unless session['user_name']
      halt "Access denied, please &lt;a href='/login'&gt;login&lt;/a&gt;."
    end
  end

  get('/') { "Hello #{session['user_name']}." }
end
</code></pre>

<a name='&%2312473;&%2312467;&%2312540;&%2312503;&%2312392;&%2312496;&%2312452;&%2312531;&%2312487;&%2312451;&%2312531;&%2312464;'></a>
<h2>&#12473;&#12467;&#12540;&#12503;&#12392;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;</h2>

<p>&#29694;&#22312;&#12398;&#12473;&#12467;&#12540;&#12503;&#12399;&#12393;&#12398;&#12513;&#12477;&#12483;&#12489;&#12420;&#22793;&#25968;&#12364;&#21033;&#29992;&#21487;&#33021;&#12363;&#12434;&#27770;&#23450;&#12375;&#12414;&#12377;&#12290;</p>

<a name='&%2312450;&%2312503;&%2312522;&%2312465;&%2312540;&%2312471;&%2312519;&%2312531;/&%2312463;&%2312521;&%2312473;&%2312398;&%2312473;&%2312467;&%2312540;&%2312503;'></a>
<h3>&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;/&#12463;&#12521;&#12473;&#12398;&#12473;&#12467;&#12540;&#12503;</h3>

<p>&#20840;&#12390;&#12398;Sinatra&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12399;Sinatra::Base&#12398;&#12469;&#12502;&#12463;&#12521;&#12473;&#12395;&#30456;&#24403;&#12375;&#12414;&#12377;&#12290;
&#12418;&#12375;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;DSL&#12434;&#21033;&#29992;&#12375;&#12390;&#12356;&#12427;&#12394;&#12425;&#12400;(<code>require 'sinatra'</code>)&#12371;&#12398;&#12463;&#12521;&#12473;&#12399;Sinatra::Application&#12391;&#12354;&#12426;&#12289;
&#12381;&#12358;&#12391;&#12394;&#12369;&#12428;&#12400;&#12289;&#12354;&#12394;&#12383;&#12364;&#26126;&#31034;&#30340;&#12395;&#20316;&#25104;&#12375;&#12383;&#12469;&#12502;&#12463;&#12521;&#12473;&#12391;&#12377;&#12290;
&#12463;&#12521;&#12473;&#12524;&#12505;&#12523;&#12391;&#12399;`get`&#12420;`before`&#12398;&#12424;&#12358;&#12394;&#12513;&#12477;&#12483;&#12489;&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;&#12290;
&#12375;&#12363;&#12375;`request`&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12420;`session`&#12395;&#12399;&#12289;&#20840;&#12390;&#12398;&#12522;&#12463;&#12456;&#12473;&#12488;&#12398;&#12383;&#12417;&#12395;1&#12388;&#12398;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12463;&#12521;&#12473;&#12364;&#23384;&#22312;&#12377;&#12427;&#12383;&#12417;&#12450;&#12463;&#12475;&#12473;&#12391;&#12365;&#12414;&#12379;&#12435;&#12290;</p>

<p>`set`&#12395;&#12424;&#12387;&#12390;&#20316;&#12425;&#12428;&#12383;&#12458;&#12503;&#12471;&#12519;&#12531;&#12399;&#12463;&#12521;&#12473;&#12524;&#12505;&#12523;&#12398;&#12513;&#12477;&#12483;&#12489;&#12391;&#12377;:</p>

<pre><code>class MyApp &lt; Sinatra::Base
  # Hey, I'm in the application scope!
  set :foo, 42
  foo # =&gt; 42

  get '/foo' do
    # Hey, I'm no longer in the application scope!
  end
end
</code></pre>

<p>&#27425;&#12398;&#22580;&#25152;&#12391;&#12399;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12473;&#12467;&#12540;&#12503;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;&#12434;&#25345;&#12385;&#12414;&#12377;:</p>

<ul>
<li><p>&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12398;&#12463;&#12521;&#12473;&#26412;&#20307;</p></li>
<li><p>&#25313;&#24373;&#12395;&#12424;&#12387;&#12390;&#23450;&#32681;&#12373;&#12428;&#12383;&#12513;&#12477;&#12483;&#12489;</p></li>
<li><p>`helpers`&#12395;&#28193;&#12373;&#12428;&#12383;&#12502;&#12525;&#12483;&#12463;</p></li>
<li><p>`set`&#12398;&#20516;&#12392;&#12375;&#12390;&#20351;&#12431;&#12428;&#12427;Proc&#12414;&#12383;&#12399;&#12502;&#12525;&#12483;&#12463;</p></li>
</ul>
<p>&#12371;&#12398;&#12473;&#12467;&#12540;&#12503;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;(&#12463;&#12521;&#12473;)&#12399;&#27425;&#12398;&#12424;&#12358;&#12395;&#21033;&#29992;&#12391;&#12365;&#12414;&#12377;:</p>

<ul>
<li><p>configure&#12502;&#12525;&#12483;&#12463;&#12395;&#28193;&#12373;&#12428;&#12383;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#32076;&#30001;(<code>configure { |c| ... }</code>)</p></li>
<li><p>&#12522;&#12463;&#12456;&#12473;&#12488;&#12473;&#12467;&#12540;&#12503;&#12398;&#20013;&#12391;&#12398;`settings`</p></li>
</ul>
<a name='&%2312522;&%2312463;&%2312456;&%2312473;&%2312488;/&%2312452;&%2312531;&%2312473;&%2312479;&%2312531;&%2312473;&%2312398;&%2312473;&%2312467;&%2312540;&%2312503;'></a>
<h3>&#12522;&#12463;&#12456;&#12473;&#12488;/&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12398;&#12473;&#12467;&#12540;&#12503;</h3>

<p>&#12420;&#12387;&#12390;&#12367;&#12427;&#12522;&#12463;&#12456;&#12473;&#12488;&#12372;&#12392;&#12395;&#12289;&#12354;&#12394;&#12383;&#12398;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12463;&#12521;&#12473;&#12398;&#26032;&#12375;&#12356;&#12452;&#12531;&#12473;&#12479;&#12531;&#12473;&#12364;&#20316;&#25104;&#12373;&#12428;&#12289;&#20840;&#12390;&#12398;&#12495;&#12531;&#12489;&#12521;&#12502;&#12525;&#12483;&#12463;&#12364;&#12381;&#12398;&#12473;&#12467;&#12540;&#12503;&#12391;&#23455;&#34892;&#12373;&#12428;&#12414;&#12377;&#12290;
&#12371;&#12398;&#12473;&#12467;&#12540;&#12503;&#12398;&#20869;&#20596;&#12363;&#12425;&#12399;`request`&#12420;`session`&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;&#12395;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12289;`erb`&#12420;`haml`&#12398;&#12424;&#12358;&#12394;&#34920;&#31034;&#12513;&#12477;&#12483;&#12489;&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;
&#12522;&#12463;&#12456;&#12473;&#12488;&#12473;&#12467;&#12540;&#12503;&#12398;&#20869;&#20596;&#12363;&#12425;&#12399;&#12289;`settings`&#12504;&#12523;&#12497;&#12395;&#12424;&#12387;&#12390;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12473;&#12467;&#12540;&#12503;&#12395;&#12450;&#12463;&#12475;&#12473;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>class MyApp &lt; Sinatra::Base
  # Hey, I'm in the application scope!
  get '/define_route/:name' do
    # Request scope for '/define_route/:name'
    @value = 42

    settings.get("/#{params[:name]}") do
      # Request scope for "/#{params[:name]}"
      @value # =&gt; nil (not the same request)
    end

    "Route defined!"
  end
end
</code></pre>

<p>&#27425;&#12398;&#22580;&#25152;&#12391;&#12399;&#12522;&#12463;&#12456;&#12473;&#12488;&#12473;&#12467;&#12540;&#12503;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;&#12434;&#25345;&#12385;&#12414;&#12377;:</p>

<ul>
<li><p>get/head/post/put/delete &#12502;&#12525;&#12483;&#12463;</p></li>
<li><p>before/after &#12501;&#12451;&#12523;&#12479;</p></li>
<li><p>helper &#12513;&#12477;&#12483;&#12489;</p></li>
<li><p>&#12486;&#12531;&#12503;&#12524;&#12540;&#12488;/&#12499;&#12517;&#12540;</p></li>
</ul>
<a name='&%2312487;&%2312522;&%2312466;&%2312540;&%2312488;&%2312473;&%2312467;&%2312540;&%2312503;'></a>
<h3>&#12487;&#12522;&#12466;&#12540;&#12488;&#12473;&#12467;&#12540;&#12503;</h3>

<p>&#12487;&#12522;&#12466;&#12540;&#12488;&#12473;&#12467;&#12540;&#12503;&#12399;&#12289;&#21336;&#12395;&#12463;&#12521;&#12473;&#12473;&#12467;&#12540;&#12503;&#12395;&#12513;&#12477;&#12483;&#12489;&#12434;&#36578;&#36865;&#12375;&#12414;&#12377;&#12290;
&#12375;&#12363;&#12375;&#12394;&#12364;&#12425;&#12289;&#12463;&#12521;&#12473;&#12398;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;&#12434;&#25345;&#12387;&#12390;&#12356;&#12394;&#12356;&#12383;&#12417;&#12289;&#12463;&#12521;&#12473;&#12473;&#12467;&#12540;&#12503;&#12392;&#20840;&#12367;&#21516;&#12376;&#12405;&#12427;&#12414;&#12356;&#12434;&#12377;&#12427;&#12431;&#12369;&#12391;&#12399;&#12354;&#12426;&#12414;&#12379;&#12435;:
&#22996;&#35698;&#12377;&#12427;&#12392;&#26126;&#31034;&#30340;&#12395;&#31034;&#12373;&#12428;&#12383;&#12513;&#12477;&#12483;&#12489;&#12398;&#12415;&#12364;&#21033;&#29992;&#21487;&#33021;&#12391;&#12354;&#12426;&#12289;&#12414;&#12383;&#12463;&#12521;&#12473;&#12473;&#12467;&#12540;&#12503;&#12392;&#22793;&#25968;/&#29366;&#24907;&#12434;&#20849;&#26377;&#12377;&#12427;&#12371;&#12392;&#12399;&#12391;&#12365;&#12414;&#12379;&#12435;(&#27880;:
&#30064;&#12394;&#12387;&#12383;`self`&#12434;&#25345;&#12387;&#12390;&#12356;&#12414;&#12377;)&#12290;
<code>Sinatra::Delegator.delegate :method_name</code>&#12434;&#21628;&#12403;&#20986;&#12377;&#12371;&#12392;&#12395;&#12424;&#12387;&#12390;&#12487;&#12522;&#12466;&#12540;&#12488;&#12377;&#12427;&#12513;&#12477;&#12483;&#12489;&#12434;&#26126;&#31034;&#30340;&#12395;&#36861;&#21152;&#12377;&#12427;&#12371;&#12392;&#12364;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<p>&#27425;&#12398;&#22580;&#25152;&#12391;&#12399;&#12487;&#12522;&#12466;&#12540;&#12488;&#12473;&#12467;&#12540;&#12503;&#12434;&#25345;&#12385;&#12414;&#12377;:</p>

<ul>
<li><p>&#12418;&#12375;<code>require "sinatra"</code>&#12375;&#12390;&#12356;&#12427;&#12394;&#12425;&#12400;&#12289;&#12488;&#12483;&#12503;&#12524;&#12505;&#12523;&#12496;&#12452;&#12531;&#12487;&#12451;&#12531;&#12464;</p></li>
<li><p>`Sinatra::Delegator` mixin&#12391;extend&#12373;&#12428;&#12383;&#12458;&#12502;&#12472;&#12455;&#12463;&#12488;</p></li>
</ul>
<p>&#12467;&#12540;&#12489;&#12434;&#12372;&#35239;&#12367;&#12384;&#12373;&#12356;: &#12371;&#12371;&#12391;&#12399; <a href="http://github.com/sinatra/sinatra/blob/ceac46f0bc129a6e994a06100aa854f606fe5992/lib/sinatra/base.rb#L1128">Sinatra::Delegator
mixin</a>
&#12399;<a href="http://github.com/sinatra/sinatra/blob/ceac46f0bc129a6e994a06100aa854f606fe5992/lib/sinatra/main.rb#L28">main
&#21517;&#21069;&#31354;&#38291;&#12395;include&#12373;&#12428;&#12390;&#12356;&#12414;&#12377;</a>.</p>

<a name='&%2312467;&%2312510;&%2312531;&%2312489;&%2312521;&%2312452;&%2312531;'></a>
<h2>&#12467;&#12510;&#12531;&#12489;&#12521;&#12452;&#12531;</h2>

<p>Sinatra&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12399;&#30452;&#25509;&#23455;&#34892;&#12391;&#12365;&#12414;&#12377;&#12290;</p>

<pre><code>ruby myapp.rb [-h] [-x] [-e ENVIRONMENT] [-p PORT] [-o HOST] [-s HANDLER]
</code></pre>

<p>&#12458;&#12503;&#12471;&#12519;&#12531;:</p>

<pre><code>-h # &#12504;&#12523;&#12503;
-p # &#12509;&#12540;&#12488;&#25351;&#23450;(&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;4567)
-o # &#12507;&#12473;&#12488;&#25351;&#23450;(&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;0.0.0.0)
-e # &#29872;&#22659;&#12434;&#25351;&#23450; (&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;development)
-s # rackserver/handler&#12434;&#25351;&#23450; (&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;thin)
-x # mutex lock&#12434;&#20184;&#12369;&#12427; (&#12487;&#12501;&#12457;&#12523;&#12488;&#12399;off)
</code></pre>

<a name='&%2326368;&%2326032;&%2338283;&%2330330;&%2329256;&%2312395;&%2312388;&%2312356;&%2312390;'></a>
<h2>&#26368;&#26032;&#38283;&#30330;&#29256;&#12395;&#12388;&#12356;&#12390;</h2>

<p>Sinatra&#12398;&#38283;&#30330;&#29256;&#12434;&#20351;&#12356;&#12383;&#12356;&#22580;&#21512;&#12399;&#12289;&#12525;&#12540;&#12459;&#12523;&#12395;&#38283;&#30330;&#29256;&#12434;&#33853;&#12392;&#12375;&#12390;&#12289;
<code>LOAD_PATH</code>&#12398;<code>sinatra/lib</code>&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#25351;&#23450;&#12375;&#12390;&#23455;&#34892;&#12375;&#12390;&#19979;&#12373;&#12356;&#12290;</p>

<pre><code>cd myapp
git clone git://github.com/sinatra/sinatra.git
ruby -Isinatra/lib myapp.rb
</code></pre>

<p><code>sinatra/lib</code>&#12487;&#12451;&#12524;&#12463;&#12488;&#12522;&#12434;&#12450;&#12503;&#12522;&#12465;&#12540;&#12471;&#12519;&#12531;&#12398;<code>LOAD_PATH</code>&#12395;&#36861;&#21152;&#12377;&#12427;&#26041;&#27861;&#12418;&#12354;&#12426;&#12414;&#12377;&#12290;</p>

<pre><code>$LOAD_PATH.unshift File.dirname(__FILE__) + '/sinatra/lib'
require 'rubygems'
require 'sinatra'

get '/about' do
  "&#20170;&#20351;&#12387;&#12390;&#12427;&#12496;&#12540;&#12472;&#12519;&#12531;&#12399;" + Sinatra::VERSION
end
</code></pre>

<p>Sinatra&#12398;&#12477;&#12540;&#12473;&#12434;&#26356;&#26032;&#12377;&#12427;&#26041;&#27861;:</p>

<pre><code>cd myproject/sinatra
git pull
</code></pre>

<a name='&%2312381;&%2312398;&%2320182;'></a>
<h2>&#12381;&#12398;&#20182;</h2>

<p>&#26085;&#26412;&#35486;&#12469;&#12452;&#12488;</p>

<ul>
<li>  <a href="http://mono.kmc.gr.jp/%7Eyhara/w/?RackReferenceJa">Greenbear Laboratory
Rack&#26085;&#26412;&#35486;&#12510;&#12491;&#12517;&#12450;&#12523;</a>

<ul>
<li>Rack&#12398;&#26085;&#26412;&#35486;&#12510;&#12491;&#12517;&#12450;&#12523;</li>
</ul>
</li>
</ul>
<p>&#33521;&#35486;&#12469;&#12452;&#12488;</p>

<ul>
<li><p><a href="http://sinatra.github.com/">&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12469;&#12452;&#12488;</a> - &#12489;&#12461;&#12517;&#12513;&#12531;&#12488;&#12289;
&#12491;&#12517;&#12540;&#12473;&#12289;&#20182;&#12398;&#12522;&#12477;&#12540;&#12473;&#12408;&#12398;&#12522;&#12531;&#12463;&#12364;&#12354;&#12426;&#12414;&#12377;&#12290;</p></li>
<li>
<p><a href="http://sinatra.github.com/contributing.html">&#12503;&#12525;&#12472;&#12455;&#12463;&#12488;&#12395;&#21442;&#21152;(&#36002;&#29486;)&#12377;&#12427;</a></p>

<ul>
<li>&#12496;&#12464;&#12524;&#12509;&#12540;&#12488; &#12497;&#12483;&#12481;&#12398;&#36865;&#20449;&#12289;&#12469;&#12509;&#12540;&#12488;&#12394;&#12393;</li>
</ul>
</li>
<li><p><a href="http://github.com/sinatra/sinatra/issues">Issue tracker</a> -
&#12481;&#12465;&#12483;&#12488;&#31649;&#29702;&#12392;&#12522;&#12522;&#12540;&#12473;&#35336;&#30011;</p></li>
<li><p><a href="http://twitter.com/sinatra">Twitter</a></p></li>
<li><p><a href="http://groups.google.com/group/sinatrarb">&#12513;&#12540;&#12522;&#12531;&#12464;&#12522;&#12473;&#12488;</a></p></li>
<li><p><a href="irc://chat.freenode.net/#sinatra">IRC: #sinatra</a> on
<a href="http://freenode.net">freenode.net</a></p></li>
</ul>
</body></html>
